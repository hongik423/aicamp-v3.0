# 🚀 AICAMP Vercel 배포 완전 가이드

**작성일**: 2025년 1월 28일  
**버전**: v3.0.27 (무오류 시스템 완성)  
**상태**: ✅ 빌드 테스트 완료 (44개 페이지 성공)

---

## 📋 배포 준비 상태

### ✅ 완료된 사전 작업
- [x] **빌드 테스트 성공**: 44개 페이지 모두 정상 빌드
- [x] **환경 변수 설정**: `.env.local` 파일 준비 완료
- [x] **Vercel 설정**: `vercel.json` 최적화 완료
- [x] **의존성 검증**: 모든 패키지 정상 설치
- [x] **API 엔드포인트**: 12개 API 라우트 준비 완료

### 📊 빌드 결과 요약
```
✓ Compiled successfully
✓ Collecting page data    
✓ Generating static pages (44/44)
✓ Collecting build traces    
✓ Finalizing page optimization

총 페이지: 44개
API 라우트: 12개
정적 페이지: 40개
동적 페이지: 4개
```

---

## 🚀 Vercel 배포 단계

### 1단계: Vercel 로그인

```bash
# Vercel CLI로 로그인 (이미 실행됨)
vercel login
```

**로그인 옵션 선택:**
- GitHub 계정 추천 (코드 저장소와 연동)
- Google 계정도 가능
- 이메일 직접 로그인도 가능

### 2단계: 프로젝트 초기화

```bash
# 프로젝트 초기화
vercel

# 질문 응답 가이드:
# ? Set up and deploy "C:\VS_Code_202410\aicamp_v3.0"? [Y/n] → Y
# ? Which scope do you want to deploy to? → 개인 계정 선택
# ? Link to existing project? [y/N] → N (새 프로젝트)
# ? What's your project's name? → aicamp-v3 (또는 원하는 이름)
# ? In which directory is your code located? → ./ (현재 디렉토리)
```

### 3단계: 환경 변수 설정

Vercel 대시보드에서 환경 변수를 설정하거나 CLI로 설정:

```bash
# 주요 환경 변수 설정
vercel env add GEMINI_API_KEY
# 값: AIzaSyAP-Qa4TVNmsc-KAPTuQFjLalDNcvMHoiM

vercel env add NEXT_PUBLIC_GOOGLE_SCRIPT_URL
# 값: https://script.google.com/macros/s/AKfycbzYIDWtMiz9mUjuInH981lcKbN4DaXMkYxQ2CHYFMuSW0zd98D6ohdp5NbfdhqLnN0/exec

vercel env add NEXT_PUBLIC_GOOGLE_SHEETS_ID
# 값: 1QNgQSsyAdeSu1ejhIm4PFyeSRKy3NmwbLQnKLF8vqA0

vercel env add ADMIN_EMAIL
# 값: hongik423@gmail.com
```

### 4단계: 프로덕션 배포

```bash
# 프로덕션 배포 실행
vercel --prod

# 또는 npm 스크립트 사용
npm run vercel:deploy
```

---

## 🔧 환경 변수 전체 목록

Vercel 대시보드 → Settings → Environment Variables에서 다음 변수들을 설정하세요:

### 🔑 필수 환경 변수

| 변수명 | 값 | 설명 |
|--------|----|----|
| `GEMINI_API_KEY` | `AIzaSyAP-Qa4TVNmsc-KAPTuQFjLalDNcvMHoiM` | AI 챗봇 API 키 |
| `NEXT_PUBLIC_GOOGLE_SCRIPT_URL` | `https://script.google.com/macros/s/AKfycbzYIDWtMiz9mUjuInH981lcKbN4DaXMkYxQ2CHYFMuSW0zd98D6ohdp5NbfdhqLnN0/exec` | Google Apps Script URL |
| `NEXT_PUBLIC_GOOGLE_SHEETS_ID` | `1QNgQSsyAdeSu1ejhIm4PFyeSRKy3NmwbLQnKLF8vqA0` | 구글시트 ID |
| `ADMIN_EMAIL` | `hongik423@gmail.com` | 관리자 이메일 |

### 🎯 추가 환경 변수

```bash
# 회사 정보
NEXT_PUBLIC_COMPANY_NAME=AI CAMP
NEXT_PUBLIC_CONSULTANT_NAME=이후경 교장
NEXT_PUBLIC_CONSULTANT_TITLE=경영지도사

# 시스템 설정
NODE_ENV=production
DEBUG_MODE=true
AUTO_REPLY_ENABLED=true

# 베타테스트
NEXT_PUBLIC_BETA_FEEDBACK_ENABLED=true
BETA_ADMIN_EMAIL=hongik423@gmail.com
```

---

## 📝 Vercel 설정 최적화

### `vercel.json` 설정 내용

```json
{
  "version": 2,
  "name": "aicamp-v3",
  "regions": ["icn1", "syd1"],
  "functions": {
    "src/app/api/*/route.ts": {
      "maxDuration": 30
    }
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Access-Control-Allow-Origin",
          "value": "*"
        },
        {
          "key": "Access-Control-Allow-Methods",
          "value": "GET, POST, PUT, DELETE, OPTIONS"
        },
        {
          "key": "Access-Control-Allow-Headers",
          "value": "Content-Type, Authorization"
        }
      ]
    }
  ]
}
```

### 주요 설정 설명
- **regions**: 한국(`icn1`), 시드니(`syd1`) 리전 사용으로 한국 사용자 최적화
- **maxDuration**: API 응답 시간 30초로 설정 (AI 처리 시간 고려)
- **CORS**: 모든 도메인에서 API 호출 허용

---

## 🔍 배포 후 테스트

### 1. 기본 기능 테스트

```bash
# 배포 완료 후 테스트 실행
npm run test:comprehensive

# 개별 시스템 테스트
node test-aicamp-complete-system.js
```

### 2. 수동 테스트 체크리스트

| 기능 | 테스트 URL | 확인 사항 |
|-----|------------|-----------|
| 홈페이지 | `/` | 로딩 및 UI 표시 |
| AI 챗봇 | `/chatbot` | 대화 응답 정상 |
| 무료 진단 | `/diagnosis` | 폼 제출 및 결과 |
| 상담 신청 | `/consultation` | 이메일 발송 |
| 베타 피드백 | `/tax-calculator` | 오류 신고 기능 |

### 3. API 엔드포인트 테스트

```bash
# AI 챗봇 API
curl -X POST https://your-domain.vercel.app/api/chat-ai \
  -H "Content-Type: application/json" \
  -d '{"message": "안녕하세요"}'

# 진단 API
curl -X POST https://your-domain.vercel.app/api/simplified-diagnosis \
  -H "Content-Type: application/json" \
  -d @test-diagnosis-data.json
```

---

## 🚨 문제 해결 가이드

### 일반적인 오류 및 해결방법

#### 1. 빌드 오류
```bash
# 캐시 정리 후 재빌드
rm -rf .next
npm run build
```

#### 2. 환경 변수 오류
- Vercel 대시보드에서 환경 변수 재확인
- Production, Preview, Development 모든 환경에 설정 확인

#### 3. API 타임아웃 오류
- `vercel.json`의 `maxDuration` 설정 확인
- Vercel Pro 계정에서는 최대 60초까지 가능

#### 4. 한국어 인코딩 문제
- UTF-8 설정이 올바른지 확인
- Google Apps Script에서도 UTF-8 지원 확인

### 로그 확인 방법

```bash
# Vercel 함수 로그 확인
vercel logs

# 실시간 로그 모니터링
vercel logs -f
```

---

## 📊 성능 최적화

### 1. 이미지 최적화
- Next.js Image 컴포넌트 사용
- WebP 형식 이미지 사용

### 2. API 응답 속도
- Google Apps Script 응답 시간 모니터링
- 캐싱 전략 고려

### 3. SEO 최적화
- 메타 태그 설정 완료
- 사이트맵 자동 생성

---

## 🔄 지속적 배포 (CI/CD)

### GitHub 연동 설정

1. **GitHub Repository 연결**
   ```bash
   # GitHub에 코드 푸시
   git add .
   git commit -m "🚀 Vercel 배포 준비 완료"
   git push origin main
   ```

2. **자동 배포 설정**
   - Vercel 대시보드에서 GitHub 저장소 연결
   - `main` 브랜치 푸시 시 자동 배포

### 배포 스크립트 활용

```bash
# 완전 자동 배포
npm run deploy:complete

# 단계별 배포
npm run build
npm run vercel:deploy
npm run test:beta-feedback
```

---

## 📞 지원 및 문의

### 기술 지원
- **담당자**: 이후경 교장 (경영지도사)
- **연락처**: 010-9251-9743
- **이메일**: hongik423@gmail.com

### 긴급 상황 대응
1. **서버 다운**: Vercel 상태 페이지 확인
2. **API 오류**: Google Apps Script 로그 확인
3. **데이터 문제**: 구글시트 접근 권한 확인

---

## 🎯 배포 완료 후 할 일

### 1. 도메인 설정 (선택사항)
```bash
# 커스텀 도메인 추가
vercel domains add aicamp.club
```

### 2. 모니터링 설정
- Vercel Analytics 활성화
- Google Analytics 연동

### 3. 백업 계획
- 데이터베이스 정기 백업
- 환경 변수 백업 저장

---

**🚀 배포 준비 완료! 이제 `vercel login` 후 `vercel --prod` 명령어로 배포하세요!**

---

**© 2025 AICAMP AI교육센터. All Rights Reserved.** 