<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafetyMaster Pro V2.0 - 산업안전기사 2차 완벽대비 뇌새김 암기카드</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f3f4f6;
            --card-shadow: 0 20px 60px rgba(0,0,0,0.15);
            --animation-duration: 0.6s;
            
            /* 새로운 고급 UI 변수들 */
            --slide-width: 100vw;
            --slide-height: 56.25vw; /* 16:9 비율 */
            --max-slide-height: 80vh;
            --card-3d-rotate: 0deg;
            --card-scale: 1;
            --transition-smooth: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* 배경 애니메이션 효과 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,133.3C960,128,1056,96,1152,90.7C1248,85,1344,107,1392,117.3L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path></svg>') no-repeat;
            background-size: cover;
            opacity: 0.3;
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* 헤더 디자인 */
        .header {
            background: white !important;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
            display: flex !important;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95) !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 100 !important;
        }

        .header .logo {
            flex-shrink: 0;
        }

        .header .navbar-menu {
            flex: 1;
            display: flex !important;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 999 !important;
        }

        .header .exam-info-section {
            flex-shrink: 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .logo-text {
            font-size: 24px;
            font-weight: 900;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* 학습 정보 패널 */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* 컨트롤 패널 */
        .control-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            font-size: 16px;
            opacity: 1;
            pointer-events: auto;
        }

        /* 인라인 스타일을 클래스로 변환 */
        .text-right {
            text-align: right;
        }
        
        .exam-info {
            font-size: 14px;
            color: #666;
        }
        
        .countdown {
            font-size: 24px;
            font-weight: bold;
            color: var(--danger);
        }
        
        .progress-fill {
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .timer-display {
            display: none;
        }
        
        .text-center {
            text-align: center;
        }
        
        .card-header-flex {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .card-counter {
            color: #666;
            font-size: 14px;
        }
        
        .card-hint {
            display: none;
        }
        
        .card-answer {
            display: none;
        }
        
        /* 문제 섹션 지속 표시 */
        .question-section.persistent {
            display: block !important;
            opacity: 1;
            transform: none;
        }
        
        .question-section.persistent .card-question {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            border: 2px solid rgba(76, 175, 80, 0.3);
            box-shadow: 0 8px 32px rgba(76, 175, 80, 0.2);
        }
        
        .memory-tip {
            display: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* 학습 모드 선택 */
        .mode-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .mode-btn {
            padding: 15px;
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-btn.active {
            background: var(--primary);
            color: white;
            border-color: transparent;
            transform: scale(1.05);
        }

        .mode-btn:hover {
            border-color: #764ba2;
        }

        .mode-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .mode-label {
            font-weight: 600;
            font-size: 14px;
        }

        /* 메인 카드 영역 - 16:9 가로슬라이드 형식 */
        .card-container {
            max-width: 90vw;
            width: 90vw;
            height: 50.625vw; /* 16:9 비율 (90vw * 9/16) */
            max-height: 80vh;
            margin: 0 auto;
            perspective: 1000px;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }

        .memory-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            position: absolute;
            width: 100%;
            height: 100%;
            transition: all var(--animation-duration) cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .memory-card.hide {
            opacity: 0;
            transform: translateX(-100%) rotateY(-180deg);
        }

        .memory-card.show {
            opacity: 1;
            transform: translateX(0) rotateY(0);
        }

        /* 16:9 가로 슬라이드 학습 카드 스타일 */
        .memory-card.learning-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch;
            text-align: left;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        /* 학습 헤더 */
        .learning-header {
            background: rgba(255, 255, 255, 0.1);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .learning-progress {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 8px;
            flex: 1;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            color: white;
            font-weight: 600;
            font-size: 14px;
            white-space: nowrap;
        }

        .learning-controls {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            font-weight: bold;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* 학습 메인 콘텐츠 - 16:9 가로 레이아웃 */
        .learning-content {
            display: flex;
            flex: 1;
            min-height: 0;
        }

        .learning-left {
            flex: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .learning-right {
            flex: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* 문제 섹션 */
        .question-section {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-category {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .question-importance {
            color: #FFD700;
            font-size: 16px;
        }

        .question-text {
            color: white;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: left;
        }

        .question-image {
            text-align: center;
            margin-top: 20px;
        }

        .image-icon {
            font-size: 48px;
            opacity: 0.8;
        }

        /* 답안 섹션 */
        .answer-section {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .answer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .answer-label {
            color: white;
            font-size: 16px;
            font-weight: 600;
        }

        .answer-tools {
            display: flex;
            gap: 8px;
        }

        .tool-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            color: white;
            padding: 6px 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
            white-space: nowrap;
        }

        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .answer-textarea {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 15px;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            min-height: 120px;
            width: 100%;
            color: #333;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .answer-textarea:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .textarea-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .char-count {
            font-weight: 500;
        }

        .auto-save-status {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .answer-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
            flex: 1;
            min-width: 0;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-color: #4CAF50;
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            border-color: #2196F3;
        }

        .action-btn.warning {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            border-color: #FF9800;
        }

        .action-btn.info {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
            border-color: #9C27B0;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* 학습 하단 섹션 */
        .learning-bottom {
            background: rgba(255, 255, 255, 0.05);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px 25px;
            flex-shrink: 0;
        }

        .hint-section, .answer-section, .memory-tip {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            color: white;
            display: none;
        }
        
        .hint-section.show, .answer-section.show, .memory-tip.show {
            display: block !important;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hint-content, .answer-content, .memory-content {
            font-size: 14px;
            line-height: 1.6;
        }

        .answer-label {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
        }

        .answer-text {
            color: rgba(255, 255, 255, 0.9);
        }

        /* 답안 비교 컨테이너 */
        .answer-comparison-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .comparison-title {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .comparison-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .score-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .score-display {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .score-label {
            color: white;
            font-size: 12px;
            font-weight: 500;
        }

        .score-feedback {
            flex: 1;
            color: white;
            font-size: 14px;
            line-height: 1.5;
        }

        .comparison-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .answer-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .panel-icon {
            font-size: 16px;
        }

        .panel-title {
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .panel-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            margin-left: auto;
        }

        .answer-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            line-height: 1.5;
        }

        .learning-tips {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .learning-tips h4 {
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .tips-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tip-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
        }

        .tip-icon {
            font-size: 14px;
        }

        .tip-text {
            flex: 1;
        }

        /* 키보드 단축키 안내 */
        .keyboard-shortcuts {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.3);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 10px 15px;
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: white;
            font-size: 12px;
        }

        .shortcut-item kbd {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: 600;
        }

        /* 개선된 도움말 스타일 */
        .help-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .help-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .help-section h5 {
            color: white;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .help-section li {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-section kbd {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: 600;
            color: white;
            min-width: 20px;
            text-align: center;
        }

        .writing-tips {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .writing-tips h5 {
            color: white;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .tip-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
        }

        .tip-icon {
            font-size: 14px;
        }

        .tip-text {
            flex: 1;
        }

        /* 모바일 반응형 도움말 */
        @media (max-width: 768px) {
            .help-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 카드 네비게이션 버튼 */
        .card-nav {
            position: absolute;
            z-index: 1001;
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 10px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .card-nav:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .card-nav-up {
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .card-nav-down {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .card-nav-left {
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .card-nav-right {
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: var(--transition-smooth);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .memory-card.next {
            transform: translateX(100%) rotateY(180deg);
            opacity: 0;
        }

        /* 깜박임 효과 (뇌새김 학습법) */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .blink-effect {
            animation: blink 1s ease-in-out 3;
        }

        /* 카드 내용 */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--light);
        }

        .card-category {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .card-importance {
            display: flex;
            gap: 5px;
        }

        .star {
            color: #fbbf24;
            font-size: 20px;
        }

        .card-question {
            font-size: 22px;
            font-weight: bold;
            color: var(--dark);
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .card-hint {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
        }

        .card-hint.show {
            display: block !important;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-answer {
            background: #f0f9ff;
            border-radius: 15px;
            padding: 25px;
            display: none;
            position: relative;
        }

        .card-answer.show {
            display: block !important;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .answer-content {
            font-size: 18px;
            line-height: 1.8;
            color: var(--dark);
        }

        /* 이미지 연상 효과 (뇌새김 학습법) */
        .image-association {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            min-height: 150px;
            background: var(--light);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .image-icon {
            font-size: 72px;
            opacity: 0;
            animation: imagePopIn 0.5s ease forwards;
        }

        @keyframes imagePopIn {
            0% {
                transform: scale(0) rotate(180deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(90deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* 암기 팁 */
        .memory-tip {
            background: linear-gradient(135deg, #fbbf24 0%, #fb923c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
            font-size: 18px;
            display: none;
        }

        .memory-tip.show {
            display: block !important;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* 카드 액션 버튼 */
        .card-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .action-btn.success {
            background: var(--success);
        }

        .action-btn.danger {
            background: var(--danger);
        }

        /* 진도 표시 */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .progress-bar {
            height: 20px;
            background: var(--light);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* 타이머 */
        .timer-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            font-size: 24px;
            font-weight: bold;
            color: var(--dark);
            z-index: 1000;
        }

        .timer-display.warning {
            background: var(--warning);
            color: white;
            animation: pulse 1s infinite;
        }

        /* 결과 모달 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            -webkit-backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            animation: modalSlideIn 0.5s ease;
            position: relative;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: bold;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .modal-body {
            margin-bottom: 30px;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-stat {
            text-align: center;
            padding: 20px;
            background: var(--light);
            border-radius: 15px;
        }

        .result-stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .result-stat-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--dark);
        }

        /* 반응형 디자인 */
        @media (max-width: 768px) {
            /* 기본 레이아웃 모바일 최적화 */
            .container {
                padding: 8px;
                margin: 0;
                overflow-x: hidden;
            }

            /* 헤더 모바일 최적화 */
            .header {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
                position: relative;
            }

            .logo {
                text-align: center;
                order: 1;
            }

            .logo-text {
                font-size: 16px;
                line-height: 1.2;
            }

            .logo-icon {
                font-size: 24px;
            }

            /* 통계 패널 모바일 최적화 */
            .stats-panel {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin: 15px 0;
            }

            .stat-card {
                padding: 12px;
                text-align: center;
            }

            .stat-label {
                font-size: 12px;
                margin-bottom: 5px;
            }

            .stat-value {
                font-size: 20px;
                font-weight: 700;
            }

            /* 모드 선택 모바일 최적화 */
            .mode-selector {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin: 15px 0;
            }

            .mode-btn {
                padding: 12px 8px;
                font-size: 12px;
                text-align: center;
                min-height: 60px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 5px;
            }

            .mode-btn .btn-icon {
                font-size: 20px;
            }

            .mode-btn .btn-text {
                font-size: 11px;
                line-height: 1.2;
            }

            /* 카드 모바일 최적화 */
            .card-question {
                font-size: 16px;
                padding: 15px;
                line-height: 1.4;
                margin: 10px 0;
            }

            .card-answer {
                font-size: 14px;
                padding: 15px;
                line-height: 1.4;
            }

            /* 답안 입력 모바일 최적화 */
            .answer-input-section {
                margin: 10px 0;
                padding: 15px;
            }

            .answer-textarea {
                min-height: 120px;
                font-size: 16px; /* iOS 줌 방지 */
                padding: 12px;
            }

            .answer-actions {
                flex-direction: column;
                gap: 10px;
            }

            .action-btn {
                padding: 15px 20px;
                font-size: 16px;
                width: 100%;
                min-height: 50px;
                touch-action: manipulation; /* 터치 지연 제거 */
                -webkit-tap-highlight-color: transparent; /* 터치 하이라이트 제거 */
            }
            
            /* 모바일 터치 최적화 */
            .btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            /* 모바일 네비게이션 버튼 */
            .nav-btn {
                min-height: 48px;
                min-width: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                touch-action: manipulation;
            }
            
            /* 모바일 텍스트 입력 최적화 */
            .answer-textarea {
                font-size: 16px; /* iOS 줌 방지 */
                padding: 12px;
                border-radius: 8px;
                touch-action: manipulation;
                -webkit-appearance: none; /* iOS 기본 스타일 제거 */
            }
            
            /* 모바일 스크롤 최적화 */
            .card-container {
                -webkit-overflow-scrolling: touch;
                overflow-y: auto;
            }
            
            /* 모바일 햄버거 메뉴 */
            .mobile-menu {
                display: block;
                position: fixed;
                top: 0;
                left: -100%;
                width: 80%;
                height: 100vh;
                background: rgba(0, 0, 0, 0.95);
                transition: left 0.3s ease;
                z-index: 1000;
                padding: 20px;
            }
            
            .mobile-menu.active {
                left: 0;
            }
            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 10px;
                left: 10px;
                z-index: 1001;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                border: none;
                padding: 10px;
                border-radius: 5px;
                font-size: 18px;
                touch-action: manipulation;
            }
            
            /* 모바일 카드 최적화 */
            .card {
                margin: 5px 0;
                padding: 15px;
                border-radius: 12px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                touch-action: manipulation;
            }
            
            /* 모바일 버튼 그룹 */
            .btn-group {
                display: flex;
                flex-direction: column;
                gap: 10px;
                margin: 10px 0;
            }
            
            .btn-group .btn {
                width: 100%;
                margin: 0;
            }
            
            /* 모바일 제스처 지원 */
            .swipe-container {
                touch-action: pan-x;
                overflow: hidden;
            }
            
            .swipe-card {
                transition: transform 0.3s ease;
            }
            
            .swipe-card.swipe-left {
                transform: translateX(-100%);
            }
            
            .swipe-card.swipe-right {
                transform: translateX(100%);
            }

            /* 답안 비교 모바일 최적화 */
            .comparison-panels {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .answer-panel {
                padding: 15px;
            }

            .panel-header {
                font-size: 14px;
                margin-bottom: 10px;
            }

            .answer-content {
                font-size: 14px;
                line-height: 1.4;
            }

            /* 결과 통계 모바일 최적화 */
            .result-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .result-stat-card {
                padding: 15px;
                margin: 5px;
            }

            .result-stat-value {
                font-size: 28px;
            }

            /* 터치 친화적 버튼 크기 */
            .btn, .action-btn, .mode-btn {
                min-height: 44px; /* iOS 터치 가이드라인 */
                min-width: 44px;
            }

            /* 스크롤 최적화 */
            .container {
                overflow-x: hidden;
            }

            /* 텍스트 크기 최적화 */
            body {
                font-size: 14px;
            }

            h1, h2, h3 {
                line-height: 1.3;
            }

            /* 메모리 카드 모바일 최적화 */
            .memory-card {
                padding: 20px;
                margin: 10px 5px;
            }

            /* 컨트롤 버튼 모바일 최적화 */
            .control-buttons {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }

            .btn {
                width: 100%;
                padding: 15px 20px;
                font-size: 16px;
                min-height: 50px;
            }

            /* 타이머 모바일 최적화 */
            .timer-display {
                top: auto;
                bottom: 20px;
                right: 20px;
                font-size: 18px;
                padding: 10px 20px;
                min-height: 44px;
                display: flex;
                align-items: center;
            }

            /* 모달 모바일 최적화 */
            .modal-content {
                padding: 20px;
                margin: 10px;
                max-height: 90vh;
                overflow-y: auto;
            }
        }

        /* 작은 모바일 화면 최적화 (480px 이하) */
        @media (max-width: 480px) {
            /* 기본 레이아웃 */
            .container {
                padding: 5px;
            }

            /* 헤더 초소형 모바일 최적화 */
            .header {
                padding: 10px;
                gap: 10px;
            }

            .logo-text {
                font-size: 14px;
            }

            .logo-icon {
                font-size: 20px;
            }

            /* 통계 패널 초소형 모바일 */
            .stats-panel {
                grid-template-columns: 1fr;
                gap: 8px;
                margin: 10px 0;
            }

            .stat-card {
                padding: 10px;
            }

            .stat-label {
                font-size: 11px;
            }

            .stat-value {
                font-size: 18px;
            }

            /* 모드 선택 초소형 모바일 */
            .mode-selector {
                grid-template-columns: 1fr;
                gap: 8px;
                margin: 10px 0;
            }

            .mode-btn {
                padding: 10px;
                min-height: 50px;
                font-size: 11px;
            }

            .mode-btn .btn-icon {
                font-size: 18px;
            }

            .mode-btn .btn-text {
                font-size: 10px;
            }

            /* 카드 초소형 모바일 */
            .card-question {
                font-size: 14px;
                padding: 12px;
                line-height: 1.3;
            }

            .card-answer {
                font-size: 12px;
                padding: 12px;
                line-height: 1.3;
            }

            /* 답안 입력 초소형 모바일 */
            .answer-input-section {
                margin: 8px 0;
                padding: 12px;
            }

            .answer-textarea {
                min-height: 100px;
                font-size: 16px;
                padding: 10px;
            }

            .answer-actions {
                gap: 8px;
            }

            .action-btn {
                padding: 12px 15px;
                font-size: 14px;
                min-height: 44px;
            }

            /* 답안 비교 초소형 모바일 */
            .comparison-panels {
                gap: 10px;
            }

            .answer-panel {
                padding: 12px;
            }

            .panel-header {
                font-size: 12px;
                margin-bottom: 8px;
            }

            .answer-content {
                font-size: 12px;
                line-height: 1.3;
            }

            /* 결과 통계 초소형 모바일 */
            .result-stats {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .result-stat-card {
                padding: 12px;
                margin: 3px;
            }

            .result-stat-value {
                font-size: 24px;
            }

            /* 버튼 초소형 모바일 */
            .btn, .action-btn, .mode-btn {
                min-height: 44px;
                min-width: 44px;
                font-size: 14px;
            }

            /* 타이머 초소형 모바일 */
            .timer-display {
                bottom: 15px;
                right: 15px;
                font-size: 16px;
                padding: 8px 15px;
                min-height: 40px;
            }

            /* 모달 초소형 모바일 */
            .modal-content {
                padding: 15px;
                margin: 5px;
                max-height: 95vh;
            }

            .modal-header {
                padding: 15px;
                font-size: 16px;
            }

            .modal-body {
                padding: 15px;
            }

            /* 텍스트 크기 초소형 모바일 */
            body {
                font-size: 13px;
            }

            h1, h2, h3 {
                line-height: 1.2;
            }

            /* 메모리 카드 초소형 모바일 */
            .memory-card {
                padding: 15px;
                margin: 8px 3px;
            }

            /* 네비게이션 초소형 모바일 */
            .navbar-btn {
                padding: 12px 15px;
                font-size: 14px;
                margin: 3px 0;
            }

            /* 터치 영역 최적화 */
            .navbar-toggle {
                padding: 10px;
                font-size: 16px;
            }
        }

        /* 로딩 애니메이션 */
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 50px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 답안 입력 섹션 - 대폭 개선된 UX */
        .answer-input-section {
            margin: 20px 0;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border-radius: 25px;
            -webkit-backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        .answer-input-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 50px rgba(0, 0, 0, 0.2);
        }
        
        /* 답안 헤더 */
        .answer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .answer-label {
            font-weight: 700;
            color: white;
            font-size: 20px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .answer-hint {
            font-size: 14px;
            opacity: 0.8;
            font-weight: 400;
        }
        
        .answer-tools {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        /* 답안 도움말 */
        .answer-help {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .help-content h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .help-content ul {
            list-style: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .help-content li {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .help-content kbd {
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .help-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin: 0;
        }
        
        /* 텍스트에어리어 컨테이너 */
        .textarea-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .textarea-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding: 0 5px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .char-count {
            font-weight: 500;
        }
        
        .auto-save-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .auto-save-status.saving {
            color: #ffa726;
        }
        
        .auto-save-status.saved {
            color: #4caf50;
        }
        
        /* 답안 작성 팁 */
        .answer-tips {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(139, 195, 74, 0.2));
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(76, 175, 80, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tips-content h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .tip-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .tip-icon {
            font-size: 18px;
        }
        
        .tip-text {
            color: white;
            font-size: 14px;
            font-weight: 500;
        }

        .answer-input-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .answer-label {
            font-weight: 700;
            color: white;
            font-size: 18px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .answer-textarea {
            width: 100%;
            min-height: 150px;
            max-height: 400px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark);
            font-size: 16px;
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.8;
            resize: vertical;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-y: auto;
            /* 기본 텍스트 입력 동작 보장 */
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
            /* IME 입력 지원 - 브라우저 기본 동작 사용 */
            /* 텍스트 방향 */
            direction: ltr;
            text-align: left;
        }

        .answer-textarea:focus {
            outline: none;
            border-color: var(--success);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
            background: rgba(255, 255, 255, 1);
        }

        .answer-textarea::placeholder {
            color: rgba(0, 0, 0, 0.5);
            font-style: italic;
        }

        /* 답변 입력란 자동 크기 조절 */
        .answer-textarea.auto-resize {
            height: auto;
            min-height: 150px;
            max-height: 400px;
        }

        /* 답안 비교 UI 스타일 - 대폭 개선 */
        .answer-comparison-container {
            display: none;
            margin: 20px 0;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border-radius: 25px;
            -webkit-backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .answer-comparison-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .comparison-title {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .comparison-subtitle {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 400;
        }
        
        .score-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .score-feedback {
            margin-top: 15px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .comparison-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .answer-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .answer-panel.user-answer {
            border-color: rgba(255, 193, 7, 0.5);
            background: linear-gradient(135deg, #fff9e6, #ffffff);
        }

        .answer-panel.correct-answer {
            border-color: rgba(34, 197, 94, 0.5);
            background: linear-gradient(135deg, #e8f5e8, #ffffff);
        }

        .panel-header {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .panel-icon {
            font-size: 18px;
        }
        
        .panel-title {
            font-size: 16px;
            font-weight: 700;
        }
        
        .panel-badge {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            margin-left: auto;
        }
        
        /* 학습 팁 섹션 */
        .learning-tips {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(30, 136, 229, 0.2));
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            border: 1px solid rgba(33, 150, 243, 0.3);
        }
        
        .learning-tips h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .learning-tips .tips-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .learning-tips .tip-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .learning-tips .tip-icon {
            font-size: 16px;
        }
        
        .learning-tips .tip-text {
            color: white;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* 인라인 스타일 대체 클래스 */
        .header-visible {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 1000 !important;
            background: white !important;
            border: 2px solid #4caf50 !important;
        }
        
        .navbar-menu-visible {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            flex: 1;
            position: relative !important;
            z-index: 9999 !important;
        }
        
        .navbar-toggle-hidden {
            display: none;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
        }
        
        /* 모바일 네비게이션 최적화 */
        .navbar-menu.collapsed {
            display: none !important;
        }
        
        .navbar-menu.expanded {
            display: flex !important;
            flex-direction: column;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border-radius: 0 0 20px 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            z-index: 10000;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 모바일 터치 최적화 */
        .mobile-optimized {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* 모바일 스크롤 최적화 */
        .mobile-scroll {
            -webkit-overflow-scrolling: touch;
        }
        
        /* 모바일 가상 키보드 대응 */
        .mobile-keyboard-adjust {
            transition: transform 0.3s ease;
        }
        
        .mobile-keyboard-adjust.keyboard-open {
            transform: translateY(-100px);
        }
        
        /* 모바일 성능 최적화 */
        .mobile-performance {
            will-change: transform;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
        
        /* 모바일 터치 피드백 */
        .mobile-touch-feedback {
            transition: all 0.1s ease;
        }
        
        .mobile-touch-feedback:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        /* 모바일 스와이프 힌트 */
        .mobile-swipe-hint {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
            animation: fadeInOut 3s ease-in-out;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }
        
        /* 모바일 뷰포트 최적화 */
        @media (max-width: 768px) {
            html {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
                text-size-adjust: 100%;
            }
            
            body {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            /* 모바일 스크롤바 숨기기 */
            ::-webkit-scrollbar {
                width: 0px;
                background: transparent;
            }
            
            /* 모바일 선택 방지 */
            .no-select {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
        }
        
        /* 인라인 스타일 대체 클래스들 */
        .nav-item-container {
            display: inline-block !important;
            margin: 5px !important;
        }
        
        .nav-link-button {
            display: inline-flex !important;
            align-items: center !important;
            gap: 8px !important;
            padding: 12px 20px !important;
            background: linear-gradient(135deg, #4caf50, #45a049) !important;
            color: white !important;
            text-decoration: none !important;
            border-radius: 12px !important;
            font-weight: 600 !important;
            font-size: 16px !important;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3) !important;
            transition: all 0.3s ease !important;
        }
        
        .nav-link-button:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4) !important;
        }
        
        .nav-link-button-secondary {
            display: inline-flex !important;
            align-items: center !important;
            gap: 8px !important;
            padding: 12px 20px !important;
            background: linear-gradient(135deg, #2196f3, #1976d2) !important;
            color: white !important;
            text-decoration: none !important;
            border-radius: 12px !important;
            font-weight: 600 !important;
            font-size: 16px !important;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3) !important;
            transition: all 0.3s ease !important;
        }
        
        .nav-link-button-secondary:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4) !important;
        }
        
        .nav-icon {
            font-size: 18px !important;
        }
        
        .immersive-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .immersive-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .hidden-element {
            display: none !important;
        }
        
        /* 상세 분석 모달 */
        .analysis-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            width: 90%;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid #e0e0e0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px 20px 0 0;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 20px;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: white;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 50%;
            transition: background 0.2s ease;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .analysis-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 1px solid #e9ecef;
        }
        
        .analysis-section h4 {
            margin: 0 0 20px 0;
            color: #333;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .keyword-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .stat-label {
            font-weight: 500;
            color: #666;
        }
        
        .stat-value {
            font-weight: 700;
            color: #333;
        }
        
        .keyword-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .matched-keywords, .missing-keywords {
            padding: 15px;
            border-radius: 10px;
        }
        
        .matched-keywords {
            background: #e8f5e8;
            border: 1px solid #4caf50;
        }
        
        .missing-keywords {
            background: #ffebee;
            border: 1px solid #f44336;
        }
        
        .matched-keywords h5, .missing-keywords h5 {
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }
        
        .keyword-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .keyword-tag {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .keyword-tag.matched {
            background: #4caf50;
            color: white;
        }
        
        .keyword-tag.missing {
            background: #f44336;
            color: white;
        }
        
        .similarity-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .similarity-score .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .comparison-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .detail-label {
            font-weight: 500;
            color: #666;
        }
        
        .detail-value {
            font-weight: 700;
            color: #333;
        }
        
        .suggestions-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .suggestion-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            border-left: 4px solid #ffa726;
        }
        
        .suggestion-icon {
            font-size: 16px;
        }
        
        .suggestion-text {
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 20px;
            }
            
            .keyword-list {
                grid-template-columns: 1fr;
            }
            
            .comparison-details {
                grid-template-columns: 1fr;
            }
        }

        .panel-header.user-answer {
            color: #f57c00;
        }

        .panel-header.correct-answer {
            color: #2e7d32;
        }

        .answer-content {
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .answer-content.user-answer {
            color: #d84315;
        }

        .answer-content.correct-answer {
            color: #1b5e20;
        }

        .comparison-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .comparison-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .comparison-btn.review-again {
            background: linear-gradient(135deg, #ffc107, #ff8f00);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }

        .comparison-btn.review-again:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.4);
        }

        .comparison-btn.understood {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .comparison-btn.understood:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        /* 점수 표시 */
        .score-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .score-circle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin: 0 auto 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .score-circle.excellent {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
        }

        .score-circle.good {
            background: linear-gradient(135deg, #8bc34a, #4caf50);
        }

        .score-circle.fair {
            background: linear-gradient(135deg, #ffc107, #ff8f00);
        }

        .score-circle.poor {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        .score-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
        }

        /* 16:9 고몰입 학습 시스템 */
        .immersive-learning-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: none;
            flex-direction: column;
            z-index: 9999;
            overflow: hidden;
        }

        .immersive-learning-container.active {
            display: flex;
            animation: immersiveFadeIn 0.8s ease;
        }

        @keyframes immersiveFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* 모바일 네비게이션 컨트롤 */
        .mobile-nav-controls {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            padding: 15px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            z-index: 1001;
        }

        .nav-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .nav-row:last-child {
            margin-bottom: 0;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        .nav-label {
            font-size: 10px;
            margin-top: 2px;
            font-weight: 500;
        }

        /* 답안 입력 섹션 스타일 */
        .immersive-answer-input-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .answer-input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .answer-label {
            font-size: 16px;
            font-weight: 600;
            color: white;
        }

        .answer-tools {
            display: flex;
            gap: 10px;
        }

        .tool-btn {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .immersive-answer-comparison-container {
            display: none;
            margin: 20px 0;
        }

        .immersive-answer-comparison-container.show {
            display: block;
        }

        .comparison-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .answer-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: white;
        }

        .score-badge {
            background: rgba(76, 175, 80, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .answer-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            word-wrap: break-word;
        }

        .answer-content.user-answer {
            color: #ffeb3b;
        }

        .answer-content.correct-answer {
            color: #4caf50;
        }

        /* 모바일 반응형 */
        @media (max-width: 768px) {
            .mobile-nav-controls {
                display: block;
            }
            
            .immersive-actions {
                display: none;
            }
            
            .comparison-panels {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .immersive-answer-input-section {
                margin: 15px 0;
                padding: 15px;
            }
        }

        /* 모바일 터치 최적화 개선 */
        @media (max-width: 768px) {
            /* 터치 영역 확대 */
            .nav-btn {
                min-height: 50px;
                min-width: 50px;
                padding: 12px;
                font-size: 18px;
            }
            
            .tool-btn {
                min-height: 44px;
                padding: 10px 15px;
                font-size: 14px;
            }
            
            /* 모바일 스크롤 개선 */
            .immersive-learning-container {
                -webkit-overflow-scrolling: touch;
            }
            
            /* 모바일 키보드 대응 */
            .answer-textarea {
                font-size: 16px; /* iOS 줌 방지 */
                padding: 15px;
                border-radius: 12px;
            }
            
            /* 모바일 성능 최적화 */
            .immersive-card {
                will-change: transform;
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
            }
            
            /* 모바일 터치 피드백 */
            .nav-btn:active {
                transform: scale(0.95);
                background: rgba(255, 255, 255, 0.4);
            }
            
            /* 모바일 가상 키보드 대응 */
            .immersive-main {
                transition: transform 0.3s ease;
            }
            
            .immersive-main.keyboard-open {
                transform: translateY(-50px);
            }
        }

        /* 초소형 모바일 최적화 */
        @media (max-width: 480px) {
            .mobile-nav-controls {
                bottom: 10px;
                padding: 10px;
            }
            
            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 16px;
            }
            
            .nav-label {
                font-size: 9px;
            }
            
            .immersive-answer-input-section {
                margin: 10px 0;
                padding: 10px;
            }
            
            .answer-textarea {
                min-height: 120px;
                font-size: 16px;
                padding: 12px;
            }
        }

        /* 초고해상도 모바일 최적화 */
        @media (max-width: 768px) and (min-resolution: 2dppx) {
            .immersive-learning-container {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            .nav-btn {
                border-width: 0.5px;
            }
        }

        /* 모바일 성능 최적화 */
        .mobile-optimized {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* 모바일 터치 피드백 */
        .mobile-touch-feedback {
            transition: transform 0.1s ease;
        }

        .mobile-touch-feedback:active {
            transform: scale(0.95);
        }

        /* 모바일 스크롤 최적화 */
        .mobile-scroll {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        /* 모바일 가상 키보드 대응 */
        .keyboard-open .immersive-main {
            transform: translateY(-50px);
        }

        /* 절전 모드 스타일 */
        .power-saving {
            animation-duration: 0.3s !important;
            transition-duration: 0.3s !important;
        }

        .power-saving * {
            animation-duration: 0.3s !important;
            transition-duration: 0.3s !important;
        }

        /* 저대역폭 모드 */
        .low-bandwidth {
            background-image: none !important;
            box-shadow: none !important;
        }

        .low-bandwidth * {
            background-image: none !important;
            box-shadow: none !important;
        }

        /* 모바일 접근성 개선 */
        @media (max-width: 768px) {
            /* 포커스 표시 개선 */
            .nav-btn:focus,
            .tool-btn:focus,
            .immersive-btn:focus {
                outline: 3px solid rgba(76, 175, 80, 0.8);
                outline-offset: 2px;
            }

            /* 터치 영역 확대 */
            .nav-btn::before,
            .tool-btn::before {
                content: '';
                position: absolute;
                top: -10px;
                left: -10px;
                right: -10px;
                bottom: -10px;
                z-index: -1;
            }

            /* 모바일 전용 애니메이션 */
            .mobile-optimized .nav-btn {
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            }

            /* 모바일 성능 최적화 */
            .immersive-card {
                contain: layout style paint;
                will-change: transform;
            }

            /* 모바일 메모리 최적화 */
            .mobile-optimized * {
                -webkit-backface-visibility: hidden;
                backface-visibility: hidden;
            }
        }

        /* 모바일 다크모드 대응 */
        @media (max-width: 768px) and (prefers-color-scheme: dark) {
            .immersive-learning-container {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            }
            
            .nav-btn {
                background: rgba(255, 255, 255, 0.1);
                border-color: rgba(255, 255, 255, 0.2);
            }
        }

        /* 모바일 고대비 모드 */
        @media (max-width: 768px) and (prefers-contrast: high) {
            .nav-btn {
                border-width: 2px;
                border-color: #000;
            }
            
            .answer-textarea {
                border-width: 2px;
                border-color: #000;
            }
        }

        /* 모바일 애니메이션 감소 모드 */
        @media (max-width: 768px) and (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .immersive-header {
            height: 80px;
            background: rgba(0, 0, 0, 0.2);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .immersive-progress {
            display: flex;
            align-items: center;
            gap: 20px;
            color: white;
        }

        .progress-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 0deg, var(--success) var(--progress-angle, 0deg), rgba(255, 255, 255, 0.2) var(--progress-angle, 0deg));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: white;
        }

        .immersive-stats {
            display: flex;
            gap: 30px;
            color: white;
            font-size: 14px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .immersive-main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            position: relative;
        }

        .immersive-card {
            width: 100%;
            max-width: 1200px;
            aspect-ratio: 16/9;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            -webkit-backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .card-question-section {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            position: relative;
        }

        .question-number {
            position: absolute;
            top: 20px;
            right: 30px;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .question-content {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            line-height: 1.4;
            text-align: center;
            margin-bottom: 30px;
        }

        .question-hint {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 16px;
            color: #856404;
            text-align: center;
            display: none;
        }

        .question-hint.show {
            display: block;
            animation: hintSlideIn 0.5s ease;
        }

        @keyframes hintSlideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-answer-section {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            padding: 30px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            display: none;
        }

        .card-answer-section.show {
            display: block;
            animation: answerSlideUp 0.6s ease;
        }

        @keyframes answerSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .answer-content {
            font-size: 20px;
            line-height: 1.6;
            color: var(--dark);
            text-align: center;
        }

        .immersive-actions {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 10;
        }

        .immersive-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .immersive-btn.primary {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
        }

        .immersive-btn.secondary {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
        }

        .immersive-btn.warning {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
        }

        .immersive-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .immersive-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .immersive-close:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* 학습 분석 대시보드 */
        .learning-analytics {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 15px;
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            min-width: 250px;
            display: none;
        }

        .analytics-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .analytics-value {
            font-weight: 700;
            color: var(--success);
        }

        /* 몰입도 향상 효과 */
        .focus-mode {
            filter: blur(5px);
            transition: filter 0.3s ease;
        }

        .focus-mode.active {
            filter: none;
        }

        .learning-streak {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 24px;
            font-weight: 700;
            display: none;
            animation: streakPulse 1s ease;
        }

        @keyframes streakPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }

        /* 모바일 반응형 */
        @media (max-width: 768px) {
            .comparison-panels {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .answer-panel {
                padding: 15px;
            }
            
            .panel-header {
                font-size: 14px;
            }
            
            .answer-content {
                font-size: 14px;
            }
            
            .comparison-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .comparison-btn {
                width: 100%;
                justify-content: center;
            }
            
            .score-circle {
                width: 60px;
                height: 60px;
                font-size: 20px;
            }

            .immersive-card {
                margin: 20px;
                aspect-ratio: 16/9;
            }

            .question-content {
                font-size: 20px;
            }

            .immersive-actions {
                flex-direction: column;
                width: 90%;
            }

            .immersive-btn {
                width: 100%;
                justify-content: center;
            }
        }

        .answer-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* 네비게이션 메뉴 스타일 */
        .navbar-menu {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .navbar-btn {
            display: flex !important;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            min-width: 140px;
            justify-content: center;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 1000 !important;
        }

        .navbar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .navbar-btn.primary {
            background: linear-gradient(135deg, #4caf50, #2e7d32, #1b5e20);
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .navbar-btn.primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .navbar-btn.primary:hover::before {
            left: 100%;
        }

        .navbar-btn.primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.4);
            background: linear-gradient(135deg, #66bb6a, #4caf50, #2e7d32);
        }

        .navbar-btn.primary:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* 링크 스타일 추가 */
        .navbar-btn.primary {
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .navbar-btn.primary.success {
            animation: successPulse 0.6s ease-out;
        }

        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background: linear-gradient(135deg, #66bb6a, #4caf50); }
            100% { transform: scale(1); }
        }

        .navbar-btn.primary.loading {
            position: relative;
            color: transparent;
        }

        .navbar-btn.primary.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .navbar-btn.secondary {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
        }

        .navbar-btn.warning {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
        }

        .navbar-btn.info {
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
            color: white;
        }

        .btn-icon {
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .navbar-btn.primary .btn-icon {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .navbar-btn.primary:hover .btn-icon {
            animation: none;
            transform: scale(1.2) rotate(10deg);
        }

        .btn-text {
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        /* 시험 정보 섹션 */
        .exam-info-section {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .exam-info {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .countdown {
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
        }

        .navbar-btn.primary .btn-text {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .navbar-btn.primary:hover .btn-text {
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
            transform: translateX(2px);
        }

        /* 모바일 반응형 */
        @media (max-width: 768px) {
            .navbar-toggle {
                display: block !important;
                position: absolute;
                top: 20px;
                right: 20px;
                z-index: 10001;
            }

            .navbar-menu {
                flex-direction: column;
                width: 100%;
                gap: 10px;
                position: absolute;
                top: 100%;
                left: 0;
                background: white;
                border-radius: 0 0 20px 20px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                padding: 20px;
                z-index: 10000;
            }

            .navbar-menu.hidden {
                display: none !important;
            }

            .navbar-btn {
                width: 100%;
                min-width: auto;
                padding: 15px 20px;
                font-size: 16px;
                margin: 5px 0;
            }

            .navbar-btn.primary {
                box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
            }

            .navbar-btn.primary:hover {
                transform: translateY(-2px) scale(1.02);
            }

            .header {
                flex-direction: column;
                text-align: center;
                padding: 20px;
                position: relative;
            }

            .btn-text {
                font-size: 14px;
            }

            .btn-icon {
                font-size: 18px;
            }
        }

        /* 태블릿 반응형 */
        @media (max-width: 1024px) and (min-width: 769px) {
            .navbar-menu {
                gap: 12px;
            }

            .navbar-btn {
                min-width: 120px;
                padding: 10px 16px;
            }
        }

        .action-btn.primary {
            background: var(--success);
            color: white;
            font-weight: 600;
        }

        .action-btn.primary:hover {
            background: #16a34a;
            transform: translateY(-2px);
        }

        /* 채점 섹션 */
        .grading-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .grading-result {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .score-display {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
        }

        .score-display.high {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success);
            border: 2px solid var(--success);
        }

        .score-display.medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
            border: 2px solid var(--warning);
        }

        .score-display.low {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 2px solid var(--danger);
        }

        .feedback-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            color: var(--dark);
        }

        .feedback-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .feedback-content {
            line-height: 1.6;
        }

        .grading-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* 16:9 가로형 풀스크린 슬라이드 시스템 - 학습 효과 극대화 */
        .slide-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            z-index: 1000;
            display: none;
            overflow: hidden;
            /* 16:9 비율 강제 적용 */
            aspect-ratio: 16/9;
            max-height: 100vh;
            max-width: 100vw;
        }

        .slide-container.active {
            display: block;
            animation: slideIn 0.5s ease-out;
            /* 풀스크린 몰입형 경험 */
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .slide-viewport {
            position: relative;
            width: 100%;
            height: 100%;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .slide-card {
            position: absolute;
            top: 50%;
            left: 50%;
            width: min(90vw, 1600px);
            height: min(56.25vw, 900px);
            max-height: 80vh;
            transform: translate(-50%, -50%) rotateX(var(--card-3d-rotate)) scale(var(--card-scale));
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            transition: var(--transition-smooth);
            overflow: hidden;
        }

        .slide-card.flip {
            transform: translate(-50%, -50%) rotateY(180deg) scale(var(--card-scale));
        }

        .slide-card.speed-mode {
            animation: speedPulse 0.3s infinite alternate;
        }

        .slide-card.flash-mode {
            animation: flashBlink 0.5s infinite;
        }

        .slide-card.test-mode {
            border: 3px solid var(--warning);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
        }

        .slide-card.weak-mode {
            border: 3px solid var(--danger);
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes speedPulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1.02); }
        }

        @keyframes flashBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        /* 슬라이드 네비게이션 */
        .slide-nav {
            position: absolute;
            z-index: 1001;
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 10px;
            transition: var(--transition-smooth);
        }

        .slide-nav:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .nav-up { top: 20px; left: 50%; transform: translateX(-50%); }
        .nav-down { bottom: 20px; left: 50%; transform: translateX(-50%); }
        .nav-left { left: 20px; top: 50%; transform: translateY(-50%); }
        .nav-right { right: 20px; top: 50%; transform: translateY(-50%); }

        .nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px;
            min-height: 50px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.2);
        }

        /* 슬라이드 컨텐츠 */
        .slide-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 40px;
            color: white;
        }

        .slide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .slide-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .slide-progress {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .progress-bar {
            width: 200px;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #3b82f6);
            transition: width 0.3s ease;
        }

        .slide-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .slide-question {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 40px;
            line-height: 1.4;
            max-width: 80%;
        }

        .slide-answer {
            font-size: 1.5rem;
            line-height: 1.6;
            max-width: 90%;
            opacity: 0;
            transform: translateY(30px);
            transition: var(--transition-smooth);
        }

        .slide-answer.show {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-actions {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }

        .slide-btn {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            min-width: 120px;
        }

        .slide-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .slide-btn.primary {
            background: linear-gradient(45deg, #22c55e, #16a34a);
        }

        .slide-btn.danger {
            background: linear-gradient(45deg, #ef4444, #dc2626);
        }

        .slide-btn.warning {
            background: linear-gradient(45deg, #f59e0b, #d97706);
        }

        /* 모드별 특수 효과 */
        .speed-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            animation: speedPulse 0.5s infinite alternate;
        }

        .flash-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            animation: flashBlink 0.3s infinite;
        }

        .test-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
        }

        .weak-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ef4444, #dc2626);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
        }

        /* 모드 인디케이터 기본 숨김 */
        #mode-indicator {
            display: none;
        }

        /* 진행률 바 기본 스타일 */
        .progress-fill {
            width: 10%;
        }

        /* 닫기 버튼 */
        .slide-close {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: var(--transition-smooth);
            z-index: 1002;
        }

        .slide-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        /* 스페셜 이펙트 */
        .confetti {
            position: fixed;
            top: -10px;
            width: 10px;
            height: 10px;
            background: var(--warning);
            animation: confetti-fall 3s linear;
            z-index: 3000;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <div class="header header-visible">
        <!-- 로고 섹션 -->
        <div class="logo">
            <div class="logo-icon">🏆</div>
            <div class="logo-text">SafetyMaster Pro V2.0</div>
        </div>
        
        <!-- 네비게이션 메뉴 -->
        <div class="navbar-menu navbar-menu-visible">
            <!-- 네비바 토글 버튼 (모바일용) -->
            <button class="navbar-toggle navbar-toggle-hidden" onclick="toggleNavbar()">
                ☰
            </button>
            <!-- 산업기사암기노트 버튼 - 최우선 표시 -->
            <div class="nav-item-container">
                <a href="industrial_memorization.html" class="nav-link-button">
                    <span class="nav-icon">🎯</span>
                    <span>산업기사암기노트</span>
                </a>
            </div>
            <button class="navbar-btn secondary" onclick="startSlideMode('speed')" title="스피드 모드">
                <span class="btn-icon">⚡</span>
                <span class="btn-text">스피드 모드</span>
            </button>
            <button class="navbar-btn warning" onclick="startSlideMode('weak')" title="취약문제 복습">
                <span class="btn-icon">🔄</span>
                <span class="btn-text">취약문제</span>
            </button>
            <button class="navbar-btn info" onclick="startSlideMode('test')" title="테스트 모드">
                <span class="btn-icon">📝</span>
                <span class="btn-text">테스트</span>
            </button>
            <!-- 산업안전기사 버튼 추가 -->
            <div class="nav-item-container">
                <a href="251003_OPUSSPEEDNOTE.html" class="nav-link-button-secondary">
                    <span class="nav-icon">🛡️</span>
                    <span>산업안전기사</span>
                </a>
            </div>
        </div>
        
        <!-- 시험 정보 -->
        <div class="exam-info-section">
            <div class="exam-info">산업안전기사 2차 시험</div>
            <div class="countdown">D-30</div>
        </div>
    </div>

    <div class="container">
        <!-- 학습 통계 패널 -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-label">🎯 전체 문제</div>
                <div class="stat-value" id="total-cards">289</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">✅ 암기 완료</div>
                <div class="stat-value" id="memorized-cards">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">📚 남은 문제</div>
                <div class="stat-value" id="remaining-cards">80</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">🔥 연속 학습</div>
                <div class="stat-value" id="streak-days">0일</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">⚡ 정답률</div>
                <div class="stat-value" id="accuracy-rate">0%</div>
            </div>
        </div>

        <!-- 진도 표시 -->
        <div class="progress-container">
            <div class="progress-header">
                <span>학습 진도</span>
                <span id="progress-text">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- 컨트롤 패널 -->
        <div class="control-panel">
            <!-- 학습 모드 선택 -->
            <div class="mode-selector">
                <div class="mode-btn active" data-mode="all">
                    <div class="mode-icon">📚</div>
                    <div class="mode-label">전체 학습</div>
                </div>
                <div class="mode-btn" data-mode="law">
                    <div class="mode-icon">⚖️</div>
                    <div class="mode-label">법령</div>
                </div>
                <div class="mode-btn" data-mode="calculation">
                    <div class="mode-icon">🧮</div>
                    <div class="mode-label">계산</div>
                </div>
                <div class="mode-btn" data-mode="numbers">
                    <div class="mode-icon">🔢</div>
                    <div class="mode-label">수치</div>
                </div>
                <div class="mode-btn" data-mode="crane">
                    <div class="mode-icon">🏗️</div>
                    <div class="mode-label">크레인</div>
                </div>
                <div class="mode-btn" data-mode="scaffold">
                    <div class="mode-icon">🪜</div>
                    <div class="mode-label">비계</div>
                </div>
                <div class="mode-btn" data-mode="weak">
                    <div class="mode-icon">💪</div>
                    <div class="mode-label">취약문제</div>
                </div>
                <div class="mode-btn" data-mode="confined">
                    <div class="mode-icon">⚠️</div>
                    <div class="mode-label">밀폐공간</div>
                </div>
                <div class="mode-btn" data-mode="random">
                    <div class="mode-icon">🎲</div>
                    <div class="mode-label">랜덤</div>
                </div>
            </div>

            <!-- 컨트롤 버튼 -->
            <div class="control-buttons">
                <button class="btn btn-primary" id="start-learning-btn">
                    <span>🚀 학습 시작</span>
                </button>
                <button class="btn btn-success" id="speed-mode-btn">
                    <span>⚡ 스피드 모드</span>
                </button>
                <button class="btn btn-warning" id="blink-mode-btn">
                    <span>👁️ 깜박이 모드</span>
                </button>
                <button class="btn btn-info" id="test-mode-btn">
                    <span>📝 테스트 모드</span>
                </button>
                <button class="btn btn-primary" id="review-weak-btn">
                    <span>🔄 취약문제 복습</span>
                </button>
                <button class="btn btn-success" id="immersive-learning-btn" onclick="startImmersiveLearning()">
                    <span>🎯 고몰입 학습</span>
                </button>
            </div>
        </div>

        <!-- 메인 카드 영역 -->
        <div class="card-container" id="card-container">
            <!-- 카드가 동적으로 생성됩니다 -->
            
            <!-- 화살표 네비게이션 버튼 -->
            <div class="card-nav card-nav-up" onclick="navigateCard('up')" title="정답 보기 (↑)">
                <button class="nav-btn">↑</button>
            </div>
            <div class="card-nav card-nav-down" onclick="navigateCard('down')" title="정답 보기 (↓)">
                <button class="nav-btn">↓</button>
            </div>
            <div class="card-nav card-nav-left" onclick="navigateCard('left')">
                <button class="nav-btn">←</button>
            </div>
            <div class="card-nav card-nav-right" onclick="navigateCard('right')">
                <button class="nav-btn">→</button>
            </div>
        </div>
    </div>

    <!-- 타이머 디스플레이 -->
    <div class="timer-display" id="timer">
        00:00
    </div>

    <!-- 결과 모달 -->
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">학습 결과</div>
            </div>
            <div class="modal-body">
                <div class="result-stats">
                    <div class="result-stat">
                        <div class="result-stat-label">학습한 문제</div>
                        <div class="result-stat-value" id="studied-count">0</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-label">정답률</div>
                        <div class="result-stat-value" id="correct-rate">0%</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-label">소요 시간</div>
                        <div class="result-stat-value" id="time-spent">00:00</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-label">획득 포인트</div>
                        <div class="result-stat-value" id="points-earned">0</div>
                    </div>
                </div>
                <div class="text-center">
                    <button class="btn btn-primary" onclick="closeModal()">계속 학습하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 16:9 고몰입 학습 시스템 -->
    <div class="immersive-learning-container" id="immersive-learning-container">
        <button class="immersive-close" onclick="closeImmersiveLearning()">✕</button>
        
        <!-- 학습 분석 대시보드 -->
        <div class="learning-analytics" id="learning-analytics">
            <div class="analytics-item">
                <span>학습 시간</span>
                <span class="analytics-value" id="learning-time">0분</span>
            </div>
            <div class="analytics-item">
                <span>정답률</span>
                <span class="analytics-value" id="accuracy-rate">0%</span>
            </div>
            <div class="analytics-item">
                <span>연속 정답</span>
                <span class="analytics-value" id="streak-count">0</span>
            </div>
            <div class="analytics-item">
                <span>학습 속도</span>
                <span class="analytics-value" id="learning-speed">보통</span>
            </div>
        </div>

        <!-- 헤더 -->
        <div class="immersive-header">
            <div class="immersive-progress">
                <div class="progress-circle" id="progress-circle">
                    <span id="progress-text">0%</span>
                </div>
                <div>
                    <div class="immersive-title">고몰입 학습 모드</div>
                    <div class="immersive-subtitle">16:9 최적화 카드 학습</div>
                </div>
            </div>
            
            <div class="immersive-stats">
                <div class="stat-item">
                    <span>🔥</span>
                    <span id="current-streak">0</span>
                </div>
                <div class="stat-item">
                    <span>⚡</span>
                    <span id="focus-level">높음</span>
                </div>
                <div class="stat-item">
                    <span>📊</span>
                    <span id="efficiency">85%</span>
                </div>
            </div>
        </div>

        <!-- 메인 학습 영역 -->
        <div class="immersive-main">
            <div class="immersive-card" id="immersive-card">
                <!-- 문제 섹션 -->
                <div class="card-question-section" id="card-question-section">
                    <div class="question-number" id="question-number">1 / 50</div>
                    <div class="question-content" id="immersive-question">
                        문제가 여기에 표시됩니다.
                    </div>
                    <div class="question-hint" id="immersive-hint">
                        힌트가 여기에 표시됩니다.
                    </div>
                </div>

                <!-- 답안 입력 섹션 -->
                <div class="immersive-answer-input-section" id="immersive-answer-input-section">
                    <div class="answer-input-header">
                        <span class="answer-label">📝 답안 작성</span>
                        <div class="answer-tools">
                            <button class="tool-btn" onclick="clearImmersiveAnswer()" title="답안 지우기">
                                🗑️ 지우기
                            </button>
                            <button class="tool-btn" onclick="toggleImmersiveAnswerHelp()" title="입력 도움말">
                                ❓ 도움말
                            </button>
                        </div>
                    </div>
                    
                    <div class="answer-help hidden-element" id="immersive-answer-help">
                        <div class="help-content">
                            <h4>💡 답안 작성 도움말</h4>
                            <div class="help-grid">
                                <div class="help-section">
                                    <h5>⌨️ 키보드 단축키</h5>
                                    <ul>
                                        <li><kbd>Enter</kbd>: 답안 제출</li>
                                        <li><kbd>Shift + Enter</kbd>: 줄바꿈</li>
                                        <li><kbd>←→</kbd>: 문제 이동</li>
                                        <li><kbd>↑↓</kbd>: 정답/힌트 확인</li>
                                    </ul>
                                </div>
                                <div class="help-section">
                                    <h5>🎤 음성 입력</h5>
                                    <ul>
                                        <li><kbd>V</kbd>: 음성 답변 시작</li>
                                        <li><kbd>Escape</kbd>: 음성 입력 중지</li>
                                        <li>자동 평가 및 점수 계산</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="textarea-container">
                        <textarea id="immersive-user-answer" class="answer-textarea" 
                            placeholder="여기에 답안을 작성하거나 음성으로 답변하세요...&#10;&#10;💡 작성 팁:&#10;• 키워드를 중심으로 작성&#10;• 구체적인 내용 포함&#10;• Enter: 제출, Shift+Enter: 줄바꿈&#10;• V키: 음성 답변 시작" 
                            onkeydown="handleImmersiveAnswerKeydown(event)"
                            oninput="handleImmersiveAnswerInput(event)"
                            onfocus="showImmersiveAnswerTips()"
                            onblur="hideImmersiveAnswerTips()"
                            rows="4"></textarea>
                    </div>

                    <div class="answer-tips hidden-element" id="immersive-answer-tips">
                        <div class="tip-content">
                            <h5>💡 답안 작성 팁</h5>
                            <ul>
                                <li>키워드를 중심으로 간결하게 작성하세요</li>
                                <li>구체적인 내용과 예시를 포함하세요</li>
                                <li>Enter키로 제출, Shift+Enter로 줄바꿈</li>
                                <li>V키를 눌러 음성으로 답변할 수 있습니다</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 정답 섹션 -->
                <div class="card-answer-section" id="card-answer-section">
                    <div class="answer-content" id="immersive-answer">
                        정답이 여기에 표시됩니다.
                    </div>
                </div>

                <!-- 답안 비교 섹션 -->
                <div class="immersive-answer-comparison-container" id="immersive-answer-comparison-container">
                    <div class="comparison-panels">
                        <div class="answer-panel user-answer">
                            <div class="panel-header user-answer">
                                <span>📝 내 답안</span>
                                <span class="score-badge" id="immersive-user-score">0점</span>
                            </div>
                            <div class="answer-content user-answer" id="immersive-user-answer-display">
                                사용자 답안이 여기에 표시됩니다.
                            </div>
                        </div>
                        <div class="answer-panel correct-answer">
                            <div class="panel-header correct-answer">
                                <span>✅ 정답</span>
                            </div>
                            <div class="answer-content correct-answer" id="immersive-correct-answer-display">
                                정답이 여기에 표시됩니다.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 액션 버튼들 -->
            <div class="immersive-actions" id="immersive-actions">
                <button class="immersive-btn primary" onclick="showImmersiveAnswer()" id="show-answer-btn">
                    <span>💡</span> 정답 보기
                </button>
                <button class="immersive-btn secondary" onclick="showImmersiveHint()" id="show-hint-btn">
                    <span>🔍</span> 힌트 보기
                </button>
                <button class="immersive-btn warning" onclick="markImmersiveWeak()" id="mark-weak-btn">
                    <span>❌</span> 취약문제
                </button>
                <button class="immersive-btn primary hidden-element" onclick="markImmersiveMemorized()" id="mark-memorized-btn">
                    <span>✅</span> 암기완료
                </button>
                <button class="immersive-btn secondary hidden-element" onclick="nextImmersiveCard()" id="next-card-btn">
                    <span>➡️</span> 다음 문제
                </button>
            </div>

            <!-- 모바일 네비게이션 버튼 -->
            <div class="mobile-nav-controls" id="mobile-nav-controls">
                <div class="nav-row">
                    <button class="nav-btn hint-btn" onclick="showImmersiveHint()" title="힌트 보기">
                        <span>🔍</span>
                        <span class="nav-label">힌트</span>
                    </button>
                    <button class="nav-btn answer-btn" onclick="showImmersiveAnswer()" title="정답 보기">
                        <span>💡</span>
                        <span class="nav-label">정답</span>
                    </button>
                </div>
                <div class="nav-row">
                    <button class="nav-btn prev-btn" onclick="previousImmersiveCard()" title="이전 문제">
                        <span>⬅️</span>
                        <span class="nav-label">이전</span>
                    </button>
                    <button class="nav-btn next-btn" onclick="nextImmersiveCard()" title="다음 문제">
                        <span>➡️</span>
                        <span class="nav-label">다음</span>
                    </button>
                </div>
                <div class="nav-row">
                    <button class="nav-btn voice-btn" onclick="startImmersiveVoiceInput()" title="음성 답변">
                        <span>🎤</span>
                        <span class="nav-label">음성</span>
                    </button>
                    <button class="nav-btn submit-btn" onclick="submitImmersiveAnswer()" title="답안 제출">
                        <span>📤</span>
                        <span class="nav-label">제출</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 학습 연속성 표시 -->
        <div class="learning-streak" id="learning-streak">
            🔥 연속 학습 중! 🔥
        </div>
    </div>

    <!-- 16:9 가로형 슬라이드 시스템 -->
    <div class="slide-container" id="slide-container">
        <button class="slide-close" onclick="closeSlide()">✕</button>
        
        <!-- 네비게이션 화살표 -->
        <div class="slide-nav nav-up">
            <button class="nav-btn" onclick="navigateSlide('up')" title="정답 보기 (↑)">↑</button>
        </div>
        <div class="slide-nav nav-down">
            <button class="nav-btn" onclick="navigateSlide('down')" title="정답 보기 (↓)">↓</button>
        </div>
        <div class="slide-nav nav-left">
            <button class="nav-btn" onclick="navigateSlide('left')">←</button>
        </div>
        <div class="slide-nav nav-right">
            <button class="nav-btn" onclick="navigateSlide('right')">→</button>
        </div>

        <!-- 슬라이드 뷰포트 -->
        <div class="slide-viewport">
            <div class="slide-card" id="slide-card">
                <!-- 모드 인디케이터 -->
                <div class="speed-indicator" id="mode-indicator">
                    ⚡ 스피드 모드
                </div>
                
                <!-- 슬라이드 컨텐츠 -->
                <div class="slide-content">
                    <div class="slide-header">
                        <div class="slide-title" id="slide-title">학습 모드</div>
                        <div class="slide-progress">
                            <span id="slide-progress-text">1 / 10</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="slide-body">
                        <div class="slide-question" id="slide-question">
                            문제가 여기에 표시됩니다.
                        </div>
                        <div class="slide-answer" id="slide-answer">
                            정답이 여기에 표시됩니다.
                        </div>
                    </div>
                    
                    <div class="slide-actions">
                        <button class="slide-btn primary" onclick="flipSlide()" id="flip-btn">정답 보기</button>
                        <button class="slide-btn" onclick="showSlideHint()" id="hint-btn">💡 힌트</button>
                        <button class="slide-btn danger" onclick="markWeak()" id="weak-btn">취약문제</button>
                        <button class="slide-btn warning" onclick="markMemorized()" id="memorized-btn">암기완료</button>
                        <button class="slide-btn" onclick="nextSlide()" id="next-btn">다음 문제</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Safety Master 채점 시스템 (인라인)
        window.SafetyScoring = {
            // 텍스트 정규화
            normalizeText: function(text) {
                return text.toLowerCase().replace(/[•\n\r]/g, ' ').replace(/\s+/g, ' ').trim();
            },
            
            // 키워드 추출
            extractKeywords: function(text) {
                return text.split(/[\s,，、]+/)
                    .filter(word => word.length > 1)
                    .map(word => word.replace(/[^\w가-힣]/g, ''))
                    .filter(word => word.length > 0);
            },
            
            // 키워드 매칭 점수
            calculateKeywordScore: function(userKeywords, correctKeywords) {
                const matched = [];
                const missing = [];
                
                for (const correctKeyword of correctKeywords) {
                    const isMatched = userKeywords.some(userKeyword => 
                        userKeyword.includes(correctKeyword) || correctKeyword.includes(userKeyword)
                    );
                    
                    if (isMatched) {
                        matched.push(correctKeyword);
                    } else {
                        missing.push(correctKeyword);
                    }
                }
                
                const score = correctKeywords.length > 0 
                    ? Math.round((matched.length / correctKeywords.length) * 100)
                    : 0;
                    
                return { matched, missing, score };
            },
            
            // 레벤슈타인 거리
            levenshteinDistance: function(str1, str2) {
                const matrix = Array(str2.length + 1).fill(null).map(() => Array(str1.length + 1).fill(null));
                
                for (let i = 0; i <= str1.length; i++) {
                    matrix[0][i] = i;
                }
                
                for (let j = 0; j <= str2.length; j++) {
                    matrix[j][0] = j;
                }
                
                for (let i = 1; i <= str2.length; i++) {
                    for (let j = 1; j <= str1.length; j++) {
                        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                            matrix[i][j] = matrix[i - 1][j - 1];
                        } else {
                            matrix[i][j] = Math.min(
                                matrix[i - 1][j - 1] + 1,
                                matrix[i][j - 1] + 1,
                                matrix[i - 1][j] + 1
                            );
                        }
                    }
                }
                
                return matrix[str2.length][str1.length];
            },
            
            // 문자열 유사도
            calculateSimilarity: function(str1, str2) {
                const distance = this.levenshteinDistance(str1, str2);
                const maxLength = Math.max(str1.length, str2.length);
                return maxLength === 0 ? 1 : 1 - (distance / maxLength);
            },
            
            // 점수 밴드
            getScoreBand: function(score) {
                if (score >= 80) return 'excellent';
                if (score >= 60) return 'good';
                if (score >= 40) return 'fair';
                return 'poor';
            },
            
            // 피드백 생성
            generateFeedback: function(score, matchedKeywords, missingKeywords) {
                const scoreBand = this.getScoreBand(score);
                
                switch (scoreBand) {
                    case 'excellent':
                        return '완벽합니다! 모든 핵심 내용을 정확히 파악하셨습니다.';
                    case 'good':
                        return '잘했습니다! 대부분의 내용을 이해하고 계십니다.';
                    case 'fair':
                        return '좋은 시작입니다. 몇 가지 핵심 내용을 더 학습해보세요.';
                    case 'poor':
                        return '다시 한번 학습해보세요. 핵심 키워드를 중심으로 정리해보시면 도움이 될 것입니다.';
                }
            },
            
            // 메인 채점 함수
            gradeAnswer: function(userAnswer, card) {
                const normalizedUserAnswer = this.normalizeText(userAnswer);
                const normalizedCorrectAnswer = this.normalizeText(card.answer);
                
                const userKeywords = this.extractKeywords(normalizedUserAnswer);
                const correctKeywords = this.extractKeywords(normalizedCorrectAnswer);
                
                const keywordResult = this.calculateKeywordScore(userKeywords, correctKeywords);
                const similarity = this.calculateSimilarity(normalizedUserAnswer, normalizedCorrectAnswer);
                
                const finalScore = Math.round(
                    (keywordResult.score * 0.7) + (similarity * 100 * 0.3)
                );
                
                const scoreBand = this.getScoreBand(finalScore);
                const feedback = this.generateFeedback(finalScore, keywordResult.matched, keywordResult.missing);
                
                return {
                    score: Math.min(100, Math.max(0, finalScore)),
                    scoreBand,
                    matchedKeywords: keywordResult.matched,
                    missingKeywords: keywordResult.missing,
                    feedback,
                    similarity: Math.round(similarity * 100)
                };
            },
            
            // 취약문제 판정
            isWeakProblem: function(score) {
                return score < 50;
            },
            
            // 학습 완료 판정
            isMastered: function(score) {
                return score >= 80;
            }
        };

        // 전체 문제 데이터베이스 (289개 - 스피드암기노트 1,2,3권 + 작업형 통합본)
        const cardDatabase = [
            {
                id: 1,
                category: "필답형-보호구",
                importance: 3,
                question: "특급 방진마스크를 사용해야 하는 장소 2곳은?",
                hint: "필답형-보호구",
                answer: "① 베릴륨 등 독성이 강한 물질을 함유한 분진이 발생하는 장소\n② 석면 취급 또는 해체·제거 작업장소\n\n💡 암기팁: 방진마스크 특급은 **베석**",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 2,
                category: "필답형-보호구",
                importance: 3,
                question: "방진마스크의 성능 시험 기준 5가지는?",
                hint: "흡배누포시",
                answer: "① 안면부 흡기저항\n② 안면부 배기저항\n③ 안면부 누설률\n④ 여과재 분진 등 포집효율\n⑤ 시야\n\n💡 암기팁: **흡배누포시**",
                mnemonic: "흡배누포시",
                image: "😷"
            },
            {
                id: 3,
                category: "필답형-보호구",
                importance: 3,
                question: "분리식 방진마스크의 등급별 여과재 포집효율 기준은?",
                hint: "필답형-보호구",
                answer: "• 특급: 99.95% 이상\n• 1급: 94.0% 이상\n• 2급: 80.0% 이상\n\n(염화나트륨 및 파라핀 오일 시험 기준)",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 4,
                category: "필답형-보호구",
                importance: 3,
                question: "보안경을 사용 구분에 따라 3가지로 분류하고 설명하시오.",
                hint: "필답형-보호구",
                answer: "① 유리보안경: 비산물로부터 눈 보호 (렌즈: 유리)\n② 플라스틱보안경: 비산물로부터 눈 보호 (렌즈: 플라스틱)\n③ 도수렌즈보안경: 비산물로부터 눈 보호 (렌즈: 도수)\n\n💡 암기팁: 보안경은 **유플도**",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 5,
                category: "필답형-보호구",
                importance: 3,
                question: "차광보안경의 종류 4가지는?",
                hint: "자적복용",
                answer: "① 자외선용\n② 적외선용\n③ 복합용\n④ 용접용\n\n💡 암기팁: **자적복용**",
                mnemonic: "자적복용",
                image: "😷"
            },
            {
                id: 6,
                category: "필답형-보호구",
                importance: 3,
                question: "안전모의 성능시험 기준항목 5가지는?",
                hint: "필답형-보호구",
                answer: "① 내관통성 시험\n② 충격흡수성 시험\n③ 내전압성 시험\n④ 내수성 시험\n⑤ 난연성 시험\n\n💡 암기팁: 안전모 성능은 **내충내내난**",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 7,
                category: "필답형-보호구",
                importance: 3,
                question: "안전모의 내관통성 시험 성능기준은? (관통거리)",
                hint: "필답형-보호구",
                answer: "• AE형 및 ABE형: 9.5mm 이하\n• A형 및 AB형: 11.1mm 이하",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 8,
                category: "필답형-보호구",
                importance: 3,
                question: "방독마스크 정화통의 외부 측면 색깔을 쓰시오.\n(유기화합물, 할로겐, 황화수소, 시안화수소, 아황산)",
                hint: "유아할황시",
                answer: "① 유기화합물용 - 갈색\n② 할로겐용 - 회색\n③ 황화수소용 - 회색\n④ 시안화수소용 - 회색\n⑤ 아황산용 - 황색\n\n💡 암기팁: **유아할황시** (갈/황/회/회/회)",
                mnemonic: "유아할황시",
                image: "😷"
            },
            {
                id: 9,
                category: "필답형-보호구",
                importance: 3,
                question: "방독마스크 사용 조건 3가지는? (산소농도, 고농도, 중농도)",
                hint: "필답형-보호구",
                answer: "• 산소농도: 18% 이상인 장소\n• 고농도: 가스 농도 2% (100분의 2) 이하\n• 중농도: 가스 농도 1% (100분의 1) 이하",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 10,
                category: "필답형-보호구",
                importance: 3,
                question: "내전압용 절연장갑의 등급별 최대사용전압(교류)은?",
                hint: "필답형-보호구",
                answer: "• 00급: 500V\n• 0급: 1,000V\n• 1급: 7,500V\n• 2급: 17,000V\n• 3급: 26,500V\n• 4급: 36,000V\n\n(직류는 교류 값에 1.5배)",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 11,
                category: "필답형-보호구",
                importance: 3,
                question: "착용 부위에 따른 방열복의 종류 4가지는?",
                hint: "필답형-보호구",
                answer: "① 방열상의 (상체)\n② 방열하의 (하체)\n③ 방열일체복 (몸체)\n④ 방열장갑 (손)\n(추가: 방열두건(머리))",
                mnemonic: "필답형-보호구",
                image: "😷"
            },
            {
                id: 12,
                category: "필답형-보호구",
                importance: 3,
                question: "성능 구분에 따른 안전화의 종류 5가지는?",
                hint: "정말 발절여 가꼬",
                answer: "① 가죽제 안전화\n② 고무제 안전화\n③ 정전기 안전화\n④ 발등 안전화\n⑤ 절연화\n\n💡 암기팁: **정말 발절여 가꼬** (정전기, 발등, 절연, 가죽, 고무)",
                mnemonic: "정말 발절여 가꼬",
                image: "😷"
            },
            {
                id: 13,
                category: "필답형-보호구",
                importance: 3,
                question: "가죽제 안전화의 완성품에 대한 시험성능 기준 4가지는?",
                hint: "압답충빡(박)!",
                answer: "① 내압박성\n② 내답발성\n③ 내충격성\n④ 박리저항\n\n💡 암기팁: **압답충빡(박)!**",
                mnemonic: "압답충빡(박)!",
                image: "😷"
            },
            {
                id: 14,
                category: "필답형-안전인증",
                importance: 3,
                question: "방호조치 없이 양도·대여·설치·사용하거나 진열해서는 안 되는 기계·기구 4가지는?",
                hint: "예원공지",
                answer: "① 예초기\n② 원심기\n③ 공기압축기\n④ 지게차\n\n💡 암기팁: **예원공지**",
                mnemonic: "예원공지",
                image: "✅"
            },
            {
                id: 15,
                category: "필답형-안전인증",
                importance: 3,
                question: "안전인증대상 보호구 6가지를 쓰시오.",
                hint: "필답형-안전인증",
                answer: "① 안전화\n② 안전장갑\n③ 방진마스크\n④ 방독마스크\n⑤ 송기마스크\n⑥ 보호복",
                mnemonic: "필답형-안전인증",
                image: "✅"
            },
            {
                id: 16,
                category: "필답형-안전인증",
                importance: 3,
                question: "[보기]에서 안전인증대상에 해당하는 것을 4가지 고르시오.\n[보기]\n①방독마스크 ②산업용로봇 ③윤전기 ④안전매트 ⑤압력용기 ⑥보일러 안전밸브 ⑦동력식 수동대패 ⑧이동식 사다리 ⑨지게차 ⑩용접용 보안면",
                hint: "필답형-안전인증",
                answer: "정답: ①, ⑤, ⑥, ⑩\n\n① 방독마스크\n⑤ 압력용기\n⑥ 보일러 안전밸브\n⑩ 용접용 보안면",
                mnemonic: "필답형-안전인증",
                image: "✅"
            },
            {
                id: 17,
                category: "필답형-안전인증",
                importance: 3,
                question: "안전인증 제품에 안전인증 표시 외에 추가로 표시해야 할 사항 4가지는?",
                hint: "형규제제",
                answer: "① 형식 또는 모델명\n② 규격 또는 등급\n③ 제조자명\n④ 제조번호 및 제조연월\n\n💡 암기팁: **형규제제**",
                mnemonic: "형규제제",
                image: "✅"
            },
            {
                id: 18,
                category: "필답형-안전인증",
                importance: 3,
                question: "안전인증을 전부 또는 일부 면제할 수 있는 경우 3가지는?",
                hint: "연수외단",
                answer: "① 연구·개발을 목적으로 제조·수입하거나, 수출을 목적으로 제조하는 경우\n② 고용노동부장관이 정하여 고시하는 외국의 안전인증기관에서 인증을 받은 경우\n③ 다른 법령에 따라 안전성에 관한 검사나 인증을 받은 경우\n\n💡 암기팁: **연수외단**",
                mnemonic: "연수외단",
                image: "✅"
            },
            {
                id: 19,
                category: "필답형-안전인증",
                importance: 3,
                question: "자율안전확인대상 기계·기구를 4가지 쓰시오.",
                hint: "연산파혼",
                answer: "① 연삭기 또는 연마기\n② 산업용 로봇\n③ 파쇄기 또는 분쇄기\n④ 혼합기\n\n💡 암기팁: **연산파혼**",
                mnemonic: "연산파혼",
                image: "✅"
            },
            {
                id: 20,
                category: "필답형-안전인증",
                importance: 3,
                question: "자율검사프로그램의 인정을 취소하거나 개선을 명할 수 있는 경우 2가지는?",
                hint: "필답형-안전인증",
                answer: "① 자율검사프로그램을 인정받고도 검사를 하지 않은 경우\n② 인정받은 자율검사프로그램의 내용에 따라 검사를 하지 않은 경우",
                mnemonic: "필답형-안전인증",
                image: "✅"
            },
            {
                id: 21,
                category: "필답형-안전인증",
                importance: 3,
                question: "안전인증기관이 실시하는 심사의 종류 4가지는?",
                hint: "예서 기제품",
                answer: "① 예비심사\n② 서면심사\n③ 기술능력 및 생산체계 심사\n④ 제품심사\n\n💡 암기팁: **예서 기제품** 심사해라",
                mnemonic: "예서 기제품",
                image: "✅"
            },
            {
                id: 22,
                category: "필답형-안전인증",
                importance: 3,
                question: "크레인, 리프트, 곤돌라의 안전검사 주기는?",
                hint: "필답형-안전인증",
                answer: "• 최초검사: 설치가 끝난 날부터 3년 이내\n• 정기검사: 그 이후부터 2년마다\n• (단, 건설현장 사용 시): 최초 설치한 날부터 6개월마다",
                mnemonic: "필답형-안전인증",
                image: "✅"
            },
            {
                id: 23,
                category: "필답형-안전표지",
                importance: 3,
                question: "출입금지 표지의 색상 기준은? (바탕, 도형, 화살표)",
                hint: "필답형-안전표지",
                answer: "① 바탕: 흰색\n② 기본모형(원형): 빨간색\n③ 관련부호(화살표): 검정색",
                mnemonic: "필답형-안전표지",
                image: "🚧"
            },
            {
                id: 24,
                category: "필답형-안전표지",
                importance: 3,
                question: "위험장소경고 표지의 색상 기준은? (바탕, 도형 및 테두리)",
                hint: "필답형-안전표지",
                answer: "① 바탕: 노란색\n② 도형 및 테두리: 검은색",
                mnemonic: "필답형-안전표지",
                image: "🚧"
            },
            {
                id: 25,
                category: "필답형-안전표지",
                importance: 3,
                question: "다음 경고표지의 명칭은?\n1. 돌 떨어지는 그림\n2. 사람이 미끄러지는 그림\n3. 불꽃 그림\n4. 폭발 그림",
                hint: "필답형-안전표지",
                answer: "① 낙하물경고\n② 몸균형상실경고\n③ 인화성물질경고\n④ 폭발성물질경고",
                mnemonic: "필답형-안전표지",
                image: "🚧"
            },
            {
                id: 26,
                category: "필답형-안전표지",
                importance: 3,
                question: "다음 안전보건표지의 명칭은?\n1. 성냥불 금지\n2. 폭발 그림\n3. 손/쇠에 액체 떨어지는 그림\n4. 번개 그림",
                hint: "필답형-안전표지",
                answer: "① 화기금지\n② 폭발성물질경고\n③ 부식성물질경고\n④ 고압전기경고",
                mnemonic: "필답형-안전표지",
                image: "🚧"
            },
            {
                id: 27,
                category: "필답형-안전표지",
                importance: 3,
                question: "응급구호 표지의 색상 기준은? (바탕, 도형)",
                hint: "필답형-안전표지",
                answer: "① 바탕: 녹색\n② 도형(십자가): 흰색",
                mnemonic: "필답형-안전표지",
                image: "🚧"
            },
            {
                id: 28,
                category: "필답형-안전표지",
                importance: 3,
                question: "관계자 외 출입금지 표지를 부착해야 하는 장소 3가지는?",
                hint: "허석금",
                answer: "① 허가대상물질 작업장\n② 석면취급/해체 작업장\n③ 금지대상물질의 취급 실험실 등\n\n💡 암기팁: **허석금**",
                mnemonic: "허석금",
                image: "🚧"
            },
            {
                id: 29,
                category: "필답형-방호장치",
                importance: 3,
                question: "아세틸렌 또는 가스집합 용접장치에 설치하는 역화방지기 성능시험 종류 4가지는?",
                hint: "내기역역",
                answer: "① 내압시험\n② 기밀시험\n③ 역류방지시험\n④ 역화방지시험\n\n💡 암기팁: **내기역역**",
                mnemonic: "내기역역",
                image: "🛡️"
            },
            {
                id: 30,
                category: "필답형-방호장치",
                importance: 3,
                question: "아세틸렌 용접장치의 안전기 설치 위치에 대하여 빈칸을 채우시오.",
                hint: "필답형-방호장치",
                answer: "• (취관)마다 안전기 설치\n• 주관 및 취관에 가장 가까운 (분기관)마다 안전기를 부착한 경우 제외\n• 가스용기가 (발생기)와 분리된 경우 (발생기)와 가스용기 사이에 설치",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 31,
                category: "필답형-방호장치",
                importance: 3,
                question: "연삭기 덮개의 시험 방법 중 확인 사항은?\n1. 공통\n2. 탁상용 연삭기",
                hint: "덮워조",
                answer: "① 연삭 숫돌과 덮개의 접촉 여부\n② 탁상용: 덮개, 워크레스트, 조정편 부착 상태의 적합성 여부\n\n💡 암기팁: **덮워조**",
                mnemonic: "덮워조",
                image: "🛡️"
            },
            {
                id: 32,
                category: "필답형-방호장치",
                importance: 3,
                question: "연삭숫돌의 파괴원인 4가지를 쓰시오.",
                hint: "회충균측",
                answer: "① 숫돌의 회전속도가 너무 빠를 때\n② 숫돌에 큰 충격이 가해질 때\n③ 숫돌 자체에 균열이 있을 때\n④ 숫돌 작업 시 숫돌의 측면을 사용할 때\n\n💡 암기팁: **회충균측**",
                mnemonic: "회충균측",
                image: "🛡️"
            },
            {
                id: 33,
                category: "필답형-방호장치",
                importance: 3,
                question: "프레스 방호장치의 주요 수치 기준 4가지는?",
                hint: "필답형-방호장치",
                answer: "① 광전자식: 정상램프(녹색), 위험램프(붉은색)\n② 양수조작식: 누름버튼 상호간 내측거리 (300mm 이상)\n③ 손쳐내기식: 슬라이드 하행정거리의 (3/4)위치 이내에서 손을 밀어냄\n④ 수인식: 수인끈의 직경 (4mm 이상)",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 34,
                category: "필답형-방호장치",
                importance: 3,
                question: "다음 설명에 맞는 프레스 방호장치는?\n1. 정전/이상 시 정지 가능\n2. 1행정 1정지 기구에 사용\n3. 하행정 3/4위치에서 손 쳐냄\n4. 손목에 끈 연결",
                hint: "필답형-방호장치",
                answer: "① 광전자식 방호장치\n② 양수조작식 방호장치\n③ 손쳐내기식 방호장치\n④ 수인식 방호장치",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 35,
                category: "필답형-방호장치",
                importance: 3,
                question: "광전자식 방호장치의 주요 기준 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 분류: A-1\n② 정상동작표시램프: 녹색, 위험표시램프: 붉은색\n③ 사용전원전압의 ±20% 변동에 대하여 정상 작동",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 36,
                category: "필답형-방호장치",
                importance: 3,
                question: "롤러기 방호장치 설치 위치 기준은? (손/복부/무릎 조작식)",
                hint: "필답형-방호장치",
                answer: "① 손 조작식: 밑면으로부터 1.8m 이내\n② 복부 조작식: 밑면으로부터 0.8m 이상 1.1m 이내\n③ 무릎 조작식: 밑면으로부터 0.6m 이내",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 37,
                category: "필답형-방호장치",
                importance: 3,
                question: "롤러기 급정지장치의 급정지거리는 원주 속도에 따라 어떻게 다른가?",
                hint: "필답형-방호장치",
                answer: "• 30m/min 미만: 앞면 롤러 원주의 1/3 이내\n• 30m/min 이상: 앞면 롤러 원주의 1/2.5 이내",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 38,
                category: "필답형-방호장치",
                importance: 3,
                question: "동력식 수동대패에 설치해야 할 방호장치의 명칭과 종류 2가지는?",
                hint: "필답형-방호장치",
                answer: "• 명칭: 날접촉 예방장치(덮개)\n• 종류: ① 가동식 ② 고정식",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 39,
                category: "필답형-방호장치",
                importance: 3,
                question: "목재가공용 둥근톱의 분할 날이 갖추어야 할 조건 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 두께: 둥근톱 두께의 1.1배 이상\n② 분할날과 톱날 원주면과의 거리: 12mm 이내\n③ 덮는 범위: 표준 테이블면 상의 톱 뒷날의 2/3 이상을 덮을 것",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 40,
                category: "필답형-방호장치",
                importance: 3,
                question: "보일러에서 발생하는 캐리오버(Carry-over) 현상의 원인 4가지는?",
                hint: "과열수운",
                answer: "① 보일러수가 과잉 농축되었을 때\n② 열부하가 급격하게 변동할 때\n③ 수위조절이 원활하지 못할 때\n④ 운전 압력을 너무 낮게 설정했을 때\n\n💡 암기팁: **과열수운**",
                mnemonic: "과열수운",
                image: "🛡️"
            },
            {
                id: 41,
                category: "필답형-방호장치",
                importance: 3,
                question: "보일러에서 발생하는 캐리오버와 포밍 현상을 설명하시오.",
                hint: "필답형-방호장치",
                answer: "① 캐리오버(Carry-over): 보일러수 속의 용해 고형물이 증기에 섞여 보일러 밖으로 튀어나가는 현상\n② 포밍(Foaming): 유지분이나 부유물 등에 의해 수면부에 거품이 발생하는 현상",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 42,
                category: "필답형-방호장치",
                importance: 3,
                question: "보일러 운전 중 프라이밍(Priming)의 발생원인 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 보일러 관수의 과잉농축\n② 주증기 밸브의 급격한 개방\n③ 보일러 부하의 급변화",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 43,
                category: "필답형-방호장치",
                importance: 3,
                question: "보일러의 폭발사고 예방을 위해 유지·관리해야 할 부속(방호장치) 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 압력방출장치\n② 압력제한스위치\n③ 고저수위 조절장치\n\n💡 암기팁: 보일러 **방제수**",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 44,
                category: "필답형-방호장치",
                importance: 3,
                question: "안전밸브 대신 파열판을 반드시 설치해야 하는 경우 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 반응 폭주 등 급격한 압력 상승의 우려가 있는 경우\n② 급성 독성물질의 누출로 주위 작업환경을 오염시킬 우려가 있는 경우\n③ 운전 중 안전밸브에 이상 물질이 누적되어 작동되지 않을 우려가 있는 경우",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 45,
                category: "필답형-방호장치",
                importance: 3,
                question: "과압에 따른 폭발 방지를 위해 안전밸브 또는 파열판을 설치해야 하는 설비 3가지는?",
                hint: "압정정",
                answer: "① 압력용기\n② 정변위 압축기\n③ 정변위 펌프\n\n💡 암기팁: **압정정**",
                mnemonic: "압정정",
                image: "🛡️"
            },
            {
                id: 46,
                category: "필답형-방호장치",
                importance: 3,
                question: "압력용기에 각인으로 표시해야 할 사항 3가지는?",
                hint: "필답형-방호장치",
                answer: "① 최고사용압력\n② 제조연월일\n③ 제조회사명",
                mnemonic: "필답형-방호장치",
                image: "🛡️"
            },
            {
                id: 47,
                category: "필답형-작업계획",
                importance: 3,
                question: "이동식크레인의 방호장치 3가지를 쓰시오.",
                hint: "과비권훅",
                answer: "① 과부하방지장치\n② 권과방지장치\n③ 비상정지장치\n(추가: 훅 해지장치)\n\n💡 암기팁: **과비권훅**",
                mnemonic: "과비권훅",
                image: "📋"
            },
            {
                id: 48,
                category: "필답형-작업계획",
                importance: 3,
                question: "타워크레인 설치·조립·해체 작업 시 작업계획서에 포함될 내용 4가지는?",
                hint: "필답형-작업계획",
                answer: "① 타워크레인의 종류 및 형식\n② 설치·조립 및 해체 순서\n③ 작업인원의 구성 및 역할 범위\n④ 지지 방법",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 49,
                category: "필답형-작업계획",
                importance: 3,
                question: "공기압축기 가동 시 작업 시작 전 점검사항 4가지는?",
                hint: "필답형-작업계획",
                answer: "① 공기저장 압력용기의 외관 상태\n② 회전부의 덮개 또는 울\n③ 압력방출장치의 기능\n④ 윤활유의 상태",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 50,
                category: "필답형-작업계획",
                importance: 3,
                question: "굴착면 높이 2m 이상 굴착작업 시 작업계획서에 포함되어야 할 사항 4가지는?",
                hint: "필답형-작업계획",
                answer: "① 굴착방법 및 순서, 토사 반출방법\n② 필요한 인원 및 장비 사용계획\n③ 매설물 등에 대한 이설·보호대책\n④ 사업장 내 연락방법 및 신호방법",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 51,
                category: "필답형-작업계획",
                importance: 3,
                question: "중량물 취급 작업 시 작성하는 작업계획서에 포함될 위험 예방 안전대책 5가지는?",
                hint: "필답형-작업계획",
                answer: "① 추락 위험\n② 낙하 위험\n③ 전도 위험\n④ 협착 위험\n⑤ 붕괴 위험",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 52,
                category: "필답형-작업계획",
                importance: 3,
                question: "차량계 '하역운반기계'를 사용하는 작업의 작업계획서 내용 2가지는?",
                hint: "추낙전협붕 + 경작",
                answer: "① 추락·낙하·전도·협착·붕괴 위험방지대책\n② 운행경로 및 작업방법\n\n💡 암기팁: **추낙전협붕 + 경작**",
                mnemonic: "추낙전협붕 + 경작",
                image: "📋"
            },
            {
                id: 53,
                category: "필답형-작업계획",
                importance: 3,
                question: "차량계 '건설기계'를 사용하는 작업의 작업계획서 내용 2가지는?",
                hint: "종성 + 경작",
                answer: "① 사용하는 차량계 건설기계의 종류 및 성능\n② 운행경로 및 작업방법\n\n💡 암기팁: **종성 + 경작**",
                mnemonic: "종성 + 경작",
                image: "📋"
            },
            {
                id: 54,
                category: "필답형-작업계획",
                importance: 3,
                question: "악천후로 비계 작업을 중지 후 재개할 때 점검사항 4가지는?",
                hint: "필답형-작업계획",
                answer: "① 발판재료의 손상여부 및 부착·걸림 상태\n② 해당 비계의 연결부 또는 접속부의 풀림 상태\n③ 연결재료 및 연결철물의 손상 또는 부식상태\n④ 손잡이의 탈락 여부",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 55,
                category: "필답형-작업계획",
                importance: 3,
                question: "크레인 작업 시작 전 점검사항 3가지는?",
                hint: "권브클, 주행로, 와이어로프",
                answer: "① 권과방지장치·브레이크·클러치 및 운전장치의 기능\n② 주행로의 상측 및 트롤리가 횡행하는 레일의 상태\n③ 와이어로프가 통하고 있는 곳의 상태\n\n💡 암기팁: **권브클, 주행로, 와이어로프**",
                mnemonic: "권브클, 주행로, 와이어로프",
                image: "📋"
            },
            {
                id: 56,
                category: "필답형-작업계획",
                importance: 3,
                question: "이동식 크레인 작업 시작 전 점검사항 3가지는?",
                hint: "필답형-작업계획",
                answer: "① 권과방지장치나 그 밖의 경보장치의 기능\n② 브레이크·클러치 및 조정장치의 기능\n③ 와이어로프가 통하고 있는 곳 및 작업장소의 지반 상태",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 57,
                category: "필답형-작업계획",
                importance: 3,
                question: "근로자가 반복적으로 중량물을 취급하는 작업 시작 전 점검사항 2가지는?",
                hint: "필답형-작업계획",
                answer: "① 중량물 취급의 올바른 자세 및 복장\n② 위험물이 날아 흩어짐에 따른 보호구의 착용",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 58,
                category: "필답형-작업계획",
                importance: 3,
                question: "프레스 작업 시작 전 점검사항 2가지는?",
                hint: "필답형-작업계획",
                answer: "① 클러치 및 브레이크의 기능\n② 방호장치의 기능\n\n💡 암기팁: 프레스는 **클브방**",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 59,
                category: "필답형-작업계획",
                importance: 3,
                question: "컨베이어 작업 시작 전 점검사항 3가지는?",
                hint: "필답형-작업계획",
                answer: "① 원동기 및 풀리 기능의 이상 유무\n② 이탈 등의 방지장치 기능의 이상 유무\n③ 비상정지장치 기능의 이상 유무",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 60,
                category: "필답형-작업계획",
                importance: 3,
                question: "구내운반차 작업 시작 전 점검사항 3가지는?",
                hint: "제조하유바",
                answer: "① 제동장치 및 조종장치 기능의 이상 유무\n② 하역장치 및 유압장치 기능의 이상 유무\n③ 바퀴의 이상 유무\n\n💡 암기팁: **제조하유바**",
                mnemonic: "제조하유바",
                image: "📋"
            },
            {
                id: 61,
                category: "필답형-작업계획",
                importance: 3,
                question: "지게차 작업 시작 전 점검사항 4가지는?",
                hint: "필답형-작업계획",
                answer: "① 제동장치 및 조종장치 기능\n② 하역장치 및 유압장치 기능\n③ 바퀴의 이상 유무\n④ 전조등·후미등·방향지시기 및 경보장치 기능",
                mnemonic: "필답형-작업계획",
                image: "📋"
            },
            {
                id: 62,
                category: "필답형-건설",
                importance: 3,
                question: "화물의 하중을 직접 지지하는 달기와이어로프 또는 달기체인의 안전계수는?",
                hint: "필답형-건설",
                answer: "5 이상",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 63,
                category: "필답형-건설",
                importance: 3,
                question: "스트랜드 꼬임 방향에 따른 와이어로프 꼬임 형식 2가지는?",
                hint: "랭보",
                answer: "① 랭꼬임(Lang Lay): 로프와 스트랜드의 꼬임 방향이 같음\n② 보통꼬임(Regular Lay): 로프와 스트랜드의 꼬임 방향이 반대\n\n💡 암기팁: **랭보**",
                mnemonic: "랭보",
                image: "🏗️"
            },
            {
                id: 64,
                category: "필답형-건설",
                importance: 3,
                question: "달기 체인의 사용금지 기준 2가지는? (길이, 지름)",
                hint: "필답형-건설",
                answer: "① 달기 체인의 길이가 제조 시 길이의 5%를 초과하여 늘어난 것\n② 링 단면지름의 감소가 제조 시 지름의 10%를 초과한 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 65,
                category: "필답형-건설",
                importance: 3,
                question: "공사용 가설도로 설치 시 준수사항 3가지는?",
                hint: "필답형-건설",
                answer: "① 장비와 차량이 안전하게 운행할 수 있도록 견고하게 설치\n② 도로와 작업장이 접할 경우 울타리 등 설치\n③ 배수를 위해 경사지게 설치하거나 배수시설 설치",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 66,
                category: "필답형-건설",
                importance: 3,
                question: "안전난간의 구조 및 설치요건 3가지 수치 기준은? (높이, 지름, 하중)",
                hint: "필답형-건설",
                answer: "① 상부 난간대 높이: 바닥면 등으로부터 90cm 이상\n② 난간대 지름: 2.7cm 이상의 금속제 파이프\n③ 하중: 100kg 이상의 하중에 견딜 수 있는 튼튼한 구조",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 67,
                category: "필답형-건설",
                importance: 3,
                question: "계단 및 계단참 설치 기준에서 빈칸을 채우시오.\n1. 하중: ( )kg/m² 이상, 안전율 ( ) 이상\n2. 폭: ( )m 이상\n3. 높이 ( )m 초과 계단: ( )m 이상 계단참 설치\n4. 높이 ( )m 이상 계단 측면: 안전난간 설치",
                hint: "필답형-건설",
                answer: "① 하중: **500**kg/m² 이상, 안전율 **4** 이상\n② 폭: **1**m 이상\n③ 높이 **3**m 초과 계단: 너비 **1.2**m 이상 계단참 설치\n④ 높이 **1**m 이상 계단 측면: 안전난간 설치",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 68,
                category: "필답형-건설",
                importance: 3,
                question: "가설통로 설치 시 준수사항 4가지는?",
                hint: "필답형-건설",
                answer: "① 견고한 구조로 할 것\n② 경사는 30도 이하로 할 것\n③ 경사가 15도를 초과하는 경우 미끄러지지 않는 구조로 할 것\n④ 추락 위험이 있는 장소에는 안전난간을 설치할 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 69,
                category: "필답형-건설",
                importance: 3,
                question: "가설통로 설치 기준에서 빈칸을 채우시오.\n1. 경사가 ( )도를 초과하면 미끄럼 방지 구조\n2. 수직갱 통로 길이 15m 이상 시 ( )m 이내마다 계단참\n3. 높이 8m 이상 비계다리에는 ( )m 이내마다 계단참",
                hint: "필답형-건설",
                answer: "① 경사가 **15도**를 초과하면 미끄럼 방지 구조\n② 수직갱 통로 길이 15m 이상 시 **10m** 이내마다 계단참\n③ 높이 8m 이상 비계다리에는 **7m** 이내마다 계단참",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 70,
                category: "필답형-건설",
                importance: 3,
                question: "말비계 조립 및 사용 시 준수사항 2가지는?",
                hint: "필답형-건설",
                answer: "① 지주부재 하단에 미끄럼 방지장치를 하고, 양측 끝부분에 올라서서 작업하지 않도록 할 것\n② 말비계 높이가 2m를 초과하는 경우, 작업발판 폭을 40cm 이상으로 할 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 71,
                category: "필답형-건설",
                importance: 3,
                question: "높이 2m 이상인 비계 작업발판의 설치 기준 2가지는? (폭/틈, 추락위험장소)",
                hint: "필답형-건설",
                answer: "① 작업발판의 폭은 40cm 이상, 발판 재료 간의 틈은 3cm 이하로 할 것\n② 추락의 위험이 있는 장소에는 안전난간을 설치할 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 72,
                category: "필답형-건설",
                importance: 3,
                question: "이동식비계 조립 및 작업 시 준수사항 4가지는?",
                hint: "필답형-건설",
                answer: "① 승강용 사다리는 견고하게 설치할 것\n② 비계 최상부에서 작업 시 안전난간을 설치할 것\n③ 작업발판은 항상 수평을 유지하고, 발판 위에서 받침대나 사다리 사용 금지\n④ 작업발판의 최대적재하중은 250kg을 초과하지 않도록 할 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 73,
                category: "필답형-건설",
                importance: 3,
                question: "안전난간의 주요 구성요소 4가지는?",
                hint: "상중발난",
                answer: "① 상부 난간대\n② 중간 난간대\n③ 발끝막이판\n④ 난간기둥\n\n💡 암기팁: **상중발난**",
                mnemonic: "상중발난",
                image: "🏗️"
            },
            {
                id: 74,
                category: "필답형-건설",
                importance: 3,
                question: "보일링 현상 방지대책 3가지는?",
                hint: "필답형-건설",
                answer: "① 굴착배면의 지하수위를 낮춘다.\n② 흙막이 벽의 근입 깊이를 깊게 한다.\n③ 차수성이 높은 흙막이 벽을 설치한다. (또는 굴착토를 원상 매립한다)",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 75,
                category: "필답형-건설",
                importance: 3,
                question: "콘크리트 타설작업 시 준수사항 3가지는?",
                hint: "양분보",
                answer: "① 설계도서상의 콘크리트 양생기간을 준수하여 거푸집 동바리 등을 해체\n② 콘크리트 타설 시 편심이 발생하지 않도록 골고루 분산하여 타설\n③ 거푸집 붕괴 위험이 발생할 우려가 있으면 충분한 보강조치\n\n💡 암기팁: **양분보**",
                mnemonic: "양분보",
                image: "🏗️"
            },
            {
                id: 76,
                category: "필답형-건설",
                importance: 3,
                question: "콘크리트 옹벽의 안정조건 3가지는?",
                hint: "필답형-건설",
                answer: "① 활동에 대한 안정\n② 전도에 대한 안정\n③ 지반 지지력에 대한 안정\n\n💡 암기팁: 옹벽은 **활전지**",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 77,
                category: "필답형-건설",
                importance: 3,
                question: "흙막이 지보공 설치 시 정기적으로 점검해야 할 사항 3가지는?",
                hint: "필답형-건설",
                answer: "① 부재의 손상·변형·부식·변위 및 탈락의 유무와 상태\n② 버팀대의 긴압의 정도\n③ 부재의 접속부·부착부 및 교차부의 상태",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 78,
                category: "필답형-건설",
                importance: 3,
                question: "작업발판 일체형 거푸집 종류 4가지는?",
                hint: "갱슬터클",
                answer: "① 갱폼 (Gang form)\n② 슬립폼 (Slip form)\n③ 클라이밍폼 (Climbing form)\n④ 터널라이닝폼 (Tunnel lining form)\n\n💡 암기팁: **갱슬터클**",
                mnemonic: "갱슬터클",
                image: "🏗️"
            },
            {
                id: 79,
                category: "필답형-건설",
                importance: 3,
                question: "잠함 또는 우물통 내부 굴착작업 시 급격한 침하 방지 조치 2가지는?",
                hint: "필답형-건설",
                answer: "① 침하관계도에 따라 굴착방법 및 재하량 등을 정할 것\n② 바닥으로부터 천장 또는 보까지의 높이는 1.8미터 이상으로 할 것",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 80,
                category: "필답형-건설",
                importance: 3,
                question: "부두·안벽 등 하역작업장의 조치사항 3가지는?",
                hint: "필답형-건설",
                answer: "① 작업장 및 통로의 위험한 부분에 안전한 조명 유지\n② 부두 또는 안벽의 선을 따라 설치하는 통로의 폭은 90cm 이상으로 할 것\n③ 육상 통로의 위험한 부분(다리, 갑문 등)에는 안전난간 또는 울타리 설치",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 81,
                category: "필답형-건설",
                importance: 3,
                question: "낙하물방지망 설치 기준 3가지는? (설치간격, 내민길이, 각도)",
                hint: "필답형-건설",
                answer: "① 설치간격: 높이 **10m** 이내마다 설치\n② 내민 길이: 벽면으로부터 **2m** 이상\n③ 수평면과의 각도: **20도 이상 30도** 이하",
                mnemonic: "필답형-건설",
                image: "🏗️"
            },
            {
                id: 82,
                category: "필답형-기계안전",
                importance: 3,
                question: "달기구의 안전계수 기준을 쓰시오.\n1. 근로자 탑승 운반구 지지\n2. 화물 하중 직접 지지\n3. 훅, 샤클 등\n4. 그 밖의 경우",
                hint: "필답형-기계안전",
                answer: "① 근로자가 탑승하는 운반구를 지지: **10 이상**\n② 화물의 하중을 직접 지지: **5 이상**\n③ 훅, 샤클, 클램프, 리프팅 빔: **3 이상**\n④ 그 밖의 경우: **4 이상**",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 83,
                category: "필답형-기계안전",
                importance: 3,
                question: "기계설비의 근원적 안전을 확보하기 위한 안전화 방법 4가지는?",
                hint: "외기구보",
                answer: "① 외관의 안전화\n② 기능의 안전화\n③ 구조의 안전화\n④ 보전작업의 안전화\n\n💡 암기팁: **외기구보**",
                mnemonic: "외기구보",
                image: "⚙️"
            },
            {
                id: 84,
                category: "필답형-기계안전",
                importance: 3,
                question: "기계설비에 형성되는 위험점 6가지 중 4가지를 쓰시오.",
                hint: "필답형-기계안전",
                answer: "① 협착점\n② 끼임점\n③ 절단점\n④ 물림점\n(⑤ 접선물림점, ⑥ 회전말림점)",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 85,
                category: "필답형-기계안전",
                importance: 3,
                question: "기계 위험점의 정의를 쓰시오.\n1. 협착점\n2. 끼임점\n3. 물림점\n4. 회전말림점",
                hint: "필답형-기계안전",
                answer: "① 협착점: 왕복운동을 하는 동작부분과 움직임이 없는 고정부분 사이에서 형성\n② 끼임점: 고정부분과 회전 또는 직선운동 부분 사이에 형성\n③ 물림점: 서로 반대방향으로 회전하는 두 개의 회전체에 물려 들어가는 위험점\n④ 회전말림점: 회전하는 물체에 작업복 등이 말려들어가는 위험점",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 86,
                category: "필답형-기계안전",
                importance: 3,
                question: "기계의 원동기, 회전축, 기어 등 위험 부위에 설치해야 하는 방호장치 3가지는?",
                hint: "덮울건",
                answer: "① 덮개\n② 울\n③ 건널다리\n\n💡 암기팁: **덮울건**",
                mnemonic: "덮울건",
                image: "⚙️"
            },
            {
                id: 87,
                category: "필답형-기계안전",
                importance: 3,
                question: "연삭숫돌 시험운전 시간을 쓰시오.\n1. 작업 시작 전\n2. 연삭숫돌 교체 후",
                hint: "필답형-기계안전",
                answer: "① 작업을 시작하기 전: **1분** 이상\n② 연삭숫돌을 교체한 후: **3분** 이상",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 88,
                category: "필답형-기계안전",
                importance: 3,
                question: "산업용 로봇 교시 등 작업 시, 지침에 포함되어야 할 사항 4가지는?",
                hint: "필답형-기계안전",
                answer: "① 로봇의 조작방법 및 순서\n② 작업 중의 매니퓰레이터의 속도\n③ 2명 이상의 근로자에게 작업을 시킬 경우의 신호방법\n④ 이상을 발견한 경우의 조치",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 89,
                category: "필답형-기계안전",
                importance: 3,
                question: "지게차의 헤드가드가 갖추어야 할 사항 2가지는?",
                hint: "필답형-기계안전",
                answer: "① 강도는 지게차 최대하중의 2배 값(4톤 초과 시 4톤)의 등분포정하중에 견딜 수 있을 것\n② 상부틀 각 개구의 폭 또는 길이가 16cm 미만일 것",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 90,
                category: "필답형-기계안전",
                importance: 3,
                question: "차량계 하역운반기계 운전자가 운전위치를 이탈할 때 준수사항 2가지는?",
                hint: "필답형-기계안전",
                answer: "① 포크, 버킷 등의 장치를 가장 낮은 위치 또는 지면에 내려 둘 것\n② 원동기를 정지시키고 브레이크를 확실히 거는 등 갑작스러운 주행이나 이탈 방지 조치를 할 것 (또는 시동키를 운전대에서 분리)",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 91,
                category: "필답형-기계안전",
                importance: 3,
                question: "차량계 하역운반기계를 화물자동차에 싣거나 내리는 작업 시 준수사항 4가지는?",
                hint: "필답형-기계안전",
                answer: "① 평탄하고 견고한 장소에서 작업할 것\n② 발판 사용 시 충분한 길이·폭·강도를 가지고 견고하게 설치할 것\n③ 가설대 사용 시 충분한 폭·강도와 적당한 경사를 확보할 것\n④ 지정운전자 외에는 운전하지 않도록 할 것",
                mnemonic: "필답형-기계안전",
                image: "⚙️"
            },
            {
                id: 92,
                category: "필답형-전기안전",
                importance: 3,
                question: "다음에 해당하는 방폭구조의 기호를 쓰시오.\n1. 내압방폭구조\n2. 충전방폭구조\n3. 본질안전방폭구조\n4. 몰드방폭구조\n5. 비점화방폭구조",
                hint: "필답형-전기안전",
                answer: "① 내압방폭구조: **d**\n② 충전방폭구조: **q**\n③ 본질안전방폭구조: **ia, ib**\n④ 몰드방폭구조: **m**\n⑤ 비점화방폭구조: **n**",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 93,
                category: "필답형-전기안전",
                importance: 3,
                question: "방폭구조 표시 'Ex d IIB T5'가 의미하는 바를 설명하시오.",
                hint: "필답형-전기안전",
                answer: "• **Ex**: 방폭 전기기계기구\n• **d**: 내압방폭구조\n• **IIB**: 폭발등급 (그룹 II, B가스)\n• **T5**: 온도등급 (최고표면온도 100℃ 이하)",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 94,
                category: "필답형-전기안전",
                importance: 3,
                question: "'d ⅡA T4' 방폭구조 표시를 설명하시오.",
                hint: "필답형-전기안전",
                answer: "① d: 내압방폭구조\n② ⅡA: 폭발등급\n③ T4: 온도등급 (최고표면온도 135℃ 이하)",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 95,
                category: "필답형-전기안전",
                importance: 3,
                question: "소형 전기기기 및 방폭부품에 반드시 표시해야 할 최소 표시사항 4가지는?",
                hint: "필답형-전기안전",
                answer: "① 제조자의 이름 또는 등록상표\n② 형식\n③ 기호 Ex 및 방폭구조의 기호\n④ 인증서 발급기관의 이름 또는 마크, 합격번호",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 96,
                category: "필답형-전기안전",
                importance: 3,
                question: "감전방지용 누전차단기를 설치해야 하는 경우 3가지는?",
                hint: "필답형-전기안전",
                answer: "① 대지전압이 150V를 초과하는 이동형 또는 휴대형 전기기계·기구\n② 물 등 도전성이 높은 액체가 있는 습윤장소에서 사용하는 저압용 전기기계·기구\n③ 철판·철골 위 등 도전성이 높은 장소에서 사용하는 이동형 또는 휴대형 전기기계·기구",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 97,
                category: "필답형-전기안전",
                importance: 3,
                question: "전기기계·기구에 설치하는 누전차단기의 정격감도전류와 작동시간 기준은?",
                hint: "필답형-전기안전",
                answer: "• 정격감도전류: **30mA 이하**\n• 작동시간: **0.03초 이내**",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 98,
                category: "필답형-전기안전",
                importance: 3,
                question: "충전부 감전 방지를 위한 방호방법 3가지는?",
                hint: "필답형-전기안전",
                answer: "① 충전부가 노출되지 않도록 폐쇄형 외함이 있는 구조로 할 것\n② 충전부에 충분한 절연효과가 있는 방호망이나 절연덮개를 설치할 것\n③ 충전부는 내구성이 있는 절연물로 완전히 덮어 감쌀 것",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 99,
                category: "필답형-전기안전",
                importance: 3,
                question: "정전기 발생 억제 및 제거를 위한 조치사항 3가지를 쓰시오.",
                hint: "필답형-전기안전",
                answer: "① 확실한 방법으로 **접지**를 할 것\n② **도전성** 재료를 사용할 것\n③ 가습 및 점화원이 될 우려가 없는 **제전장치**를 사용할 것",
                mnemonic: "필답형-전기안전",
                image: "⚡"
            },
            {
                id: 100,
                category: "필답형-전기안전",
                importance: 3,
                question: "정전기로 인한 화재·폭발 위험 방지 대책 5가지를 쓰시오.",
                hint: "도대제 접가",
                answer: "① 접지\n② 도전성 재료 사용\n③ 가습\n④ 제전장치 사용\n⑤ 대전방지용 안전화 및 제전복 착용\n\n💡 암기팁: **도대제 접가**",
                mnemonic: "도대제 접가",
                image: "⚡"
            },
            {
                id: 101,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "용융고열물 취급 설비가 있는 건축물의 수증기 폭발 방지 조치 2가지는?",
                hint: "필답형-화학/위험물",
                answer: "① 바닥은 물이 고이지 않는 구조로 할 것\n② 지붕·벽·창 등은 빗물이 새어 들지 않는 구조로 할 것",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 102,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "아세틸렌 용접장치 발생기실의 게시사항 및 화기금지 거리는?",
                hint: "필답형-화학/위험물",
                answer: "• 게시사항: 발생기의 **종류, 형식, 제작업체명**\n• 화기금지 거리:\n  - 발생기에서 **5m** 이내\n  - 발생기실에서 **3m** 이내",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 103,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "아세틸렌 발생기실의 설치 기준 3가지는?",
                hint: "필답형-화학/위험물",
                answer: "① 건물의 **최상층**에 위치\n② 화기 사용 설비로부터 **3m**를 초과하는 장소에 설치\n③ 옥외 설치 시, 개구부를 다른 건축물로부터 **1.5m** 이상 이격",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 104,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "다음 가스 용기의 색채를 쓰시오.\n1. 산소\n2. 아세틸렌\n3. 암모니아\n4. 질소",
                hint: "필답형-화학/위험물",
                answer: "① 산소: 녹색\n② 아세틸렌: 황색\n③ 암모니아: 백색\n④ 질소: 회색",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 105,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "산업안전보건법상 위험물질 중 다음은 어디에 해당하는가?\n1. 하이드라진 유도체, 니트로소화합물\n2. 황, 리튬",
                hint: "필답형-화학/위험물",
                answer: "① 폭발성 물질 및 유기과산화물\n② 물반응성 물질 및 인화성 고체",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 106,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "산업안전보건법상 위험물질의 종류를 물질의 성질에 따라 5가지 쓰시오.",
                hint: "인인산부급",
                answer: "① 인화성 가스\n② 인화성 액체\n③ 산화성 액체 및 고체\n④ 부식성 물질\n⑤ 급성 독성 물질\n\n💡 암기팁: **인인산부급**",
                mnemonic: "인인산부급",
                image: "🧪"
            },
            {
                id: 107,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "급성독성물질의 기준 LD50과 LC50의 빈칸을 채우시오.\n1. LD50(경구, 쥐): ( )mg/kg 이하\n2. LD50(경피, 토끼/쥐): ( )mg/kg 이하\n3. LC50(쥐, 4시간흡입, 가스): ( )ppm 이하\n4. LC50(쥐, 4시간흡입, 증기): ( )mg/L 이하",
                hint: "필답형-화학/위험물",
                answer: "① LD50(경구, 쥐): **300**mg/kg 이하\n② LD50(경피, 토끼/쥐): **1,000**mg/kg 이하\n③ LC50(쥐, 4시간흡입, 가스): **2,500**ppm 이하\n④ LC50(쥐, 4시간흡입, 증기): **10**mg/L 이하",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 108,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "위험물안전관리법상 위험물은 제1류~6류로 나뉜다. 4류 위험물과 5류 위험물과 혼재 가능한 위험물은 각각 무엇인가?",
                hint: "423-524-61",
                answer: "• 제4류(인화성 액체)와 혼재 가능: 제2류, 제3류, 제5류\n• 제5류(자기반응성 물질)와 혼재 가능: 제2류, 제4류\n\n💡 암기팁: **423-524-61** (4류는 2,3류 / 5류는 2,4류 / 6류는 1류와 혼재가능)",
                mnemonic: "423-524-61",
                image: "🧪"
            },
            {
                id: 109,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "다음 화학물질 중 노출기준(TWA)이 가장 낮은 것과 가장 높은 것은? (암모니아, 불소, 과산화수소, 사염화탄소, 염화수소)",
                hint: "필답형-화학/위험물",
                answer: "• 가장 낮은 것: **불소** (0.1 ppm)\n• 가장 높은 것: **암모니아** (25 ppm)",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 110,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "국소배기장치의 덕트 설치기준 3가지를 쓰시오.",
                hint: "필답형-화학/위험물",
                answer: "① 가능하면 길이는 짧게 하고 굴곡부의 수는 적게 할 것\n② 접속부의 안쪽은 돌출된 부분이 없도록 할 것\n③ 청소구를 설치하는 등 청소하기 쉬운 구조로 할 것",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 111,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "국소배기장치 후드 설치 시 준수사항 3가지를 쓰시오.",
                hint: "필답형-화학/위험물",
                answer: "① 유해물질이 발생하는 곳마다 설치할 것\n② 후드 형식은 가능하면 포위식 또는 부스식 후드를 설치할 것\n③ 외부식 또는 리시버식 후드는 해당 발산원에 가장 가까운 위치에 설치할 것",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 112,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "화재의 종류(A,B,C,D급)와 그에 따른 표시색을 쓰시오.",
                hint: "필답형-화학/위험물",
                answer: "• A급 (일반화재): 백색\n• B급 (유류화재): 황색\n• C급 (전기화재): 청색\n• D급 (금속화재): 무색(또는 회색)\n\n💡 암기팁: A(일반)B(유류)C(전기)D(금속) - **백황청무**",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 113,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "가스집합 용접장치에 있어서 가스장치실의 구조 기준 3가지는?",
                hint: "필답형-화학/위험물",
                answer: "① 가스가 누출된 경우 그 가스가 정체되지 않도록 할 것\n② 지붕과 천장에는 가벼운 불연성 재료를 사용할 것\n③ 벽에는 불연성 재료를 사용할 것",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 114,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "증기운 폭발(UVCE)과 비등액 팽창증기 폭발(BLEVE)을 설명하시오.",
                hint: "필답형-화학/위험물",
                answer: "• **UVCE (개방계 증기운 폭발)**: 대기 중에 유출된 가연성 가스/증기가 구름을 형성한 후 점화원에 의해 폭발하는 현상\n• **BLEVE (비등액 팽창증기 폭발)**: 가압 상태의 액화가스 저장탱크가 외부 화재 등으로 가열되어 파열되면서 내용물이 급격히 증발·팽창하여 폭발하는 현상",
                mnemonic: "필답형-화학/위험물",
                image: "🧪"
            },
            {
                id: 115,
                category: "필답형-화학/위험물",
                importance: 3,
                question: "할로겐화합물 소화약제에 사용되는 할로겐 원소 4가지는?",
                hint: "불염브요",
                answer: "① 불소 (F)\n② 염소 (Cl)\n③ 브롬 (Br)\n④ 요오드 (I)\n\n💡 암기팁: **불염브요**",
                mnemonic: "불염브요",
                image: "🧪"
            },
            {
                id: 116,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "관리대상 유해물질 취급 작업장에 게시해야 할 사항 5가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 관리대상 유해물질의 명칭\n② 인체에 미치는 영향\n③ 취급상 주의사항\n④ 착용하여야 할 보호구\n⑤ 응급조치와 긴급 방재 요령",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 117,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "화학설비 용도 변경 시 점검사항 3가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 설비 내부에 폭발이나 화재 우려가 있는 물질이 있는지 여부\n② 안전밸브·긴급차단장치 등 방호장치 기능의 이상 유무\n③ 냉각·가열·교반·압축·계측·제어장치 기능의 이상 유무",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 118,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "유해작업의 원인 제거를 위한 관리적 대책 3가지는?",
                hint: "대격환",
                answer: "① 대치: 덜 유해한 물질로 변경\n② 격리: 유해물질 발생원을 작업자로부터 격리\n③ 환기: 전체환기 또는 국소배기를 통해 유해물질 농도 저하\n\n💡 암기팁: **대격환**",
                mnemonic: "대격환",
                image: "📚"
            },
            {
                id: 119,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "공정안전보고서(PSM) 제출 대상에서 제외되는 설비 2가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 원자력 설비\n② 군사시설",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 120,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "공정안전보고서(PSM)에 포함되어야 할 사항 4가지는?",
                hint: "공평안비",
                answer: "① 공정안전자료\n② 공정위험성 평가서\n③ 안전운전계획\n④ 비상조치계획\n\n💡 암기팁: **공평안비**",
                mnemonic: "공평안비",
                image: "📚"
            },
            {
                id: 121,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "공정안전보고서 이행상태 평가 시기에 대한 빈칸을 채우시오.\n- 확인 후 ( )년 경과, ( )년 이내\n- 사업주 요청 시 ( ) 또는 ( )년 내 추가 평가 가능",
                hint: "필답형-PSM/MSDS",
                answer: "• 확인 후 **1년**이 경과한 날부터 **2년** 이내에 평가\n• 사업주 요청 시 **1년** 또는 **2년** 기간 내에 추가 평가 가능",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 122,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "공정위험성 평가 기법 중 반응, 분리 등 '복잡한 단위공정'에 대한 평가기법 4가지는?",
                hint: "위이결사",
                answer: "① 위험과 운전분석 (HAZOP)\n② 이상위험도 분석 (FMEA)\n③ 결함수 분석 (FTA)\n④ 사건수 분석 (ETA)\n\n💡 암기팁: **위이결사**",
                mnemonic: "위이결사",
                image: "📚"
            },
            {
                id: 123,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "공정위험성 평가 기법 중 저장탱크 등 '간단한 단위공정'에 대한 평가기법 4가지는?",
                hint: "체작사위",
                answer: "① 체크리스트 (Check List)\n② 작업자 실수 분석 (HEA)\n③ 사고예상질문 분석 (What-if)\n④ 위험과 운전분석 (HAZOP)\n\n💡 암기팁: **체작사위**",
                mnemonic: "체작사위",
                image: "📚"
            },
            {
                id: 124,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "MSDS 내용 변경 시, 제공받은 자에게 신속히 제공해야 할 내용 3가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 대상화학물질의 명칭\n② 구성성분의 명칭 및 함유량\n③ 건강 및 환경에 대한 유해성 및 물리적 위험성",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 125,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "근로자에게 실시해야 하는 MSDS 교육사항 4가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 대상화학물질의 명칭 (또는 제품명)\n② 물리적 위험성 및 건강 유해성\n③ 취급상의 주의사항\n④ 적절한 보호구",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 126,
                category: "필답형-PSM/MSDS",
                importance: 3,
                question: "MSDS 작성·제출 제외 대상 화학물질 4가지는?",
                hint: "필답형-PSM/MSDS",
                answer: "① 사료\n② 농약\n③ 마약 및 향정신성의약품\n④ 비료",
                mnemonic: "필답형-PSM/MSDS",
                image: "📚"
            },
            {
                id: 127,
                category: "필답형-안전관리",
                importance: 3,
                question: "노사협의체를 설치해야 하는 대상기업과 정기회의 개최 주기는?",
                hint: "필답형-안전관리",
                answer: "• 대상: 공사금액 120억원 (토목공사업은 150억원) 이상인 건설업\n• 주기: 2개월마다",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 128,
                category: "필답형-안전관리",
                importance: 3,
                question: "산업안전보건위원회의 근로자위원 자격 3가지는?",
                hint: "필답형-안전관리",
                answer: "① 근로자대표\n② 근로자대표가 지명하는 1명 이상의 명예산업안전감독관\n③ 근로자대표가 지명하는 9명 이내의 해당 사업장 근로자",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 129,
                category: "필답형-안전관리",
                importance: 3,
                question: "산업안전보건위원회 회의록에 작성해야 할 사항 3가지는?",
                hint: "필답형-안전관리",
                answer: "① 개최 일시 및 장소\n② 출석위원\n③ 심의 내용 및 의결·결정 사항",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 130,
                category: "필답형-안전관리",
                importance: 3,
                question: "산업안전보건위원회의 심의·의결사항 4가지는?",
                hint: "필답형-안전관리",
                answer: "① 산업재해 예방계획의 수립에 관한 사항\n② 안전보건관리규정의 작성 및 변경에 관한 사항\n③ 안전보건교육에 관한 사항\n④ 작업환경측정 등 작업환경의 점검 및 개선에 관한 사항",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 131,
                category: "필답형-안전관리",
                importance: 3,
                question: "안전보건관리규정에 포함되어야 할 사항 4가지는?",
                hint: "필답형-안전관리",
                answer: "① 안전 및 보건에 관한 관리조직과 그 직무\n② 안전보건교육\n③ 작업장의 안전 및 보건 관리\n④ 사고 조사 및 대책 수립",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 132,
                category: "필답형-안전관리",
                importance: 3,
                question: "사업주의 의무와 근로자의 의무를 각각 2가지씩 쓰시오.",
                hint: "필답형-안전관리",
                answer: "• 사업주 의무:\n  ① 산업재해 예방을 위한 기준 준수\n  ② 사업장의 안전·보건에 관한 정보를 근로자에게 제공\n• 근로자 의무:\n  ① 산업재해 예방에 필요한 사항 준수\n  ② 사업주 등이 실시하는 산업재해 예방 조치에 따름",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 133,
                category: "필답형-안전관리",
                importance: 3,
                question: "안전보건총괄책임자의 직무 4가지를 쓰시오.",
                hint: "필답형-안전관리",
                answer: "① 위험성 평가의 실시에 관한 사항\n② 작업의 중지\n③ 도급 시 산업재해 예방조치\n④ 안전인증대상 및 자율안전확인대상 기계 등의 사용 여부 확인",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 134,
                category: "필답형-안전관리",
                importance: 3,
                question: "안전보건관리담당자의 업무 4가지는? (4가지 모두 '보좌 및 지도·조언'이 포함됨)",
                hint: "필답형-안전관리",
                answer: "① 안전보건교육 실시에 관한 보좌 및 지도·조언\n② 위험성평가에 관한 보좌 및 지도·조언\n③ 작업환경측정 및 개선에 관한 보좌 및 지도·조언\n④ 건강진단에 관한 보좌 및 지도·조언",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 135,
                category: "필답형-안전관리",
                importance: 3,
                question: "안전관리자를 정수 이상으로 증원하거나 교체 임명해야 하는 사유 3가지는?",
                hint: "필답형-안전관리",
                answer: "① 해당 사업장의 연간재해율이 같은 업종 평균재해율의 2배 이상인 경우\n② 중대재해가 연간 2건 이상 발생한 경우\n③ 관리자가 질병 등으로 3개월 이상 직무 수행이 불가능한 경우",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 136,
                category: "필답형-안전관리",
                importance: 3,
                question: "산업안전보건관리비로 사용 가능한 항목 4가지는?",
                hint: "필답형-안전관리",
                answer: "• 안전보건 교육장 내 냉·난방 설비 설치비\n• 안전보건 관리자용 안전순찰차량의 유류비\n• 위생 및 긴급 피난용 시설비\n• 안전관련 간행물 및 잡지 구독비",
                mnemonic: "필답형-안전관리",
                image: "👨‍💼"
            },
            {
                id: 137,
                category: "필답형-안전교육",
                importance: 3,
                question: "사업주가 근로자에게 시행해야 하는 안전보건교육의 종류 4가지는?",
                hint: "정채변특",
                answer: "① 정기교육\n② 채용 시 교육\n③ 작업내용 변경 시 교육\n④ 특별교육\n\n💡 암기팁: **정채변특**",
                mnemonic: "정채변특",
                image: "📚"
            },
            {
                id: 138,
                category: "필답형-안전교육",
                importance: 3,
                question: "관리감독자 정기안전보건교육 내용 5가지를 쓰시오.",
                hint: "필답형-안전교육",
                answer: "① 산업보건 및 직업병 예방\n② 직무 스트레스 예방 및 관리\n③ 산업안전 및 사고 예방\n④ 관리감독자의 역할과 임무\n⑤ 표준안전작업방법 및 지도 요령",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 139,
                category: "필답형-안전교육",
                importance: 3,
                question: "근로자 정기안전보건교육 내용 4가지를 쓰시오.",
                hint: "필답형-안전교육",
                answer: "① 산업보건 및 직업병 예방\n② 직무 스트레스 예방 및 관리\n③ 산업안전 및 사고 예방\n④ 유해·위험 작업환경 관리",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 140,
                category: "필답형-안전교육",
                importance: 3,
                question: "특수형태근로종사자에 대한 최초 노무제공 시 안전보건교육 내용 5가지는?",
                hint: "필답형-안전교육",
                answer: "① 산업안전 및 사고 예방\n② 직무스트레스 예방 및 관리\n③ 산업보건 및 직업병 예방\n④ 건강증진 및 질병 예방\n⑤ 유해·위험 작업환경 관리",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 141,
                category: "필답형-안전교육",
                importance: 3,
                question: "로봇작업에 대한 특별안전보건교육 내용 4가지는?",
                hint: "필답형-안전교육",
                answer: "① 로봇의 기본원리·구조 및 작업방법\n② 조작방법 및 작업순서\n③ 안전시설 및 안전기준\n④ 이상 발생 시 응급조치",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 142,
                category: "필답형-안전교육",
                importance: 3,
                question: "밀폐/습한 장소 용접작업 특별안전보건교육 내용 4가지는?",
                hint: "필답형-안전교육",
                answer: "① 작업순서, 안전작업방법 및 수칙\n② 환기설비에 관한 사항\n③ 전격 방지 및 보호구 착용\n④ 질식 시 응급조치",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 143,
                category: "필답형-안전교육",
                importance: 3,
                question: "방사선 업무 특별안전보건교육 내용 4가지는?",
                hint: "필답형-안전교육",
                answer: "① 방사선의 유해·위험 및 인체에 미치는 영향\n② 방사선 측정기기 기능 점검\n③ 방호거리, 방호벽, 방사선물질 취급 요령\n④ 응급처치 및 보호구 착용",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 144,
                category: "필답형-안전교육",
                importance: 3,
                question: "다음 안전보건교육 시간을 쓰시오.\n1. 안전관리자 신규\n2. 관리책임자 보수\n3. 사무직 정기\n4. 근로자 채용 시\n5. 근로자 작업내용 변경 시",
                hint: "필답형-안전교육",
                answer: "① 안전관리자 신규: 34시간 이상\n② 안전보건관리책임자 보수: 6시간 이상\n③ 사무직 종사 근로자 정기: 매반기 6시간 이상\n④ 일반 근로자 채용 시: 8시간 이상\n⑤ 작업내용 변경 시: 2시간 이상",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 145,
                category: "필답형-안전교육",
                importance: 3,
                question: "다음 안전보건교육 시간 빈칸을 채우시오.\n1. 안전보건관리책임자 신규/보수\n2. 안전관리자 신규/보수",
                hint: "필답형-안전교육",
                answer: "① 안전보건관리책임자: 신규 6시간 이상 / 보수 6시간 이상\n② 안전관리자: 신규 34시간 이상 / 보수 24시간 이상",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 146,
                category: "필답형-안전교육",
                importance: 3,
                question: "건설업 기초안전보건교육 시간 기준은?",
                hint: "필답형-안전교육",
                answer: "건설 일용근로자는 4시간 이상 교육을 이수해야 한다.",
                mnemonic: "필답형-안전교육",
                image: "📚"
            },
            {
                id: 147,
                category: "필답형-재해분석",
                importance: 3,
                question: "바닥의 기름에 미끄러져 선반에 머리를 부딪힌 재해를 분석하시오. (사고유형/기인물/가해물)",
                hint: "필답형-재해분석",
                answer: "• 사고유형: 넘어짐\n• 기인물: 기름\n• 가해물: 선반",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 148,
                category: "필답형-재해분석",
                importance: 3,
                question: "다음 재해 발생 형태를 쓰시오.\n1. 폭발과 화재 동시 발생\n2. 높은 곳에서 떨어짐\n3. 미끄러지거나 넘어짐\n4. 기계에 끼임",
                hint: "필답형-재해분석",
                answer: "① 폭발\n② 추락\n③ 전도\n④ 협착",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 149,
                category: "필답형-재해분석",
                importance: 3,
                question: "중대재해의 정의에서 빈칸을 채우시오.\n- 사망자 ( )명 이상\n- ( )개월 이상 치료 부상자 ( )명 이상\n- 직업성 질병자 ( )년 이내 ( )명 이상",
                hint: "필답형-재해분석",
                answer: "- 사망자 **1**명 이상\n- **6**개월 이상 치료 부상자 **2**명 이상\n- 직업성 질병자 **1**년 이내 **3**명 이상",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 150,
                category: "필답형-재해분석",
                importance: 3,
                question: "산업재해 발생 건수, 재해율 등을 공표해야 하는 사업장 2가지는?",
                hint: "필답형-재해분석",
                answer: "① 산업재해로 인한 사망자가 연간 2명 이상 발생한 사업장\n② 중대산업사고가 발생한 사업장",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 151,
                category: "필답형-재해분석",
                importance: 3,
                question: "산업재해 발생 시 조치 순서의 빈칸을 채우시오.\n산재 발생 → 긴급조치 → ( ① ) → ( ② ) → ( ③ ) → 대책실시계획 → 실시 → ( ④ )",
                hint: "필답형-재해분석",
                answer: "① 재해조사\n② 원인분석\n③ 대책수립\n④ 평가\n\n💡 암기팁: 산긴조 **원대대** 실평",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 152,
                category: "필답형-재해분석",
                importance: 3,
                question: "재해조사 시 유의사항 4가지는?",
                hint: "필답형-재해분석",
                answer: "① 피해자에 대한 구급조치를 최우선으로 한다.\n② 사실 수집을 위해 현장을 보존한다.\n③ 사실 이외의 추측은 참고자료로만 활용한다.\n④ 사람(인적), 사물(물적) 양면의 재해요인을 모두 도출한다.",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 153,
                category: "필답형-재해분석",
                importance: 3,
                question: "산업재해조사표에 작성해야 할 상해의 종류 4가지를 쓰시오.",
                hint: "골절타찰",
                answer: "① 골절\n② 절단\n③ 타박상\n④ 찰과상\n(그 외: 중독, 화상, 감전 등)\n\n💡 암기팁: **골절타찰**",
                mnemonic: "골절타찰",
                image: "📊"
            },
            {
                id: 154,
                category: "필답형-재해분석",
                importance: 3,
                question: "근로 불능상해의 종류 3가지를 설명하시오.",
                hint: "필답형-재해분석",
                answer: "① 영구 전노동불능상해: 노동기능을 완전히 상실 (신체장해 1~3급, 7500일)\n② 영구 일부노동불능상해: 신체 일부의 노동기능 상실 (신체장해 4~14급)\n③ 일시 전노동불능상해: 의사의 진단에 따라 일정 기간 노동에 종사할 수 없는 상해 (휴업재해)",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 155,
                category: "필답형-재해분석",
                importance: 3,
                question: "MSDS 작성 시 포함사항 16가지 중 중요한 항목 4가지는?",
                hint: "필답형-재해분석",
                answer: "① 유해성·위험성\n② 응급조치 요령\n③ 폭발·화재 시 대처방법\n④ 누출사고 시 대처방법",
                mnemonic: "필답형-재해분석",
                image: "📊"
            },
            {
                id: 156,
                category: "필답형-계산문제",
                importance: 5,
                question: "감응식 방호장치를 설치한 프레스에서 광선 차단 후 200ms 후에 슬라이드가 정지했다. 안전거리는?",
                hint: "필답형-계산문제",
                answer: "D = 1.6 × Tsm (Tsm: 최대정지시간)\nD = 1.6 × 200 = 320mm\n\n따라서 최소 320mm 이상이어야 한다.",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 157,
                category: "필답형-계산문제",
                importance: 5,
                question: "클러치 맞물림 개수 5개, 200 SPM 동력프레스의 양수조작식 방호장치 안전거리를 구하시오.",
                hint: "필답형-계산문제",
                answer: "Ts = (1/2 + 1/클러치 개수) × (60000 / SPM)\nTs = (1/2 + 1/5) × (60000 / 200) = 0.7 × 300 = 210ms\nD = 1.6 × Ts = 1.6 × 210 = 336mm",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 158,
                category: "필답형-계산문제",
                importance: 5,
                question: "1000rpm으로 회전하는 지름 50cm 롤러기의 표면속도(m/min)와 급정지거리(cm)를 구하시오.",
                hint: "필답형-계산문제",
                answer: "① 표면속도(V) = π × D × N = 3.14 × 0.5m × 1000/min ≈ 1570 m/min\n② 속도가 30m/min 이상이므로 급정지거리는 원주의 1/2.5 이내\n   급정지거리 = (π × D) / 2.5 = (3.14 × 50cm) / 2.5 ≈ 62.8 cm",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 159,
                category: "필답형-계산문제",
                importance: 5,
                question: "절단하중 2,000kg인 와이어로프가 화물 하중을 직접 지지할 때 최대 허용 하중은?",
                hint: "필답형-계산문제",
                answer: "안전계수 = 절단하중 / 최대하중\n5 = 2000kg / 최대하중\n최대하중 = 400kg",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 160,
                category: "필답형-계산문제",
                importance: 5,
                question: "980kg 화물을 두줄걸이, 상부각도 90°로 들어올릴 때, 와이어로프 한 가닥에 걸리는 하중은?",
                hint: "필답형-계산문제",
                answer: "T = (W/N) / cos(θ/2)\nW: 화물 중량(980kg)\nN: 줄 수(2)\nθ: 상부각도(90°)\n\nT = (980 / 2) / cos(90°/2)\n  = 490 / cos(45°)\n  ≈ 692.96kg",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 161,
                category: "필답형-계산문제",
                importance: 5,
                question: "전압 100V, 인체저항 5,000Ω일 때, 물에 젖은 손으로 접촉 시 심실세동전류(mA)와 통전시간(sec)을 구하시오. (달지엘식 적용)",
                hint: "필답형-계산문제",
                answer: "① 인체저항(젖은손) = 5000 / 25 = 200Ω\n   심실세동전류(I) = V/R = 100V / 200Ω = 0.5A = **500mA**\n② 통전시간(t): I = 165 / √t  (I는 mA 단위)\n   √t = 165 / 500 = 0.33\n   t = 0.33² = 0.1089 ≈ **0.109 sec**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 162,
                category: "필답형-계산문제",
                importance: 5,
                question: "전압 300V, 인체저항 1,000Ω일 때, 물에 젖은 손으로 접촉 시 심실세동전류(mA)와 통전시간(ms)을 구하시오.",
                hint: "필답형-계산문제",
                answer: "① 인체저항(젖은손) = 1000 / 25 = 40Ω\n   심실세동전류(I) = 300V / 40Ω = 7.5A = **7,500mA**\n② 통전시간(t): √t = 165 / 7500 = 0.022\n   t = 0.022² = 0.000484 sec ≈ **0.48 ms**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 163,
                category: "필답형-계산문제",
                importance: 5,
                question: "달지엘식을 이용하여 심실세동을 일으킬 수 있는 에너지(J)를 구하시오. (통전시간 1초, 인체저항 500Ω)",
                hint: "필답형-계산문제",
                answer: "I = 165 / √t = 165 / √1 = 165mA = 0.165A\n에너지(E) = I² × R × t\n         = (0.165)² × 500 × 1\n         ≈ **13.61 J**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 164,
                category: "필답형-계산문제",
                importance: 5,
                question: "아세틸렌(LEL 2.5%, UEL 81%)의 위험도와, 아세틸렌 70%와 클로로벤젠(LEL 1.3%) 30% 혼합가스의 폭발하한계를 구하시오.",
                hint: "필답형-계산문제",
                answer: "① 위험도 = (UEL - LEL) / LEL = (81 - 2.5) / 2.5 = **31.4**\n② 혼합가스 LEL (르샤틀리에 법칙):\n   100 / Lmix = (70 / 2.5) + (30 / 1.3)\n   100 / Lmix = 28 + 23.08 = 51.08\n   Lmix = 100 / 51.08 ≈ **1.96 vol%**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 165,
                category: "필답형-계산문제",
                importance: 5,
                question: "부탄(C₄H₁₀, LEL 1.6 vol%)의 완전연소 화학반응식을 쓰고, 최소산소농도(MOC)를 구하시오.",
                hint: "필답형-계산문제",
                answer: "• 화학반응식: **2C₄H₁₀ + 13O₂ → 8CO₂ + 10H₂O**\n• MOC = LEL × (산소 몰수 / 연료 몰수)\n        = 1.6 × (13 / 2)\n        = **10.4 vol%**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 166,
                category: "필답형-계산문제",
                importance: 5,
                question: "상시근로자 500명, 연간근로시간 3,000시간/인, 재해 3건 발생 시 도수율은?",
                hint: "필답형-계산문제",
                answer: "도수율 = (재해건수 / 연총근로시간수) × 1,000,000\n       = (3 / (500 × 3000)) × 1,000,000\n       = **2**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 167,
                category: "필답형-계산문제",
                importance: 5,
                question: "상시근로자 400명, 1일 8시간 연 250일 근무, 총 근로손실일수 100일일 때 강도율은?",
                hint: "필답형-계산문제",
                answer: "강도율 = (총근로손실일수 / 연총근로시간수) × 1,000\n       = (100 / (400 × 8 × 250)) × 1,000\n       = **0.125**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 168,
                category: "필답형-계산문제",
                importance: 5,
                question: "도수율 12, 재해 12건, 휴업일수 146일(연 250일 근무)일 때 강도율은?",
                hint: "필답형-계산문제",
                answer: "① 연총근로시간수 = (12 / 12) × 1,000,000 = 1,000,000 시간\n② 근로손실일수 = 146 × (250 / 365) ≈ 100일\n③ 강도율 = (100 / 1,000,000) × 1,000 = **0.1**",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 169,
                category: "필답형-계산문제",
                importance: 5,
                question: "연천인율, 평균강도율, 종합재해지수(FSI) 공식을 쓰시오.",
                hint: "필답형-계산문제",
                answer: "• 연천인율 = (연간 재해자수 / 연평균 근로자수) × 1,000\n• 평균강도율 = (강도율 / 도수율) × 1,000\n• 종합재해지수(FSI) = √ (도수율 × 강도율)",
                mnemonic: "필답형-계산문제",
                image: "🧮"
            },
            {
                id: 170,
                category: "작업형-방호장치",
                importance: 4,
                question: "컨베이어, 선반, 휴대용 연삭기에 필요한 방호장치를 각각 1개씩 쓰시오.",
                hint: "작업형-방호장치",
                answer: "• 컨베이어: 비상정지장치, 덮개 또는 울, 건널다리\n• 선반: 덮개(쉴드), 척 커버, 칩 브레이커, 브레이크\n• 휴대용 연삭기: 덮개",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 171,
                category: "작업형-방호장치",
                importance: 4,
                question: "[휴대용 연삭기 작업 영상] ①방호장치와 안전한 ②덮개 설치각도를 쓰시오.",
                hint: "작업형-방호장치",
                answer: "① 방호장치: 덮개\n② 설치각도: 180° 이상",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 172,
                category: "작업형-방호장치",
                importance: 4,
                question: "[프레스 작업 영상] 프레스 방호장치 4가지와, 영상에서 작업자가 무력화시킨 방호장치 이름은?",
                hint: "작업형-방호장치",
                answer: "• 프레스 방호장치 4가지: 광전자식, 양수조작식, 수인식, 손쳐내기식\n• 무력화시킨 방호장치: 광전자식 방호장치",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 173,
                category: "작업형-방호장치",
                importance: 4,
                question: "급정지장치가 없는 프레스에 설치해야 하는 방호장치 4가지는?",
                hint: "작업형-방호장치",
                answer: "• 양수기동식\n• 게이트가드식\n• 손쳐내기식\n• 수인식",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 174,
                category: "작업형-방호장치",
                importance: 4,
                question: "[광전자식 방호장치 영상] 해당 방호장치의 명칭과 작동형태를 쓰시오.",
                hint: "작업형-방호장치",
                answer: "• 명칭: 광전자식 방호장치\n• 작동형태: 슬라이드 하강 중 작업자의 신체 일부가 광선을 차단하면, 자동적으로 슬라이드를 급정지시키는 접근반응형 방호장치",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 175,
                category: "작업형-방호장치",
                importance: 4,
                question: "[롤러기 사고 영상] 롤러기 급정지장치 종류를 조작부 위치에 따라 3가지로 분류하시오.",
                hint: "작업형-방호장치",
                answer: "① 손 조작식: 밑면에서 1.8m 이내\n② 복부 조작식: 밑면에서 0.8m 이상 ~ 1.1m 이내\n③ 무릎 조작식: 밑면에서 0.4m 이상 ~ 0.6m 이내",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 176,
                category: "작업형-방호장치",
                importance: 4,
                question: "[동력식 수동대패기 영상] 방호장치의 명칭, 종류, 설치방법 3가지는?",
                hint: "작업형-방호장치",
                answer: "• 명칭: 날 접촉예방장치\n• 종류: 가동식, 고정식\n• 설치방법:\n  ① 덮개는 가공재 절삭부분 외의 날부분을 완전히 덮을 것\n  ② 고정 볼트, 핀 등은 견고하게 부착할 것\n  ③ 가동식은 절삭하지 않을 때 덮개가 테이블면까지 내려가는 구조일 것",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 177,
                category: "작업형-방호장치",
                importance: 4,
                question: "[둥근톱 영상] 고정식 접촉예방장치 설치 시 ①하단과 가공재 사이 간격, ②하단과 테이블 사이 높이는?",
                hint: "작업형-방호장치",
                answer: "① 하단과 가공재 사이 간격: 최대 8mm\n② 하단과 테이블 상부 사이 높이: 최대 25mm",
                mnemonic: "작업형-방호장치",
                image: "🛡️"
            },
            {
                id: 178,
                category: "작업형-위험점",
                importance: 4,
                question: "[선반 샌드페이퍼 작업 영상] 작업자의 손이 말려 들어가는 부분에서 형성되는 ①위험점, ②정의를 쓰시오.",
                hint: "작업형-위험점",
                answer: "① 위험점: 회전말림점\n② 정의: 회전하는 기계의 운동부 자체에 작업복 등이 말려들 위험이 존재하는 점",
                mnemonic: "작업형-위험점",
                image: "📚"
            },
            {
                id: 179,
                category: "작업형-위험점",
                importance: 4,
                question: "[슬라이스 기계 영상] 무채를 썰어내는 부분에서 형성되는 ①위험점과 ②정의를 쓰시오.",
                hint: "작업형-위험점",
                answer: "① 위험점: 절단점\n② 정의: 회전하는 운동부 자체의 위험에서 초래되는 위험점",
                mnemonic: "작업형-위험점",
                image: "📚"
            },
            {
                id: 180,
                category: "작업형-위험점",
                importance: 4,
                question: "[인쇄 윤전기 청소 영상] 롤러기 사이에서 발생한 재해의 ①위험점, ②정의를 쓰시오.",
                hint: "작업형-위험점",
                answer: "① 위험점: 물림점\n② 정의: 회전하는 두 개의 회전체에 물려 들어갈 위험이 있는 점",
                mnemonic: "작업형-위험점",
                image: "📚"
            },
            {
                id: 181,
                category: "작업형-위험점",
                importance: 4,
                question: "[버스 정비 영상] 버스 하부 회전 샤프트에서 발생할 수 있는 위험점과, 재해 예방을 위한 미준수사항 3가지는?",
                hint: "작업형-위험점",
                answer: "• 위험점: 회전말림점\n• 미준수사항:\n  ① 정비작업 중 표지판 미설치\n  ② 작업지휘자 또는 감시인 미배치\n  ③ 기동장치에 잠금장치 미설치 및 키 별도보관 미실시",
                mnemonic: "작업형-위험점",
                image: "📚"
            },
            {
                id: 182,
                category: "작업형-기계안전",
                importance: 4,
                question: "[컨베이어 파지 운반 영상] 위험요인 3가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 작업자가 안전모를 착용하지 않음\n② 파지를 작업자 머리 위로 운반하고 있음\n③ 작업자가 불안정한 컨베이어 위에서 작업을 하고 있음",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 183,
                category: "작업형-기계안전",
                importance: 4,
                question: "[컨베이어 수리 영상] 컨베이어 수리 중 재해 위험요인 2가지를 서술하시오.",
                hint: "작업형-기계안전",
                answer: "① 작업지휘자 또는 감시인을 배치하지 않고 단독 작업을 함\n② 기동 스위치에 '점검 중', '수리 중' 표지판을 부착하지 않고 잠금장치를 하지 않음",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 184,
                category: "작업형-기계안전",
                importance: 4,
                question: "[컨베이어 적재 영상] 잘못된 작업방법 2가지와 재해 발생 시 조치사항 1가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "• 잘못된 작업방법:\n  ① 작업자가 컨베이어 위에서 불안전한 자세로 작업함\n  ② 컨베이어에 덮개 또는 울 등 낙하방지 조치가 없음\n• 재해 발생 시 조치사항: 즉시 해당 기계의 운전을 정지시킴",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 185,
                category: "작업형-기계안전",
                importance: 4,
                question: "[프레스 작업 영상] 프레스 작업 중 위험요소 3가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 이물질 제거 시 전원을 차단하지 않고 수작업을 함\n② 페달에 U자형 덮개 등 방호장치가 없음\n③ 이물질 제거 시 전용 공구를 사용하지 않음",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 186,
                category: "작업형-기계안전",
                importance: 4,
                question: "[프레스 작업 영상] 영상 속 재해를 예방하기 위한 조치사항 2가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 프레스 페달에 U자형 덮개를 씌움\n② 금형에 붙은 이물질 제거 시 전용 공구를 사용함",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 187,
                category: "작업형-기계안전",
                importance: 4,
                question: "프레스 금형 교체 작업 시 안전상 점검사항 4가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 안전블록의 설치상태 점검\n② 슬라이드 하강 방지 조치(안전블록과 슬라이드 인터록 상태 점검)\n③ 동력차단 및 기동스위치에 '점검 중' 경고표지 부착상태 점검\n④ 기동스위치의 키는 분리하여 별도 보관하는지 확인",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 188,
                category: "작업형-기계안전",
                importance: 4,
                question: "[전기드릴 작업 영상] 위험방지방안 2가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 회전하는 기계 작업 시에는 장갑 착용을 금지한다.\n② 칩 비산 방지를 위해 안전덮개를 설치하거나 보안경을 착용한다.",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 189,
                category: "작업형-기계안전",
                importance: 4,
                question: "[어두운 장소 컨베이어 점검 영상] 작업시작 전 조치사항 2가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 점검 전 반드시 전원을 차단하고, 통전금지 표지판 및 잠금장치를 설치한다.\n② 작업장소의 조도를 확보한다. (적정 조명 확보)",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 190,
                category: "작업형-기계안전",
                importance: 4,
                question: "[띠톱 작업 영상] 작업자의 복장과 행동에서 위험요인 3가지를 찾아 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① (파편 비산 위험) 보안경 미착용\n② (손 베임 위험) 절단된 강재를 맨손(장갑)으로 제거\n③ (손 베임 위험) 띠톱에 낀 이물질 제거 시 전원 미차단",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 191,
                category: "작업형-기계안전",
                importance: 4,
                question: "[롤러기 점검 영상] 위험요인과 안전대책을 각각 2가지씩 쓰시오.",
                hint: "작업형-기계안전",
                answer: "• 위험요인:\n  ① 점검 시 기계의 전원을 차단하지 않음\n  ② 회전체 점검 시 면장갑을 착용함\n• 안전대책:\n  ① 점검 시 반드시 기계의 전원을 차단하고 표지판 부착\n  ② 롤러기 등 회전체 작업 시 면장갑 착용 금지",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 192,
                category: "작업형-기계안전",
                importance: 4,
                question: "[섬유기계 점검 영상] 핵심 위험요인 3가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 점검 시 기계의 전원을 차단하지 않음\n② 회전체 점검 시 면장갑을 착용함\n③ 기계에 연동장치(인터록) 등 안전장치가 없음",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 193,
                category: "작업형-기계안전",
                importance: 4,
                question: "[원형톱 대리석 절단 영상] 불안전한 행동 3가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 원형톱 점검 시 기계의 전원을 차단하지 않음\n② 원형톱에 덮개 등 방호장치가 설치되어 있지 않음\n③ 가동 중인 위험한 기계 위로 이동함",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 194,
                category: "작업형-기계안전",
                importance: 4,
                question: "[대리석 연마 영상] 위험요인 3가지를 쓰시오.",
                hint: "작업형-기계안전",
                answer: "① 연삭작업 시 보안경 미착용\n② 분진 발생 작업에 방진마스크 미착용\n③ 연삭기에 방호장치(덮개) 미설치",
                mnemonic: "작업형-기계안전",
                image: "⚙️"
            },
            {
                id: 195,
                category: "작업형-양중작업",
                importance: 4,
                question: "[천장크레인 사고 영상] 가)이 기계의 방호장치 3가지, 나)안전검사 주기 빈칸을 채우시오.",
                hint: "작업형-양중작업",
                answer: "가) 방호장치: ① 과부하방지장치 ② 권과방지장치 ③ 비상정지장치\n나) 안전검사 주기: 최초 (① 3년) 이내, 이후 매 (② 2년) 마다",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 196,
                category: "작업형-양중작업",
                importance: 4,
                question: "[이동식크레인 작업 영상] 이동식크레인 운전자의 준수사항 3가지를 쓰시오.",
                hint: "작업형-양중작업",
                answer: "① 일정한 신호방법을 정하고 신호수의 신호에 따라 작업할 것\n② 화물을 매단 채 운전석을 이탈하지 말 것\n③ 작업 종료 후 크레인의 동력을 차단하고 정지 조치할 것",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 197,
                category: "작업형-양중작업",
                importance: 4,
                question: "[이동식크레인 작업 영상] 화물의 낙하·비래 위험을 방지하기 위한 사전 조치사항 3가지를 쓰시오.",
                hint: "작업형-양중작업",
                answer: "① 작업 반경 내 관계 근로자 외 출입금지\n② 와이어로프 및 슬링벨트의 안전상태 점검\n③ 훅의 해지장치 및 안전상태 점검",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 198,
                category: "작업형-양중작업",
                importance: 4,
                question: "[마그네틱 크레인 사고 영상] 위험요인 3가지를 쓰시오.",
                hint: "작업형-양중작업",
                answer: "① 작업자가 안전모 등 개인보호구를 미착용함\n② 훅 해지장치가 없어 슬링 와이어의 이탈 위험이 있음\n③ 조정장치 전선 피복이 벗겨져 있어 감전 위험이 있음",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 199,
                category: "작업형-양중작업",
                importance: 4,
                question: "[타워크레인 인양 영상] 크레인 작업 시의 준수사항 3가지를 쓰시오.",
                hint: "작업형-양중작업",
                answer: "① 인양할 화물을 바닥에서 끌어당기거나 밀어내는 작업을 하지 않을 것\n② 고정된 물체를 직접 분리·제거하는 작업을 하지 않을 것\n③ 인양 중인 화물이 작업자의 머리 위로 통과하지 않도록 근로자 출입을 통제할 것",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 200,
                category: "작업형-양중작업",
                importance: 4,
                question: "[타워크레인 낙하 사고 영상] 타워크레인 작업 시 위험요인 3가지를 쓰시오.",
                hint: "작업형-양중작업",
                answer: "① 인양 중인 화물 아래로 작업자가 출입하도록 방치함 (출입통제 미실시)\n② 줄걸이 와이어로프의 체결상태 등을 점검하지 않음\n③ 화물의 흔들림을 방지하기 위한 보조로프를 설치하지 않음",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 201,
                category: "작업형-양중작업",
                importance: 4,
                question: "[무너진 타워크레인 영상] 작업을 중지해야 하는 순간풍속 기준 (빈칸 채우기)\n- 설치·수리·점검·해체 작업 중지: ( )m/s\n- 운전 작업 중지: ( )m/s",
                hint: "작업형-양중작업",
                answer: "• 설치·수리·점검 또는 해체 작업을 중지하여야 하는 순간풍속은 **10m/s** 초과 시\n• 운전 작업을 중지하여야 하는 순간풍속은 **15m/s** 초과 시",
                mnemonic: "작업형-양중작업",
                image: "🏗️"
            },
            {
                id: 202,
                category: "작업형-전기안전",
                importance: 4,
                question: "[상수도 배관 용접 영상] 습윤장소에서 교류아크용접기에 부착해야 하는 안전장치는?",
                hint: "작업형-전기안전",
                answer: "자동전격방지기",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 203,
                category: "작업형-전기안전",
                importance: 4,
                question: "교류아크용접기용 자동전격방지기의 종류 4가지는?",
                hint: "작업형-전기안전",
                answer: "① 외장형\n② 내장형\n③ 저저항 시동형 (L형)\n④ 고저항 시동형 (H형)",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 204,
                category: "작업형-전기안전",
                importance: 4,
                question: "[강재 연마 감전사고 영상] 감전사고 예방을 위한 안전대책 2가지는?",
                hint: "작업형-전기안전",
                answer: "① 임시배선의 전로가 설치된 장소에 누전차단기를 설치한다.\n② 물 등 도전성이 높은 액체가 있는 습윤장소에서 사용하는 이동전선은 충분한 절연효과가 있는 것을 사용한다.",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 205,
                category: "작업형-전기안전",
                importance: 4,
                question: "[금형제조기 감전 영상] 재해 발생원인 2가지를 쓰시오.",
                hint: "작업형-전기안전",
                answer: "① 기계 가동 중에 전원을 차단하지 않고 청소작업을 실시함\n② 작업자가 내전압용 절연장갑 등 절연용 보호구를 착용하지 않음",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 206,
                category: "작업형-전기안전",
                importance: 4,
                question: "[그라인더 작업 감전 영상] 누전에 의한 감전위험 방지를 위해 누전차단기를 설치해야 하는 경우 3가지는?",
                hint: "작업형-전기안전",
                answer: "① 대지전압 150V 초과 이동형/휴대형 전기기계기구\n② 철판/철골 위 등 도전성 높은 장소에서 사용하는 이동형/휴대형 전기기계기구\n③ 물 등 도전성이 높은 액체가 있는 습윤장소에서 사용하는 저압용 전기기계기구",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 207,
                category: "작업형-전기안전",
                importance: 4,
                question: "[수중펌프 감전 영상] 작업자가 감전당한 원인을 피부저항과 관련하여 설명하시오.",
                hint: "작업형-전기안전",
                answer: "인체의 피부 저항은 물에 젖어 있을 경우 건조 시의 최대 1/25까지 감소하므로, 통전전류가 커져 쉽게 감전의 위험에 처하게 된다.",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 208,
                category: "작업형-전기안전",
                importance: 4,
                question: "[수중펌프 감전 영상] 해당 재해의 원인 3가지를 쓰시오.",
                hint: "작업형-전기안전",
                answer: "① 전선의 접속부위 절연상태를 점검하지 않음\n② 전선의 피복 또는 외장의 손상유무를 점검하지 않음\n③ 절연장갑 및 절연장화 등 절연용 보호구를 착용하지 않음",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 209,
                category: "작업형-전기안전",
                importance: 4,
                question: "[수중펌프 감전 영상] 접속부위 감전사고 예방대책 3가지를 쓰시오.",
                hint: "작업형-전기안전",
                answer: "① 모터와 전선의 이음새 부분을 작업 시작 전 확인\n② 수중 및 습윤 장소에서 사용하는 전선은 방수형(수밀성이 있는) 것을 사용\n③ 감전방지용 누전차단기 설치",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 210,
                category: "작업형-전기안전",
                importance: 4,
                question: "[수중펌프 감전 영상] 펌프 사용 전 점검사항 2가지는?",
                hint: "작업형-전기안전",
                answer: "① 접속부위 절연상태 점검\n② 전선의 피복 또는 외장의 손상유무 점검",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 211,
                category: "작업형-전기안전",
                importance: 4,
                question: "[배전반 작업 감전 영상] 위험요인 2가지를 서술하시오.",
                hint: "작업형-전기안전",
                answer: "① 작업 전 전원을 차단하지 않고, 통전금지 표지판을 부착하거나 감시인을 배치하지 않음\n② 작업자가 절연용 보호구를 착용하지 않음",
                mnemonic: "작업형-전기안전",
                image: "⚡"
            },
            {
                id: 212,
                category: "작업형-위험물질",
                importance: 4,
                question: "[화학물질 취급 영상] 유해물질(화학물질) 취급 시 일반적인 주의사항 3가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 유해물질에 대한 사전 조사 실시 및 작업수칙 수립\n② 적절한 보호구(방독마스크, 불침투성 보호복, 보호장갑 등) 지급 및 착용\n③ 국소배기장치 설치 등 실내 환기 실시 및 점화원 관리",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 213,
                category: "작업형-위험물질",
                importance: 4,
                question: "[퍼지작업 영상] 퍼지(치환) 작업의 목적을 가스의 종류에 따라 쓰시오.\n1. 가연성/지연성 가스\n2. 독성가스\n3. 불활성가스",
                hint: "작업형-위험물질",
                answer: "① 가연성/지연성 가스: 화재·폭발사고 및 산소결핍에 의한 질식사고 방지\n② 독성 가스: 중독사고 방지\n③ 불활성 가스: 산소결핍에 의한 질식사고 방지",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 214,
                category: "작업형-위험물질",
                importance: 4,
                question: "퍼지(Purge) 작업의 종류 4가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 사이펀 퍼지 (Siphon Purge)\n② 스위프 퍼지 (Sweep-through Purge)\n③ 진공 퍼지 (Vaccum Purge)\n④ 압력 퍼지 (Pressure Purge)",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 215,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 작업 영상] 밀폐공간 내 '적정공기' 수준에 대한 빈칸을 채우시오.",
                hint: "작업형-위험물질",
                answer: "• 산소농도: **18% 이상 ~ 23.5% 미만**\n• 이산화탄소 농도: **1.5% 미만**\n• 일산화탄소 농도: **30ppm 미만**\n• 황화수소 농도: **10ppm 미만**",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 216,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 그라인더 작업 영상] 위험요인 2가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 작업장 외부의 국소배기장치 전원부에 잠금장치가 없어 오조작 위험이 있음\n② 밀폐공간 외부에서 작업 상황을 감시하는 감시인을 배치하지 않았음",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 217,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 작업 영상] 작업 시 준수해야 할 안전수칙 3가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 작업 전 산소 및 유해가스 농도를 측정한다.\n② 작업 시작 전과 작업 중에 작업장을 적정공기 상태가 유지되도록 계속 환기한다.\n③ 환기가 불충분한 경우, 반드시 송기마스크 등 호흡용 보호구를 착용한다.",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 218,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 작업 영상] 밀폐공간 작업 시 사업주의 직무 3가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 밀폐공간 작업 프로그램을 수립하여 시행\n② 작업 전 산소 및 유해가스 농도 측정 및 평가\n③ 작업 중 작업장을 적정공기 상태가 유지되도록 환기 실시",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 219,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 작업 영상] 밀폐공간 작업 시 관리감독자의 직무 3가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 작업 시작 전 작업방법을 결정하고 근로자를 지휘\n② 작업 시작 전 작업장소의 공기가 적정한지 여부 확인\n③ 작업 시작 전 측정장비·환기장치·보호구 등을 점검",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 220,
                category: "작업형-위험물질",
                importance: 4,
                question: "[맨홀 구조 영상] 재해자 구조 시 구조자가 착용해야 하는 호흡용 보호구는?",
                hint: "작업형-위험물질",
                answer: "공기호흡기 또는 송기마스크",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 221,
                category: "작업형-위험물질",
                importance: 4,
                question: "[밀폐공간 질식사고 영상] 비상시 피난용구 3가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 공기호흡기 또는 송기마스크\n② 사다리\n③ 섬유로프 (구명줄)",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 222,
                category: "작업형-위험물질",
                importance: 4,
                question: "[특수 화학설비 가스누출 영상] 이상상태 조기 파악을 위한 장치(대책) 2가지를 쓰시오. (계측장비 제외)",
                hint: "작업형-위험물질",
                answer: "① 자동경보장치 설치\n② 감시인 배치",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 223,
                category: "작업형-위험물질",
                importance: 4,
                question: "[특수 화학설비 가스누출 영상] 이상상태 조기 파악을 위해 설치해야 할 계측장치 3가지는?",
                hint: "작업형-위험물질",
                answer: "① 온도계\n② 유량계\n③ 압력계",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 224,
                category: "작업형-위험물질",
                importance: 4,
                question: "[스팀배관 보수 영상] 배관작업 시 위험요인 2가지를 쓰시오.",
                hint: "작업형-위험물질",
                answer: "① 작업자가 보안경을 착용하지 않았음\n② 작업 전 배관 내부의 위험물질을 완전히 방출시키지 않음",
                mnemonic: "작업형-위험물질",
                image: "🧪"
            },
            {
                id: 225,
                category: "작업형-용접",
                importance: 4,
                question: "[용접 준비 중 감전 영상] 재해의 유형과 불안전한 요소 2가지를 쓰시오.",
                hint: "작업형-용접",
                answer: "• 재해 유형: 감전\n• 불안전한 요소:\n  ① 전원을 차단하지 않은 상태에서 케이블 결선 작업을 함\n  ② 절연용 보호구를 착용하지 않음",
                mnemonic: "작업형-용접",
                image: "🔥"
            },
            {
                id: 226,
                category: "작업형-용접",
                importance: 4,
                question: "[교류아크용접 영상] 작업 중 위험요인 3가지를 쓰시오.",
                hint: "작업형-용접",
                answer: "① 단독작업으로 감시인이 없어 비상상황 대처가 어려움\n② 작업현장 주변에 인화성 물질이 방치되어 화재 위험이 높음\n③ 용접불티 비산방지조치(방지덮개, 방화포 등)가 되어있지 않음",
                mnemonic: "작업형-용접",
                image: "🔥"
            },
            {
                id: 227,
                category: "작업형-용접",
                importance: 4,
                question: "[교류아크용접 영상] 작업자가 착용해야 할 보호구 4가지를 쓰시오.",
                hint: "작업형-용접",
                answer: "① 용접용 보안면\n② 용접용 안전장갑\n③ 용접용 앞치마 (방열복)\n④ 안전화",
                mnemonic: "작업형-용접",
                image: "🔥"
            },
            {
                id: 228,
                category: "작업형-용접",
                importance: 4,
                question: "[가스용접 사고 영상] 재해 위험요인 3가지를 쓰시오.",
                hint: "작업형-용접",
                answer: "① 가스용기를 눕혀진 상태로 작업함\n② 작업자가 용접용 보안면과 안전장갑을 미착용함\n③ 산소 용기의 호스를 잡아당겨 이동시켜 호스가 뽑힘",
                mnemonic: "작업형-용접",
                image: "🔥"
            },
            {
                id: 229,
                category: "작업형-보호구",
                importance: 4,
                question: "[용광로 작업 영상] 작업자가 착용해야 할 신체부위별 보호구 3가지는?",
                hint: "작업형-보호구",
                answer: "① 얼굴: 방열두건 및 보안면\n② 손: 방열장갑\n③ 신체: 방열복",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 230,
                category: "작업형-보호구",
                importance: 4,
                question: "[섬유공장 영상] 작업 시 필요한 보호구 3가지를 쓰시오.",
                hint: "작업형-보호구",
                answer: "① 방진마스크\n② 보안경\n③ 귀마개 또는 귀덮개",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 231,
                category: "작업형-보호구",
                importance: 4,
                question: "[에어 컴프레셔 분진 제거 영상] 작업자가 착용해야 할 보호구 2가지는?",
                hint: "작업형-보호구",
                answer: "① 방진마스크\n② 보안경 (비산물로부터 눈 보호)",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 232,
                category: "작업형-보호구",
                importance: 4,
                question: "[실험실 영상] 유해물질이 인체에 흡수되는 경로 3가지 중 2가지를 쓰시오.",
                hint: "작업형-보호구",
                answer: "① 호흡기 (흡입)\n② 소화기 (섭취)\n(③ 피부 (접촉))",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 233,
                category: "작업형-보호구",
                importance: 4,
                question: "[고속절단기 작업 영상] 작업자가 추가로 착용해야 할 보호구 3가지는?",
                hint: "작업형-보호구",
                answer: "• 보안경\n• 귀마개 또는 귀덮개\n• 방진마스크",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 234,
                category: "작업형-보호구",
                importance: 4,
                question: "[암모니아용 방독마스크 영상] ①명칭 ②형식 ③시험가스 ④흡수제 ⑤누설률 ⑥파과시간을 쓰시오.",
                hint: "작업형-보호구",
                answer: "① 명칭: 암모니아용 방독마스크\n② 형식: 격리식 전면형\n③ 시험가스: 암모니아 가스\n④ 흡수제: 큐프라마이트\n⑤ 누설률(직결식 전면형 기준): 0.05% 이하\n⑥ 파과시간(가스농도 0.5% 기준): 40분 이상",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 235,
                category: "작업형-보호구",
                importance: 4,
                question: "[직결식 반면형 방진마스크 영상] ①명칭, ②등급 3종류, ③사용가능 산소농도를 쓰시오.",
                hint: "작업형-보호구",
                answer: "① 명칭: 방진마스크 (직결식 반면형)\n② 등급: 특급, 1급, 2급\n③ 산소농도: 18% 이상",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 236,
                category: "작업형-보호구",
                importance: 4,
                question: "[페인트칠 작업 영상] 작업자가 착용해야 할 마스크와 흡수제 종류 3가지는?",
                hint: "작업형-보호구",
                answer: "• 마스크: 방독마스크\n• 흡수제: ① 활성탄 ② 큐프라마이트 ③ 소다라임",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 237,
                category: "작업형-보호구",
                importance: 4,
                question: "[각종 방독면 영상] 방독마스크의 시험성능 기준 3가지는?",
                hint: "작업형-보호구",
                answer: "① 안면부 흡기저항\n② 정화통의 제독능력\n③ 안면부 배기저항",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 238,
                category: "작업형-보호구",
                importance: 4,
                question: "[방독마스크 정화통 영상] 안전인증 표시 외 추가 표시사항 4가지는?",
                hint: "작업형-보호구",
                answer: "① 파과곡선도\n② 사용시간 기록카드\n③ 정화통 외부측면의 표시색\n④ 사용상 주의사항",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 239,
                category: "작업형-보호구",
                importance: 4,
                question: "[방진마스크 영상] 방진마스크의 일반적인 구조조건 3가지를 쓰시오.",
                hint: "작업형-보호구",
                answer: "① 착용 시 이상한 압박감이나 고통을 주지 않을 것\n② 전면형은 호흡 시에 투시부가 흐려지지 않을 것\n③ 안면부 여과식 마스크는 여과재를 안면에 밀착시킬 수 있을 것",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 240,
                category: "작업형-보호구",
                importance: 4,
                question: "[분리식 방진마스크 영상] 등급별 여과재 분진 등 포집효율을 쓰시오.",
                hint: "작업형-보호구",
                answer: "• 특급: 99.95% 이상\n• 1급: 94.0% 이상\n• 2급: 80.0% 이상",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 241,
                category: "작업형-보호구",
                importance: 4,
                question: "[브레이크 라이닝 세척 영상] 작업자가 착용해야 할 보호구 2가지는?",
                hint: "작업형-보호구",
                answer: "① 보안경\n② 불침투성 보호복 (또는 보호장화, 보호장갑)",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 242,
                category: "작업형-보호구",
                importance: 4,
                question: "[DMF 작업 영상] 피부 자극성 및 부식성 유해물질 취급 시 비치해야 할 보호장구 3가지는?",
                hint: "작업형-보호구",
                answer: "① 보안경\n② 불침투성 보호장갑\n③ 불침투성 보호복",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 243,
                category: "작업형-보호구",
                importance: 4,
                question: "[유기화합물 취급 영상] 작업 시 신체 부위별로 착용할 보호구는?",
                hint: "작업형-보호구",
                answer: "① 손: 불침투성 보호장갑\n② 눈: 보안경\n③ 피부(몸): 불침투성 보호복",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 244,
                category: "작업형-보호구",
                importance: 4,
                question: "[황산 누출 영상] 실험실에서 유해물질 취급 시 필요한 보호구 3가지는?",
                hint: "작업형-보호구",
                answer: "① 불침투성 보호장화\n② 불침투성 보호장갑\n③ 불침투성 보호복",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 245,
                category: "작업형-보호구",
                importance: 4,
                question: "[안전모 영상] 안전모의 세부 명칭 5가지는?",
                hint: "작업형-보호구",
                answer: "① 모체\n② 머리고정대\n③ 충격흡수재(라이너)\n④ 턱끈\n⑤ 모자챙(차양)",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 246,
                category: "작업형-보호구",
                importance: 4,
                question: "[안전모 영상] 안전모 시험성능기준 빈칸을 채우시오.\n- 내관통성: AE/ABE종 ( )mm, AB종 ( )mm\n- 충격흡수성: 최고전달충격력 ( )N 이하",
                hint: "작업형-보호구",
                answer: "- 내관통성: AE/ABE종 **9.5mm** 이하, A/AB종 **11.1mm** 이하\n- 충격흡수성: 최고전달충격력 **4,450N**을 초과하지 않을 것",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 247,
                category: "작업형-보호구",
                importance: 4,
                question: "[안전블록 영상] 이 장치의 명칭과 갖추어야 할 구조 2가지는?",
                hint: "작업형-보호구",
                answer: "• 명칭: 안전블록 (또는 추락방지대)\n• 구조:\n  ① 자동 잠김장치를 갖추고 있을 것\n  ② 부품은 부식방지 처리를 할 것",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 248,
                category: "작업형-보호구",
                importance: 4,
                question: "[안전대 부품 영상] 이 안전대의 명칭과 ①위쪽, ②아래쪽의 명칭은?",
                hint: "작업형-보호구",
                answer: "• 명칭: 죔줄 (Lanyard)\n• ① 위쪽: 카라비나 (Karabiner)\n• ② 아래쪽: 훅 (Hook)",
                mnemonic: "작업형-보호구",
                image: "😷"
            },
            {
                id: 249,
                category: "작업형-가설구조물",
                importance: 4,
                question: "[이동식비계 작업 영상] 위험요인 2가지를 쓰시오.",
                hint: "작업형-가설구조물",
                answer: "① 비계의 최상부 4면 중 2면에만 안전난간이 설치됨\n② 이동식비계의 바퀴를 고정하지 않아 작업 중 흔들림 (바퀴 고정장치 또는 아웃트리거 미설치)",
                mnemonic: "작업형-가설구조물",
                image: "🏗️"
            },
            {
                id: 250,
                category: "작업형-가설구조물",
                importance: 4,
                question: "[이동식비계 조립 영상] 조립 작업 시 준수사항 3가지를 쓰시오.",
                hint: "작업형-가설구조물",
                answer: "① 승강용 사다리는 견고하게 설치할 것\n② 비계의 최상부에서 작업하는 경우 안전난간을 설치할 것\n③ 작업발판의 최대적재하중은 250kg을 초과하지 않도록 할 것",
                mnemonic: "작업형-가설구조물",
                image: "🏗️"
            },
            {
                id: 251,
                category: "작업형-가설구조물",
                importance: 4,
                question: "[고소작업 이동식비계 영상] 높이 2m 이상 작업발판 설치 기준 빈칸을 채우시오.",
                hint: "작업형-가설구조물",
                answer: "• 비계 작업발판의 폭은 (**40cm**) 이상으로 하고,\n• 발판재료 간의 틈은 (**3cm**) 이하로 할 것",
                mnemonic: "작업형-가설구조물",
                image: "🏗️"
            },
            {
                id: 252,
                category: "작업형-가설구조물",
                importance: 4,
                question: "[비계 추락사고 영상] 높이 2m 이상 작업장소의 작업발판 설치기준 3가지는? (폭, 틈 제외)",
                hint: "작업형-가설구조물",
                answer: "① 발판 재료는 작업 시의 하중을 견딜 수 있도록 견고한 것으로 할 것\n② 추락의 위험이 있는 장소에는 안전난간을 설치할 것\n③ 작업발판의 지지물은 하중에 의하여 파괴될 우려가 없는 것을 사용할 것",
                mnemonic: "작업형-가설구조물",
                image: "🏗️"
            },
            {
                id: 253,
                category: "작업형-가설구조물",
                importance: 4,
                question: "[가설통로 추락 영상] 가설통로 설치 기준에 대한 빈칸을 채우시오.\n- 경사는 ( ) 이하\n- 경사가 ( ) 초과 시 미끄럼 방지 조치",
                hint: "작업형-가설구조물",
                answer: "• 설치 시 경사는 **30도 이하**로 하여야 하며,\n• 경사가 **15도**를 초과하는 경우에는 미끄러지지 아니하는 구조로 할 것",
                mnemonic: "작업형-가설구조물",
                image: "🏗️"
            },
            {
                id: 254,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[비계 낙하물 사고 영상] 재해 방지대책 2가지를 쓰시오.",
                hint: "작업형-추락/낙하",
                answer: "① 낙하물방지망 또는 방호선반 설치\n② 작업자의 개인보호구(안전모 등) 착용 철저",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 255,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[터널 발파 영상] 터널 건설작업 시 낙반 등에 의한 위험 방지 조치 2가지는?",
                hint: "작업형-추락/낙하",
                answer: "① 터널 지보공 및 록볼트의 설치\n② 부석(뜬돌)의 제거",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 256,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[교량 점검 영상] ①안전용품 이름, ②설치 기준 빈칸을 채우시오.",
                hint: "작업형-추락/낙하",
                answer: "• ① 안전용품: 추락방호망\n• ② 설치 기준: 작업면으로부터 망의 설치지점까지의 수직거리는 **10m**를 초과하지 않을 것",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 257,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[승강기 피트 추락 영상] 작업현장의 불안전한 요소 3가지는?",
                hint: "작업형-추락/낙하",
                answer: "① 안전대 부착설비 미설치 및 안전대 미착용\n② 추락방호망 미설치\n③ 작업발판 불량 (엉성하게 설치됨)",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 258,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[지붕 철골 작업 추락 영상] 재해 원인과 대책을 각각 2가지씩 쓰시오.",
                hint: "작업형-추락/낙하",
                answer: "• 원인:\n  ① 안전대 부착설비 미설치 및 안전대 미착용\n  ② 추락방호망 미설치\n• 대책:\n  ① 안전대 부착설비 설치 및 안전대 착용 철저\n  ② 추락방호망 설치",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 259,
                category: "작업형-추락/낙하",
                importance: 4,
                question: "[아파트 창틀 추락 영상] 추락사고의 원인 3가지를 쓰시오.",
                hint: "작업형-추락/낙하",
                answer: "① 안전난간 미설치\n② 안전대 미착용 및 안전대 부착설비 미설치\n③ 작업발판 주변 정리정돈 불량",
                mnemonic: "작업형-추락/낙하",
                image: "⬇️"
            },
            {
                id: 260,
                category: "작업형-하역운반",
                importance: 4,
                question: "[덤프트럭 수리 영상] 차량계 하역운반기계 수리 시 필요한 안전장치 2가지는?",
                hint: "작업형-하역운반",
                answer: "① 안전지지대\n② 안전블록",
                mnemonic: "작업형-하역운반",
                image: "🚛"
            },
            {
                id: 261,
                category: "작업형-하역운반",
                importance: 4,
                question: "[지게차 운행 영상] 지게차 운행 시 문제점 3가지를 쓰시오.",
                hint: "작업형-하역운반",
                answer: "① 과도한 화물 적재로 인한 전방 시야 확보 불충분\n② 유도자 미배치\n③ 화물이 불안정하게 적재되어 낙하 위험이 있음",
                mnemonic: "작업형-하역운반",
                image: "🚛"
            },
            {
                id: 262,
                category: "작업형-하역운반",
                importance: 4,
                question: "[지게차 운행 영상] 운전자의 시야가 심각하게 방해받을 경우의 조치 3가지는?",
                hint: "작업형-하역운반",
                answer: "① 하차하여 주변 안전을 확인한다.\n② 경적 및 경광등을 사용하여 주위에 주의를 환기시킨다.\n③ 유도자를 지정하여 배치하고 그의 신호에 따라 운행한다.\n(또는 후진으로 운행한다)",
                mnemonic: "작업형-하역운반",
                image: "🚛"
            },
            {
                id: 263,
                category: "작업형-하역운반",
                importance: 4,
                question: "[드럼통 운반 영상] 위험요인 2가지를 쓰시오.",
                hint: "작업형-하역운반",
                answer: "① 안전화 및 안전장갑 등 보호구 미착용\n② 중량물을 인력으로 무리하게 운반하여 허리부상(요통)의 위험이 있음",
                mnemonic: "작업형-하역운반",
                image: "🚛"
            },
            {
                id: 264,
                category: "작업형-토공",
                importance: 4,
                question: "[흙막이 지보공 점검 영상] 흙막이 지보공 설치 후 정기적으로 점검해야 할 사항 3가지는?",
                hint: "작업형-토공",
                answer: "① 부재의 손상·변형·부식·변위 및 탈락의 유무와 상태\n② 버팀대의 긴압 정도\n③ 부재의 접속부·부착부 및 교차부의 상태",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 265,
                category: "작업형-토공",
                importance: 4,
                question: "[터널 굴착 영상] 작업 시 근로자 입장에서의 위험요인 2가지는?",
                hint: "작업형-토공",
                answer: "① 터널 내부에 분진이 많이 발생함에도 방진마스크를 착용하지 않음\n② 분진 제거를 위한 환기 또는 살수 등의 대책이 마련되지 않음",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 266,
                category: "작업형-토공",
                importance: 4,
                question: "[거푸집 해체 사고 영상] 사고 예방을 위해 준수해야 할 사항 3가지는?",
                hint: "작업형-토공",
                answer: "① 해당 작업 구역 내 관계자 외 출입을 금지시킬 것\n② 비, 눈 등 악천후 시에는 해당 작업을 중지할 것\n③ 재료, 기구, 공구 등을 올리거나 내릴 때는 달줄·달포대 등을 사용하도록 할 것",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 267,
                category: "작업형-토공",
                importance: 4,
                question: "[콘크리트 타설 영상] 콘크리트 타설작업 시 안전작업수칙 3가지를 쓰시오.",
                hint: "작업형-토공",
                answer: "① 편심이 발생하지 않도록 골고루 분산하여 타설할 것\n② 콘크리트 양생기간을 준수하여 거푸집 동바리 등을 해체할 것\n③ 콘크리트 타설 중 거푸집 붕괴 위험 시 충분한 보강조치를 할 것",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 268,
                category: "작업형-토공",
                importance: 4,
                question: "[터널 굴착 영상] 터널 굴착공사 시 사용되는 계측방법 종류 3가지는?",
                hint: "작업형-토공",
                answer: "① 내공변위 측정\n② 천단침하 측정\n③ 지중변위 측정",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 269,
                category: "작업형-토공",
                importance: 4,
                question: "[항타기 영상] 콘크리트 파일 권상용 항타기 설치 기준 빈칸을 채우시오.\n- 드럼과 첫 번째 도르래 축간 거리: 드럼 폭의 ( )배 이상\n- 도르래는 드럼 ( )을 지나고 축과 ( )상에 위치",
                hint: "작업형-토공",
                answer: "• 권상장치 드럼과 첫 번째 도르래의 축 간의 거리는 권상장치 드럼 폭의 **15배** 이상으로 해야 한다.\n• 도르래는 권상장치의 드럼 **중심**을 지나야 하며 축과 **수직면** 상에 있어야 한다.",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 270,
                category: "작업형-토공",
                importance: 4,
                question: "[항타기 전도사고 영상] 항타기·항발기 조립 시 점검사항 3가지는?",
                hint: "작업형-토공",
                answer: "① 본체 연결부의 풀림 또는 손상 유무\n② 권상용 와이어로프·드럼 및 도르래의 부착상태 이상 유무\n③ 권상장치의 브레이크 및 쐐기장치 기능의 이상 유무",
                mnemonic: "작업형-토공",
                image: "⛏️"
            },
            {
                id: 271,
                category: "작업형-법규 외",
                importance: 4,
                question: "[중량물 취급 영상] 중량물을 취급하는 경우 작업계획서에 포함할 내용 3가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 작업개요 및 중량물 제원\n② 장비 등 기계 제원\n③ 재해예방대책 (추락, 낙하, 전도, 협착, 붕괴 위험 예방대책)",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 272,
                category: "작업형-법규 외",
                importance: 4,
                question: "[지게차 운행 영상] 지게차 운행 시 작업계획서에 포함될 사항 2가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 운행경로 및 작업방법\n② 추락·낙하·전도·협착 및 붕괴 등의 위험 예방대책",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 273,
                category: "작업형-법규 외",
                importance: 4,
                question: "[크레인 양중작업 영상] 작업 시작 전 점검사항 3가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 권과방지장치·브레이크·클러치 및 운전장치의 기능\n② 주행로의 상측 및 트롤리가 횡행하는 레일의 상태\n③ 와이어로프가 통하고 있는 곳의 상태",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 274,
                category: "작업형-법규 외",
                importance: 4,
                question: "[이동식크레인 작업 영상] 작업 시작 전 점검사항 3가지를 쓰시오. (경보장치 제외)",
                hint: "작업형-법규 외",
                answer: "① 권과방지장치나 그 밖의 경보장치의 기능\n② 브레이크·클러치 및 조정장치의 기능\n③ 와이어로프가 통하고 있는 곳 및 작업장소의 지반상태",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 275,
                category: "작업형-법규 외",
                importance: 4,
                question: "[리프트 용접 영상] 작업 시작 전 점검사항 2가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 방호장치·브레이크 및 클러치의 기능\n② 와이어로프가 통하고 있는 곳의 상태",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 276,
                category: "작업형-법규 외",
                importance: 4,
                question: "[프레스 점검 영상] 프레스 작업 시작 전 점검사항 3가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 클러치 및 브레이크의 기능\n② 프레스의 금형 및 고정볼트 상태\n③ 방호장치의 기능",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 277,
                category: "작업형-법규 외",
                importance: 4,
                question: "[컨베이어 재해 영상] 컨베이어 작업 시작 전 점검사항 3가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 원동기 및 풀리 기능의 이상 유무\n② 이탈 등의 방지장치 기능의 이상 유무\n③ 비상정지장치 기능의 이상 유무",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 278,
                category: "작업형-법규 외",
                importance: 4,
                question: "[지게차 점검 영상] 지게차 작업 시작 전 점검사항 3가지를 쓰시오.",
                hint: "작업형-법규 외",
                answer: "① 제동장치 및 조종장치 기능의 이상 유무\n② 하역장치 및 유압장치 기능의 이상 유무\n③ 바퀴의 이상 유무",
                mnemonic: "작업형-법규 외",
                image: "📚"
            },
            {
                id: 279,
                category: "작업형-재해조사",
                importance: 4,
                question: "[배전반 점검 감전사고 영상] 해당 사고의 ①재해유형과 ②가해물을 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 재해유형: 감전 (전류접촉)\n② 가해물: 충전전로 (전류)",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 280,
                category: "작업형-재해조사",
                importance: 4,
                question: "[목재 톱질 중 넘어짐 영상] ①재해형태, ②가해물, ③기인물을 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 재해형태: 전도 (넘어짐)\n② 가해물: 바닥\n③ 기인물: 작업발판",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 281,
                category: "작업형-재해조사",
                importance: 4,
                question: "[봉강 연마 중 칩 비래 영상] ①기인물과, ②파편 비래 위험 대비를 위한 방호장치명은?",
                hint: "작업형-재해조사",
                answer: "① 기인물: 탁상용 연삭기\n② 방호장치명: 칩 비산방지 투명판",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 282,
                category: "작업형-재해조사",
                importance: 4,
                question: "[아파트 창틀 추락 영상] ①추락사고 원인 3가지, ②기인물, ③가해물을 쓰시오.",
                hint: "작업형-재해조사",
                answer: "• 원인: ①안전난간 미설치 ②안전대 미착용 및 부착설비 미설치 ③주변 정리정돈 불량\n• 기인물: 작업발판\n• 가해물: 바닥",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 283,
                category: "작업형-재해조사",
                importance: 4,
                question: "[교류아크용접 재해 영상] ①기인물, ②눈 보호구, ③감전 보호구를 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 기인물: 교류아크용접기\n② 눈 보호구: 용접용 보안면\n③ 감전 보호구: 절연용 보호장갑(용접용 안전장갑)",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 284,
                category: "작업형-재해조사",
                importance: 4,
                question: "[슬라이스 기계 점검 영상] ①기인물과 ②가해물을 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 기인물: 슬라이스 기계\n② 가해물: 슬라이스 기계 칼날",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 285,
                category: "작업형-재해조사",
                importance: 4,
                question: "[유해물질 취급 영상] ①재해형태와 ②그 정의를 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 재해형태: 유해·위험물질 노출·접촉\n② 정의: 유해·위험물질에 노출, 접촉 또는 흡입하였거나 독성동물에 쏘이거나 물린 경우",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 286,
                category: "작업형-재해조사",
                importance: 4,
                question: "[스팀 누출 영상] 해당 재해 발생형태는?",
                hint: "작업형-재해조사",
                answer: "이상온도 노출·접촉 (에 의한 화상)",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 287,
                category: "작업형-재해조사",
                importance: 4,
                question: "[컨베이어 끼임 사고 영상] ①위험점, ②재해형태, ③재해형태의 정의를 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 위험점: 끼임점\n② 재해형태: 협착 (끼임)\n③ 정의: 두 물체 사이의 움직임에 의하여 일어난 사고 (ex: 회전부와 고정체 사이 끼임)",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 288,
                category: "작업형-재해조사",
                importance: 4,
                question: "[가설전선 감전 사고 영상] ①재해형태와 ②정의를 쓰시오.",
                hint: "작업형-재해조사",
                answer: "① 재해형태: 감전 (전류접촉)\n② 정의: 전기접촉이나 방전에 의해 사람이 충격을 받는 것",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            },
            {
                id: 289,
                category: "작업형-재해조사",
                importance: 4,
                question: "[전동권선기 점검 중 감전 영상] 재해의 유형과 재해의 원인 2가지를 쓰시오.",
                hint: "작업형-재해조사",
                answer: "• 재해 유형: 감전 (전류접촉)\n• 재해 원인: ①전원 미차단 ②절연용 보호구 미착용",
                mnemonic: "작업형-재해조사",
                image: "🔍"
            }
        ];

        // 추가 문제 데이터 (51~380번)
        const additionalCards = [
            {
                id: 51,
                category: "법령",
                importance: 4,
                question: "특수건강진단 대상 유해인자 중 물리적 인자 5가지를 쓰시오.",
                hint: "소음, 진동",
                answer: "1. 소음\n2. 진동\n3. 방사선\n4. 이상기압\n5. 이상온도\n6. 자외선\n7. 적외선",
                mnemonic: "소진방이이자적",
                image: "🔬"
            },
            {
                id: 52,
                category: "계산",
                importance: 3,
                question: "천재도수율 계산식을 쓰시오.",
                hint: "천인율 × 도수율",
                answer: "천재도수율 = 천인율 × 도수율 / 1000\n천인율 = (재해자수 / 평균근로자수) × 1000",
                mnemonic: "천재 = 천인 × 도수 / 1000",
                image: "📊"
            },
            {
                id: 53,
                category: "수치",
                importance: 5,
                question: "사다리 설치기준을 쓰시오.",
                hint: "75도, 60cm 돌출",
                answer: "1. 설치각도: 75도\n2. 발판 간격: 30cm 이하\n3. 돌출길이: 60cm 이상\n4. 너비: 30cm 이상",
                mnemonic: "각75 간30 돌60 너30",
                image: "🪜"
            },
            {
                id: 54,
                category: "크레인",
                importance: 4,
                question: "호이스트 안전장치를 쓰시오.",
                hint: "권과방지장치",
                answer: "1. 권과방지장치\n2. 비상정지장치\n3. 과부하방지장치\n4. 리미트스위치",
                mnemonic: "권비과리",
                image: "⚙️"
            },
            {
                id: 55,
                category: "비계",
                importance: 4,
                question: "작업발판 설치 면제 작업을 쓰시오.",
                hint: "2m 미만",
                answer: "1. 높이 2m 미만 작업\n2. 장선 등 설치작업\n3. 선박블록 도장작업",
                mnemonic: "2m미만 + 장선 + 선박도장",
                image: "🏗️"
            },
            {
                id: 56,
                category: "밀폐공간",
                importance: 4,
                question: "밀폐공간 보호구를 쓰시오.",
                hint: "송기마스크",
                answer: "1. 송기마스크\n2. 공기호흡기\n3. 안전대 및 구명밧줄\n4. 사다리",
                mnemonic: "송공안사",
                image: "🛡️"
            },
            {
                id: 57,
                category: "법령",
                importance: 5,
                question: "작업중지권 발동 요건을 쓰시오.",
                hint: "산업재해 급박한 위험",
                answer: "산업재해가 발생할 급박한 위험이 있을 때",
                mnemonic: "급박한 위험",
                image: "🛑"
            },
            {
                id: 58,
                category: "수치",
                importance: 4,
                question: "지게차 작업 시 준수사항을 쓰시오.",
                hint: "좌석안전띠",
                answer: "1. 좌석안전띠 착용\n2. 전조등 및 후미등 점등\n3. 제한속도 준수\n4. 급정지·급출발 금지",
                mnemonic: "좌전제급",
                image: "🚛"
            },
            {
                id: 59,
                category: "전기",
                importance: 4,
                question: "접지공사 종류를 쓰시오.",
                hint: "제1종, 제2종, 제3종",
                answer: "1. 제1종: 접지저항 10Ω 이하\n2. 제2종: 접지저항 50Ω 이하\n3. 제3종: 접지저항 100Ω 이하\n4. 특별제3종: 접지저항 10Ω 이하",
                mnemonic: "1종10 2종50 3종100 특3종10",
                image: "🔌"
            },
            {
                id: 60,
                category: "화학",
                importance: 3,
                question: "위험물 보관소 종류를 쓰시오.",
                hint: "옥내, 옥외",
                answer: "1. 옥내저장소\n2. 옥외저장소\n3. 옥내탱크저장소\n4. 옥외탱크저장소\n5. 지하탱크저장소",
                mnemonic: "옥내외 + 탱크내외지하",
                image: "🏭"
            },
            // 추가 문제들 (61~100번)
            {
                id: 61,
                category: "법령",
                importance: 4,
                question: "안전보건관리규정 필수 기재사항 5가지를 쓰시오.",
                hint: "안전보건교육, 보호구",
                answer: "1. 안전보건교육\n2. 보호구 착용\n3. 작업장 순회점검\n4. 재해발생시 조치\n5. 안전보건관리체계",
                mnemonic: "교육+보호구+순회+재해+체계",
                image: "📋"
            },
            {
                id: 62,
                category: "계산",
                importance: 4,
                question: "신뢰도가 0.9인 부품 3개가 직렬로 연결된 시스템의 신뢰도를 구하시오.",
                hint: "직렬: R = R₁ × R₂ × R₃",
                answer: "R = 0.9 × 0.9 × 0.9 = 0.729",
                mnemonic: "직렬은 곱셈",
                image: "🔗"
            },
            {
                id: 63,
                category: "수치",
                importance: 5,
                question: "굴착작업 시 굴착면 경사각 기준을 쓰시오.",
                hint: "보통흙 45도",
                answer: "1. 보통흙: 45도 이하\n2. 습지: 30도 이하\n3. 건조한 모래: 30도 이하",
                mnemonic: "보통45 습지30 모래30",
                image: "⛏️"
            },
            {
                id: 64,
                category: "크레인",
                importance: 4,
                question: "크레인 작업 시 금지사항 4가지를 쓰시오.",
                hint: "인양, 승강",
                answer: "1. 인양 중 승강 금지\n2. 인양 중 회전 금지\n3. 인양 중 주행 금지\n4. 인양 중 동시작업 금지",
                mnemonic: "인양중 승강회전주행동시금지",
                image: "🚫"
            },
            {
                id: 65,
                category: "비계",
                importance: 4,
                question: "비계 해체 시 순서를 쓰시오.",
                hint: "상부부터",
                answer: "1. 상부부터 하부로\n2. 가새재 제거\n3. 수평재 제거\n4. 수직재 제거",
                mnemonic: "상하부+가새+수평+수직",
                image: "🔧"
            },
            {
                id: 66,
                category: "밀폐공간",
                importance: 5,
                question: "밀폐공간 작업 시 환기량 기준을 쓰시오.",
                hint: "시간당 3회",
                answer: "시간당 3회 이상 환기",
                mnemonic: "시간당 3회",
                image: "💨"
            },
            {
                id: 67,
                category: "전기",
                importance: 4,
                question: "전기기기 점검주기를 쓰시오.",
                hint: "월 1회",
                answer: "1. 월 1회 이상\n2. 이상 시 즉시 수리\n3. 점검기록 보존",
                mnemonic: "월1회+이상시수리+기록보존",
                image: "🔌"
            },
            {
                id: 68,
                category: "화학",
                importance: 4,
                question: "화학물질 안전보건자료 작성 의무를 쓰시오.",
                hint: "제조업체",
                answer: "1. 제조업체\n2. 수입업체\n3. 사용사업장",
                mnemonic: "제조+수입+사용",
                image: "🧪"
            },
            {
                id: 69,
                category: "법령",
                importance: 5,
                question: "산업재해 발생 시 사업주 신고의무를 쓰시오.",
                hint: "즉시, 24시간",
                answer: "1. 즉시: 고용노동부\n2. 24시간: 지방고용노동청\n3. 7일: 상세보고서",
                mnemonic: "즉시+24시간+7일",
                image: "📞"
            },
            {
                id: 70,
                category: "수치",
                importance: 4,
                question: "방진마스크 착용시간 기준을 쓰시오.",
                hint: "8시간",
                answer: "1. 특급: 8시간\n2. 1급: 4시간\n3. 2급: 2시간",
                mnemonic: "특급8 1급4 2급2",
                image: "😷"
            },
            // 추가 문제들 (71~100번)
            {
                id: 71,
                category: "법령",
                importance: 4,
                question: "안전보건관리체계 구축요소 5가지를 쓰시오.",
                hint: "정책, 조직",
                answer: "1. 안전보건정책\n2. 안전보건조직\n3. 안전보건교육\n4. 안전보건관리규정\n5. 안전보건관리계획",
                mnemonic: "정책+조직+교육+규정+계획",
                image: "🏢"
            },
            {
                id: 72,
                category: "계산",
                importance: 3,
                question: "고장률이 0.01/시간인 시스템의 MTBF를 구하시오.",
                hint: "MTBF = 1/λ",
                answer: "MTBF = 1/λ = 1/0.01 = 100시간",
                mnemonic: "MTBF는 고장률의 역수",
                image: "⏱️"
            },
            {
                id: 73,
                category: "수치",
                importance: 4,
                question: "안전대 착용 기준을 쓰시오.",
                hint: "2m 이상",
                answer: "높이 2m 이상에서 추락위험이 있는 작업",
                mnemonic: "2m 이상 추락위험",
                image: "🦺"
            },
            {
                id: 74,
                category: "크레인",
                importance: 3,
                question: "크레인 작업 시 신호방법을 쓰시오.",
                hint: "수신호",
                answer: "1. 수신호\n2. 음성신호\n3. 무선신호",
                mnemonic: "수음무",
                image: "👋"
            },
            {
                id: 75,
                category: "비계",
                importance: 3,
                question: "비계 해체 시 안전조치를 쓰시오.",
                hint: "작업자 대피",
                answer: "1. 작업자 대피\n2. 경계선 설치\n3. 안전관리자 배치",
                mnemonic: "대피+경계+관리",
                image: "🚧"
            },
            {
                id: 76,
                category: "밀폐공간",
                importance: 4,
                question: "밀폐공간 작업 시 환기방법을 쓰시오.",
                hint: "강제환기",
                answer: "1. 강제환기\n2. 자연환기\n3. 국소배기",
                mnemonic: "강자국",
                image: "💨"
            },
            {
                id: 77,
                category: "전기",
                importance: 3,
                question: "전기기기 점검항목을 쓰시오.",
                hint: "절연저항",
                answer: "1. 절연저항\n2. 접지저항\n3. 누전전류",
                mnemonic: "절접누",
                image: "🔌"
            },
            {
                id: 78,
                category: "화학",
                importance: 3,
                question: "화학물질 분류기준을 쓰시오.",
                hint: "물리적, 건강",
                answer: "1. 물리적 위험성\n2. 건강위험성\n3. 환경위험성",
                mnemonic: "물건환",
                image: "🧪"
            },
            {
                id: 79,
                category: "법령",
                importance: 4,
                question: "산업재해 발생 시 근로자 조치사항을 쓰시오.",
                hint: "즉시 중단",
                answer: "1. 즉시 작업 중단\n2. 사업주에게 보고\n3. 응급처치",
                mnemonic: "중단+보고+응급",
                image: "🚨"
            },
            {
                id: 80,
                category: "수치",
                importance: 4,
                question: "소음 측정기준을 쓰시오.",
                hint: "A가중",
                answer: "1. A가중\n2. 8시간 기준\n3. 85dB 이상",
                mnemonic: "A가중 8시간 85dB",
                image: "🔊"
            }
        ];

        // 전체 카드 병합
        cardDatabase.push(...additionalCards);

        // 전역 변수
        let currentMode = 'all';
        let currentCardIndex = 0;
        let currentCards = [];
        let memorizedCards = new Set();
        let weakCards = new Set();
        
        // 전역 변수를 window 객체에 노출
        window.currentCardIndex = currentCardIndex;
        window.currentCards = currentCards;
        let studySession = {
            startTime: null,
            studied: 0,
            correct: 0,
            incorrect: 0
        };
        let timerInterval = null;
        let blinkInterval = null;
        let speedMode = false;
        let autoFlipTimeout = null;

        // 전역 함수 정의 (초기화 전에 정의)
        window.startLearning = function() {
            try {
                console.log('학습 시작 함수 호출');
                
                // 세션 초기화
                resetSession();
                
                // 카드 필터링 및 섞기
                if (!filterCards()) {
                    return; // 취약문제가 없는 경우 중단
                }
                shuffleCards();
                
                // 첫 번째 카드 표시
                showCard(0);
                
                // 타이머 시작
                startTimer();
                
                // 성공 메시지
                const modeMessage = currentMode === 'weak' ? '취약문제 복습을 시작합니다! 💪' : '학습을 시작합니다! 화이팅! 💪';
                showToast(modeMessage, 'success');
                
                // 통계 업데이트
                updateStats();
                
            } catch (error) {
                console.error('학습 시작 중 오류:', error);
                showToast('학습 시작 중 오류가 발생했습니다.', 'error');
            }
        };

        window.startSpeedMode = function() {
            try {
                console.log('스피드 모드 시작');
                speedMode = true;
                startLearning();
                showToast('⚡ 스피드 모드 활성화! 5초마다 자동 넘김', 'warning');
                
                autoFlipTimeout = setInterval(() => {
                    nextCard();
                }, 5000);
            } catch (error) {
                console.error('스피드 모드 시작 중 오류:', error);
                showToast('스피드 모드 시작 중 오류가 발생했습니다.', 'error');
            }
        };

        window.startBlinkMode = function() {
            try {
                console.log('깜박이 모드 시작');
                startLearning();
                showToast('👁️ 뇌새김 깜박이 모드 시작!', 'info');
                
                // 3초 간격으로 깜박임
                blinkInterval = setInterval(() => {
                    const card = document.querySelector('.memory-card.show');
                    if (card) {
                        card.classList.add('blink-effect');
                        setTimeout(() => {
                            card.classList.remove('blink-effect');
                        }, 3000);
                    }
                }, 4000);
            } catch (error) {
                console.error('깜박이 모드 시작 중 오류:', error);
                showToast('깜박이 모드 시작 중 오류가 발생했습니다.', 'error');
            }
        };

        window.startTestMode = function() {
            try {
                console.log('테스트 모드 시작');
                resetSession();
                filterCards();
                shuffleCards();
                // 모든 문제 포함 (홀수/짝수 구분 없음)
                // currentCards = currentCards.slice(0, 20); // 제한 해제
                showCard(0);
                startTimer();
                showToast(`📝 테스트 모드 - ${currentCards.length}문제 도전!`, 'info');
            } catch (error) {
                console.error('테스트 모드 시작 중 오류:', error);
                showToast('테스트 모드 시작 중 오류가 발생했습니다.', 'error');
            }
        };

        window.reviewWeak = function() {
            try {
                console.log('취약문제 복습 시작');
                
                // 로컬 스토리지에서 취약문제 데이터 가져오기
                const weakProblems = JSON.parse(localStorage.getItem('weakProblems') || '[]');
                const needsReviewProblems = weakProblems.filter(problem => problem.needsReview);
                
                if (needsReviewProblems.length === 0) {
                    showToast('복습이 필요한 취약문제가 없습니다!', 'success');
                    return;
                }
                
                // 취약문제 우선순위 정렬 (실패 횟수, 낮은 점수, 중요도 순)
                const sortedWeakProblems = needsReviewProblems.sort((a, b) => {
                    // 실패 횟수 높은 순
                    if (b.failureCount !== a.failureCount) {
                        return b.failureCount - a.failureCount;
                    }
                    // 낮은 점수 순
                    if (a.lowestScore !== b.lowestScore) {
                        return a.lowestScore - b.lowestScore;
                    }
                    // 중요도 높은 순
                    return b.importance - a.importance;
                });
                
                // 취약문제를 카드 형태로 변환
                currentCards = sortedWeakProblems.map(problem => ({
                    id: problem.cardId,
                    category: problem.category,
                    importance: problem.importance,
                    question: problem.question,
                    answer: problem.correctAnswer,
                    hint: problem.hint || '',
                    mnemonic: problem.mnemonic || '',
                    image: problem.image || '❌',
                    failureCount: problem.failureCount,
                    lowestScore: problem.lowestScore
                }));
                
                shuffleCards();
                showCard(0);
                
                // 취약문제 복습 통계 표시
                const weakCount = sortedWeakProblems.length;
                const totalCount = cardDatabase.length;
                const weakPercentage = Math.round((weakCount / totalCount) * 100);
                
                showToast(`🔄 취약문제 ${weakCount}개 복습 시작! (전체의 ${weakPercentage}%)`, 'info');
                
                // 취약문제 복습 모드 활성화
                currentMode = 'weak';
                startTimer();
                
                // 취약문제 복습 가이드 표시
                setTimeout(() => {
                    showToast('💡 취약문제 복습 팁: 정확한 답안을 작성하고 70% 이상 점수를 목표로 하세요!', 'info');
                }, 2000);
                
                // 취약문제 상세 통계 표시
                showWeakProblemDetailedStats(sortedWeakProblems);
                
            } catch (error) {
                console.error('취약문제 복습 중 오류:', error);
                showToast('취약문제 복습 중 오류가 발생했습니다.', 'error');
            }
        };

        // 취약문제 상세 통계 표시
        function showWeakProblemDetailedStats(weakProblems) {
            const totalProblems = weakProblems.length;
            const highFailureProblems = weakProblems.filter(p => p.failureCount >= 3).length;
            const lowScoreProblems = weakProblems.filter(p => p.lowestScore < 30).length;
            const criticalProblems = weakProblems.filter(p => p.failureCount >= 3 && p.lowestScore < 30).length;
            
            const statsMessage = `
                📊 취약문제 분석:
                • 총 ${totalProblems}개 문제
                • 3회 이상 실패: ${highFailureProblems}개
                • 30점 미만: ${lowScoreProblems}개
                • 심각한 취약문제: ${criticalProblems}개
            `;
            
            setTimeout(() => {
                showToast(statsMessage, 'info');
            }, 4000);
        }

        // 네비바 토글 기능
        function toggleNavbar() {
            const navbar = document.querySelector('.navbar-menu');
            const toggleBtn = document.querySelector('.navbar-toggle');
            
            if (navbar && toggleBtn) {
                const isVisible = navbar.style.display !== 'none';
                
                if (isVisible) {
                    navbar.style.display = 'none';
                    toggleBtn.textContent = '☰';
                } else {
                    navbar.style.display = 'flex';
                    toggleBtn.textContent = '✕';
                }
            }
        }

        // 네비바 자동 숨김/표시 (화면 크기 기반)
        function handleNavbarResponsive() {
            const navbar = document.querySelector('.navbar-menu');
            const toggleBtn = document.querySelector('.navbar-toggle');
            const header = document.querySelector('.header');
            
            if (window.innerWidth <= 768) {
                // 모바일: 토글 버튼 표시, 네비바 숨김
                if (toggleBtn) toggleBtn.style.display = 'block';
                if (navbar) navbar.style.display = 'none';
                if (header) header.style.flexDirection = 'column';
            } else {
                // 데스크톱: 네비바 표시, 토글 버튼 숨김
                if (toggleBtn) toggleBtn.style.display = 'none';
                if (navbar) navbar.style.display = 'flex';
                if (header) header.style.flexDirection = 'row';
            }
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('SafetyMaster Pro V2.0 초기화 시작...');
                
                // 모바일 감지 및 최적화 초기화
                detectMobile();
                setupMobileAccessibility();
                
                // 모바일 최적화 초기화
                initMobileOptimizations();
                
                // 추가 모바일 최적화 기능
                if (isMobile) {
                    improveMobileUsability();
                    optimizeMobileNetwork();
                    optimizeMobileBattery();
                    
                    // 성능 테스트 실행
                    setTimeout(() => {
                        testMobilePerformance();
                    }, 2000);
                }
                
                // 네비바 강제 표시
                setTimeout(() => {
                    const navbar = document.querySelector('.navbar-menu');
                    const header = document.querySelector('.header');
                    const primaryBtn = document.querySelector('.navbar-btn.primary');
                    
                    if (navbar) {
                        navbar.style.display = 'flex';
                        navbar.style.visibility = 'visible';
                        navbar.style.opacity = '1';
                        navbar.style.position = 'relative';
                        navbar.style.zIndex = '9999';
                    }
                    
                    if (header) {
                        header.style.display = 'flex';
                        header.style.visibility = 'visible';
                        header.style.opacity = '1';
                    }
                    
                    if (primaryBtn) {
                        primaryBtn.style.display = 'flex';
                        primaryBtn.style.visibility = 'visible';
                        primaryBtn.style.opacity = '1';
                        primaryBtn.style.background = 'linear-gradient(135deg, #4caf50, #2e7d32)';
                        primaryBtn.style.color = 'white';
                        primaryBtn.style.padding = '15px 25px';
                        primaryBtn.style.borderRadius = '25px';
                        primaryBtn.style.fontSize = '16px';
                        primaryBtn.style.fontWeight = '700';
                        primaryBtn.style.minWidth = '200px';
                        primaryBtn.style.boxShadow = '0 6px 20px rgba(76, 175, 80, 0.4)';
                        primaryBtn.style.border = '2px solid rgba(255, 255, 255, 0.3)';
                    }
                    
                    // 반응형 네비바 초기화
                    handleNavbarResponsive();
                }, 100);
                
                // URL 해시 확인하여 자동 고몰입 학습 시작
                if (window.location.hash === '#start-immersive') {
                    setTimeout(() => {
                        startImmersiveLearning();
                    }, 1000);
                }
                
                // 데이터베이스 확인
                if (!cardDatabase || cardDatabase.length === 0) {
                    console.error('카드 데이터베이스가 비어있습니다.');
                    showToast('데이터베이스 로딩 실패', 'error');
                    return;
                }
                
                // 진행상황 로드
                loadProgress();
                
                // 이벤트 리스너 설정
                setupEventListeners();
                
                // 카드 초기화
                currentCards = [...cardDatabase];
                window.currentCards = currentCards;
                shuffleCards();
                
                // 통계 업데이트
                updateStats();
                
                // 버튼 활성화
                enableAllButtons();
                
                // 버튼 이벤트 리스너 설정 (성능 최적화)
                setupButtonEventListeners();
                
                // 함수 정의 확인
                validateFunctionDefinitions();
                
                console.log('SafetyMaster Pro V2.0 초기화 완료');
                showToast('시스템이 준비되었습니다! 학습을 시작하세요.', 'success');
                
                // 반응형 네비바 이벤트 리스너 추가
                window.addEventListener('resize', handleNavbarResponsive);
                
            } catch (error) {
                console.error('초기화 중 오류 발생:', error);
                showToast('초기화 중 오류가 발생했습니다. 페이지를 새로고침해주세요.', 'error');
            }
        });

        // 버튼 이벤트 리스너 설정 함수 (성능 최적화)
        function setupButtonEventListeners() {
            const buttons = document.querySelectorAll('.control-buttons button');
            const buttonHandlers = {
                'start-learning-btn': window.startLearning,
                // 슬라이드 시스템으로 대체된 모드들은 제거
                // 'speed-mode-btn': window.startSpeedMode,
                // 'blink-mode-btn': window.startBlinkMode,
                // 'test-mode-btn': window.startTestMode,
                // 'review-weak-btn': window.reviewWeak
            };
            
            buttons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const handler = buttonHandlers[this.id];
                    
                    if (handler && typeof handler === 'function') {
                        try {
                            handler();
                        } catch (error) {
                            console.error('버튼 실행 오류:', error);
                            showToast('버튼 실행 중 오류가 발생했습니다.', 'error');
                        }
                    } else {
                        console.error(`함수가 정의되지 않음: ${this.id}`);
                        showToast(`${this.id} 함수가 정의되지 않았습니다.`, 'error');
                    }
                });
            });
        }

        // 함수 정의 검증
        function validateFunctionDefinitions() {
            const functions = ['startLearning', 'startSpeedMode', 'startBlinkMode', 'startTestMode', 'reviewWeak'];
            const missingFunctions = [];
            
            functions.forEach(funcName => {
                if (typeof window[funcName] !== 'function') {
                    missingFunctions.push(funcName);
                    console.warn(`${funcName} 함수가 정의되지 않음`);
                }
            });
            
            if (missingFunctions.length > 0) {
                console.error('누락된 함수들:', missingFunctions);
                showToast('일부 기능이 준비되지 않았습니다.', 'warning');
            }
        }

        // 추가 안전장치 - window.onload
        window.addEventListener('load', function() {
            console.log('Window loaded - 버튼 재활성화');
            setTimeout(() => {
                enableAllButtons();
            }, 1000);
        });

        // 버튼 활성화 함수
        function enableAllButtons() {
            const buttonIds = ['start-learning-btn', 'speed-mode-btn', 'blink-mode-btn', 'test-mode-btn', 'review-weak-btn'];
            buttonIds.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.disabled = false;
                    btn.style.opacity = '1';
                    btn.style.pointerEvents = 'auto';
                    btn.style.cursor = 'pointer';
                }
            });
        }

        // 이벤트 리스너 설정
        function setupEventListeners() {
            try {
                // 모드 선택
                const modeButtons = document.querySelectorAll('.mode-btn');
                modeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        currentMode = this.dataset.mode;
                        filterCards();
                    });
                });

                // 카드 클릭 이벤트 (카드가 동적으로 생성되므로 이벤트 위임 사용)
                const cardContainer = document.getElementById('card-container');
                if (cardContainer) {
                    cardContainer.addEventListener('click', function(e) {
                        if (e.target.closest('.memory-card')) {
                            if (!e.target.closest('.action-btn')) {
                                flipCard();
                            }
                        }
                    });
                }

                // 통합 키보드 이벤트 핸들러 - 모드별 분기 처리
                document.addEventListener('keydown', function(e) {
                    // 현재 활성 모드 감지
                    const activeMode = getCurrentActiveMode();
                    
                    // 모드별 키보드 처리
                    switch (activeMode) {
                        case 'immersive':
                            handleImmersiveKeys(e);
                            break;
                        case 'slide':
                            handleSlideKeys(e);
                            break;
                        case 'card':
                        default:
                            handleCardKeys(e);
                            break;
                    }
                });

                // 현재 활성 모드 감지 함수
                function getCurrentActiveMode() {
                    const immersiveContainer = document.getElementById('immersive-learning-container');
                    if (immersiveContainer && immersiveContainer.classList.contains('active')) {
                        return 'immersive';
                    }
                    
                    const slideContainer = document.getElementById('slide-container');
                    if (slideContainer && slideContainer.classList.contains('active')) {
                        return 'slide';
                    }
                    
                    return 'card';
                }

                // 카드 모드 키보드 처리
                function handleCardKeys(e) {
                    // 답안 입력 중일 때는 특별 처리
                    const activeTextarea = document.activeElement;
                    if (activeTextarea && (activeTextarea.id === 'user-answer' || activeTextarea.id === 'immersive-user-answer')) {
                        handleAnswerInputKeys(e);
                        return;
                    }

                    switch (e.key) {
                        case 'ArrowRight':
                            e.preventDefault();
                            nextCard();
                            showToast('다음 문제로 이동', 'info');
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            previousCard();
                            showToast('이전 문제로 이동', 'info');
                            break;
                        case 'ArrowUp':
                            e.preventDefault();
                            showHint();
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            showAnswer();
                            break;
                        case ' ':
                            e.preventDefault();
                            flipCard();
                            break;
                        case 'Enter':
                            e.preventDefault();
                            submitAnswer();
                            break;
                        case 'h':
                        case 'H':
                            e.preventDefault();
                            showHint();
                            break;
                        case 'a':
                        case 'A':
                            e.preventDefault();
                            showAnswer();
                            break;
                        case 'm':
                        case 'M':
                            e.preventDefault();
                            markAsMemorized();
                            break;
                        case 'w':
                        case 'W':
                            e.preventDefault();
                            markAsWeak();
                            break;
                        case 'v':
                        case 'V':
                            e.preventDefault();
                            startVoiceInput();
                            break;
                    }
                }

                // 답안 입력 중 키보드 처리
                function handleAnswerInputKeys(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        submitAnswer();
                    } else if (e.key === 'v' || e.key === 'V') {
                        e.preventDefault();
                        startVoiceInput();
                    }
                    // Shift+Enter는 줄바꿈으로 허용
                }

                // 몰입 모드 키보드 처리
                function handleImmersiveKeys(e) {
                    // 답안 입력 중일 때는 특별 처리
                    const activeTextarea = document.activeElement;
                    if (activeTextarea && activeTextarea.id === 'immersive-user-answer') {
                        handleImmersiveAnswerInputKeys(e);
                        return;
                    }

                    switch (e.key) {
                        case 'ArrowRight':
                            e.preventDefault();
                            nextImmersiveCard();
                            showToast('다음 문제로 이동', 'info');
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            if (immersiveCurrentIndex > 0) {
                                immersiveCurrentIndex--;
                                showImmersiveCard(immersiveCurrentIndex);
                                showToast('이전 문제로 이동', 'info');
                            }
                            break;
                        case 'ArrowUp':
                            e.preventDefault();
                            showImmersiveAnswer();
                            showToast('정답을 확인하세요!', 'info');
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            showImmersiveHint();
                            showToast('힌트를 확인하세요!', 'info');
                            break;
                        case 'Enter':
                            e.preventDefault();
                            submitImmersiveAnswer();
                            break;
                        case 'v':
                        case 'V':
                            e.preventDefault();
                            startImmersiveVoiceInput();
                            break;
                    }
                }

                // 몰입 모드 답안 입력 키보드 처리
                function handleImmersiveAnswerInputKeys(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        submitImmersiveAnswer();
                    } else if (e.key === 'v' || e.key === 'V') {
                        e.preventDefault();
                        startImmersiveVoiceInput();
                    }
                }

                // 슬라이드 모드 키보드 처리
                function handleSlideKeys(e) {
                    switch (e.key) {
                        case 'ArrowRight':
                        case 'ArrowDown':
                        case ' ':
                            e.preventDefault();
                            nextSlide();
                            break;
                        case 'ArrowLeft':
                        case 'ArrowUp':
                            e.preventDefault();
                            if (slideIndex > 0) {
                                slideIndex--;
                                updateSlideContent();
                            }
                            break;
                        case 'Enter':
                            e.preventDefault();
                            flipSlide();
                            break;
                    }
                }
                
            } catch (error) {
                console.error('이벤트 리스너 설정 중 오류 발생:', error);
            }
        }


        // 카드 필터링 - 홀수/짝수 문제 오류 수정
        function filterCards() {
            if (currentMode === 'all') {
                currentCards = [...cardDatabase];
                window.currentCards = currentCards;
            } else if (currentMode === 'random') {
                currentCards = [...cardDatabase];
                window.currentCards = currentCards;
                shuffleCards(); // 랜덤 모드에서는 즉시 섞기
            } else if (currentMode === 'weak') {
                // 취약문제 모드: 취약문제만 필터링
                currentCards = cardDatabase.filter(card => weakCards.has(card.id));
                if (currentCards.length === 0) {
                    showToast('취약문제가 없습니다. 먼저 학습을 진행해주세요!', 'info');
                    return false;
                }
            } else {
                // 카테고리 필터링 시 모든 문제 포함 (홀수/짝수 구분 없음)
                currentCards = cardDatabase.filter(card => 
                    card.category.toLowerCase().includes(currentMode)
                );
            }
            
            // window 객체 업데이트
            window.currentCards = currentCards;
            
            // 모든 모드에서 홀수/짝수 구분 없이 모든 문제 포함
            console.log(`필터링된 카드 수: ${currentCards.length}, 모드: ${currentMode}`);
            return true;
        }

        // 카드 섞기
        function shuffleCards() {
            currentCards.sort(() => Math.random() - 0.5);
        }

        // 카드 표시 - 16:9 가로 슬라이드 형식으로 개선
        function showCard(index) {
            if (index >= currentCards.length) {
                showResults();
                return;
            }
            
            currentCardIndex = index;
            window.currentCardIndex = currentCardIndex;
            const card = currentCards[index];
            const container = document.getElementById('card-container');
            
            // 기존 카드 숨기기
            const existingCard = container.querySelector('.memory-card');
            if (existingCard) {
                existingCard.classList.remove('show');
                existingCard.classList.add('hide');
                setTimeout(() => {
                    if (existingCard.parentNode) {
                        existingCard.remove();
                    }
                }, 300);
            }
            
            // 새 카드 생성 - 16:9 가로 슬라이드 형식
            setTimeout(() => {
                const cardHTML = `
                    <div class="memory-card learning-card show" data-id="${card.id}">
                        <!-- 16:9 가로 슬라이드 헤더 -->
                        <div class="learning-header">
                            <div class="learning-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${((currentCardIndex + 1) / currentCards.length) * 100}%"></div>
                                </div>
                                <div class="progress-text">${currentCardIndex + 1} / ${currentCards.length}</div>
                            </div>
                            <div class="learning-controls">
                                <button class="control-btn" onclick="previousCard()" title="이전 문제 (←)">
                                    ←
                                </button>
                                <button class="control-btn" onclick="nextCard()" title="다음 문제 (→)">
                                    →
                                </button>
                            </div>
                        </div>
                        
                        <!-- 16:9 가로 슬라이드 메인 콘텐츠 -->
                        <div class="learning-content">
                            <div class="learning-left">
                                <div class="question-section">
                                    <div class="question-header">
                                        <span class="question-category">${card.category}</span>
                                        <span class="question-importance">${generateStars(card.importance)}</span>
                                    </div>
                                    <div class="question-text">
                                        ${card.question}
                                    </div>
                                    <div class="question-image">
                                        <div class="image-icon">${card.image}</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="learning-right">
                                <div class="answer-section">
                                    <div class="answer-header">
                                        <span class="answer-label">📝 답안 작성</span>
                                        <div class="answer-tools">
                                            <button class="tool-btn" onclick="loadAnswerDraft()" title="저장된 답안 불러오기">
                                                📂 불러오기
                                            </button>
                                            <button class="tool-btn" onclick="clearAnswer()" title="답안 지우기">
                                                🗑️ 지우기
                                            </button>
                                            <button class="tool-btn" onclick="toggleAnswerHelp()" title="입력 도움말">
                                                ❓ 도움말
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="answer-help hidden-element" id="answer-help">
                                        <div class="help-content">
                                            <h4>💡 답안 작성 도움말</h4>
                                            <div class="help-grid">
                                                <div class="help-section">
                                                    <h5>⌨️ 키보드 단축키</h5>
                                                    <ul>
                                                        <li><kbd>Enter</kbd>: 답안 제출</li>
                                                        <li><kbd>Shift + Enter</kbd>: 줄바꿈</li>
                                                        <li><kbd>Ctrl + S</kbd>: 수동저장</li>
                                                        <li><kbd>Ctrl + Z</kbd>: 실행취소</li>
                                                        <li><kbd>Ctrl + A</kbd>: 전체선택</li>
                                                    </ul>
                                                </div>
                                                <div class="help-section">
                                                    <h5>🎮 네비게이션</h5>
                                                    <ul>
                                                        <li><kbd>← →</kbd>: 이전/다음 문제</li>
                                                        <li><kbd>↑ ↓</kbd>: 힌트/정답 보기</li>
                                                        <li><kbd>H</kbd>: 힌트 보기</li>
                                                        <li><kbd>A</kbd>: 정답 보기</li>
                                                    </ul>
                                                </div>
                                                <div class="help-section">
                                                    <h5>📝 작성 도구</h5>
                                                    <ul>
                                                        <li><kbd>R</kbd>: 답안 다시 작성</li>
                                                        <li><kbd>S</kbd>: 답안 저장</li>
                                                        <li><kbd>C</kbd>: 답안 지우기</li>
                                                        <li><kbd>M</kbd>: 암기완료</li>
                                                        <li><kbd>W</kbd>: 취약문제</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="writing-tips">
                                                <h5>🎯 작성 팁</h5>
                                                <div class="tips-grid">
                                                    <div class="tip-item">
                                                        <span class="tip-icon">🔑</span>
                                                        <span class="tip-text">핵심 키워드 포함</span>
                                                    </div>
                                                    <div class="tip-item">
                                                        <span class="tip-icon">📝</span>
                                                        <span class="tip-text">구체적인 설명 추가</span>
                                                    </div>
                                                    <div class="tip-item">
                                                        <span class="tip-icon">📊</span>
                                                        <span class="tip-text">수치나 기준 명시</span>
                                                    </div>
                                                    <div class="tip-item">
                                                        <span class="tip-icon">🎯</span>
                                                        <span class="tip-text">정확한 용어 사용</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="textarea-container">
                                        <textarea id="user-answer" class="answer-textarea" 
                                            placeholder="여기에 답안을 작성하거나 음성으로 답변하세요...&#10;&#10;💡 작성 팁:&#10;• 키워드를 중심으로 작성&#10;• 구체적인 내용 포함&#10;• Enter: 제출, Shift+Enter: 줄바꿈&#10;• V키: 음성 답변 시작" 
                                            onkeydown="handleAnswerKeydown(event)"
                                            oninput="handleAnswerInput(event)"
                                            onfocus="showAnswerTips()"
                                            onblur="hideAnswerTips()"
                                            spellcheck="false"
                                            autocomplete="off"
                                            autocorrect="off"
                                            autocapitalize="off"></textarea>
                                        <div class="textarea-footer">
                                            <span class="char-count" id="char-count">0자</span>
                                            <span class="auto-save-status" id="auto-save-status">💾 자동저장</span>
                                        </div>
                                    </div>
                                    
                                    <div class="answer-actions">
                                        <button class="action-btn primary" onclick="submitAnswer()" id="submit-btn">
                                            📤 답안 제출
                                        </button>
                                        <button class="action-btn secondary" onclick="saveAnswerDraft()" id="save-btn">
                                            💾 임시저장
                                        </button>
                                        <button class="action-btn" onclick="clearAnswer()" id="clear-btn">
                                            🗑️ 지우기
                                        </button>
                                    </div>
                                    
                                    <div class="answer-tips hidden-element" id="answer-tips">
                                        <div class="tips-content">
                                            <h4>🎯 답안 작성 가이드</h4>
                                            <div class="tips-grid">
                                                <div class="tip-item">
                                                    <span class="tip-icon">🔑</span>
                                                    <span class="tip-text">핵심 키워드 포함</span>
                                                </div>
                                                <div class="tip-item">
                                                    <span class="tip-icon">📝</span>
                                                    <span class="tip-text">구체적인 설명 추가</span>
                                                </div>
                                                <div class="tip-item">
                                                    <span class="tip-icon">📊</span>
                                                    <span class="tip-text">수치나 기준 명시</span>
                                                </div>
                                                <div class="tip-item">
                                                    <span class="tip-icon">🎯</span>
                                                    <span class="tip-text">정확한 용어 사용</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 힌트 및 정답 섹션 -->
                        <div class="learning-bottom">
                            <div class="hint-section hidden-element" id="hint-section">
                                <div class="hint-content">
                                    💡 힌트: ${card.hint}
                                </div>
                            </div>
                            
                            <div class="answer-section hidden-element" id="answer-section">
                                <div class="answer-content">
                                    <div class="answer-label">✅ 정답</div>
                                    <div class="answer-text">
                                        ${card.answer.replace(/\n/g, '<br>')}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="memory-tip hidden-element" id="memory-tip">
                                <div class="memory-content">
                                    🧠 암기법: ${card.mnemonic}
                                </div>
                            </div>
                        </div>
                        
                        <!-- 답안 비교 UI -->
                        <div class="answer-comparison-container hidden-element" id="answer-comparison-container">
                            <div class="comparison-header">
                                <div class="comparison-title">📊 답안 비교 및 학습</div>
                                <div class="comparison-subtitle">정답과 비교하여 학습해보세요</div>
                            </div>
                            
                            <div class="score-section">
                                <div class="score-display">
                                    <div class="score-circle" id="score-circle">
                                        <span id="score-number">0</span>
                                    </div>
                                    <div class="score-label" id="score-label">점수</div>
                                </div>
                                <div class="score-feedback" id="score-feedback">
                                    점수에 따른 피드백이 여기에 표시됩니다.
                                </div>
                            </div>
                            
                            <div class="comparison-panels">
                                <div class="answer-panel user-answer">
                                    <div class="panel-header user-answer">
                                        <span class="panel-icon">📝</span>
                                        <span class="panel-title">나의 답안</span>
                                        <span class="panel-badge">내가 작성한 답안</span>
                                    </div>
                                    <div class="answer-content user-answer" id="user-answer-display">
                                        답안이 여기에 표시됩니다.
                                    </div>
                                </div>
                                
                                <div class="answer-panel correct-answer">
                                    <div class="panel-header correct-answer">
                                        <span class="panel-icon">✅</span>
                                        <span class="panel-title">정답</span>
                                        <span class="panel-badge">모범 답안</span>
                                    </div>
                                    <div class="answer-content correct-answer" id="correct-answer-display">
                                        정답이 여기에 표시됩니다.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="learning-tips hidden-element" id="learning-tips">
                                <h4>💡 학습 팁</h4>
                                <div class="tips-content">
                                    <div class="tip-item">
                                        <span class="tip-icon">🔍</span>
                                        <span class="tip-text">정답과 비교하여 부족한 부분을 파악하세요</span>
                                    </div>
                                    <div class="tip-item">
                                        <span class="tip-icon">📚</span>
                                        <span class="tip-text">핵심 키워드와 구체적인 내용을 기억하세요</span>
                                    </div>
                                    <div class="tip-item">
                                        <span class="tip-icon">🔄</span>
                                        <span class="tip-text">틀린 부분은 다시 학습해보세요</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="answer-actions">
                                <button class="action-btn primary" onclick="reviewAnswerAgain()" id="review-btn">
                                    🔄 답안 다시 작성
                                </button>
                                <button class="action-btn secondary" onclick="markAsMemorized()" id="memorize-btn">
                                    ✅ 암기완료
                                </button>
                                <button class="action-btn warning" onclick="markAsWeak()" id="weak-btn">
                                    ⚠️ 취약문제
                                </button>
                                <button class="action-btn info" onclick="showDetailedAnalysis()" id="analysis-btn">
                                    📊 상세 분석
                                </button>
                            </div>
                        </div>
                        
                        <!-- 키보드 단축키 안내 -->
                        <div class="keyboard-shortcuts">
                            <div class="shortcut-item">
                                <kbd>←</kbd> <span>이전 문제</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>→</kbd> <span>다음 문제</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>↑</kbd> <span>힌트 보기</span>
                            </div>
                            <div class="shortcut-item">
                                <kbd>↓</kbd> <span>정답 보기</span>
                            </div>
                        </div>
                    </div>
                        
                        <div class="answer-input-section" id="answer-input-section">
                            <div class="answer-input-container">
                                <div class="answer-header">
                                    <label for="user-answer" class="answer-label">
                                        📝 답안 작성
                                        <span class="answer-hint">Enter로 제출 • 자동저장 • 50% 미만 시 취약문제 분류</span>
                                    </label>
                                    <div class="answer-tools">
                                        <button class="tool-btn" onclick="loadAnswerDraft()" title="저장된 답안 불러오기">
                                            📂 불러오기
                                        </button>
                                        <button class="tool-btn" onclick="clearAnswer()" title="답안 지우기">
                                            🗑️ 지우기
                                        </button>
                                        <button class="tool-btn" onclick="toggleAnswerHelp()" title="입력 도움말">
                                            ❓ 도움말
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="answer-help hidden-element" id="answer-help">
                                    <div class="help-content">
                                        <h4>💡 답안 작성 도움말</h4>
                                        <ul>
                                            <li><kbd>Enter</kbd>: 답안 제출</li>
                                            <li><kbd>Shift + Enter</kbd>: 줄바꿈</li>
                                            <li><kbd>Ctrl + S</kbd>: 자동저장</li>
                                            <li><kbd>Ctrl + Z</kbd>: 실행취소</li>
                                            <li><kbd>Tab</kbd>: 들여쓰기</li>
                                        </ul>
                                        <p><strong>작성 팁:</strong> 키워드를 중심으로 작성하고, 구체적인 내용을 포함하세요.</p>
                                    </div>
                                </div>
                                
                                <div class="textarea-container">
                                    <textarea id="user-answer" class="answer-textarea" 
                                        placeholder="여기에 답안을 작성하세요...&#10;&#10;💡 작성 팁:&#10;• 키워드를 중심으로 작성&#10;• 구체적인 내용 포함&#10;• Enter: 제출, Shift+Enter: 줄바꿈&#10;• 자동저장으로 안전하게 보관" 
                                        onkeydown="handleAnswerKeydown(event)"
                                        oninput="handleAnswerInput(event)"
                                        onfocus="showAnswerTips()"
                                        onblur="hideAnswerTips()"
                                        spellcheck="false"
                                        autocomplete="off"
                                        autocorrect="off"
                                        autocapitalize="off"></textarea>
                                    <div class="textarea-footer">
                                        <span class="char-count" id="char-count">0자</span>
                                        <span class="auto-save-status" id="auto-save-status">💾 자동저장</span>
                                    </div>
                                </div>
                                
                                <div class="answer-actions">
                                    <button class="action-btn primary" onclick="submitAnswer()" id="submit-btn">
                                        📤 답안 제출
                                    </button>
                                    <button class="action-btn secondary" onclick="saveAnswerDraft()" id="save-btn">
                                        💾 임시저장
                                    </button>
                                    <button class="action-btn" onclick="clearAnswer()" id="clear-btn">
                                        🗑️ 지우기
                                    </button>
                                </div>
                                
                                <div class="answer-tips hidden-element" id="answer-tips">
                                    <div class="tips-content">
                                        <h4>🎯 답안 작성 가이드</h4>
                                        <div class="tips-grid">
                                            <div class="tip-item">
                                                <span class="tip-icon">🔑</span>
                                                <span class="tip-text">핵심 키워드 포함</span>
                                            </div>
                                            <div class="tip-item">
                                                <span class="tip-icon">📝</span>
                                                <span class="tip-text">구체적인 설명 추가</span>
                                            </div>
                                            <div class="tip-item">
                                                <span class="tip-icon">📊</span>
                                                <span class="tip-text">수치나 기준 명시</span>
                                            </div>
                                            <div class="tip-item">
                                                <span class="tip-icon">🎯</span>
                                                <span class="tip-text">정확한 용어 사용</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 답안 비교 UI -->
                        <div class="answer-comparison-container" id="answer-comparison-container">
                            <div class="comparison-header">
                                <div class="comparison-title">📊 답안 비교 및 학습</div>
                                <div class="comparison-subtitle">정답과 비교하여 학습해보세요</div>
                            </div>
                            
                            <div class="score-section">
                                <div class="score-display">
                                    <div class="score-circle" id="score-circle">
                                        <span id="score-number">0</span>
                                    </div>
                                    <div class="score-label" id="score-label">점수</div>
                                </div>
                                <div class="score-feedback" id="score-feedback">
                                    점수에 따른 피드백이 여기에 표시됩니다.
                                </div>
                            </div>
                            
                            <div class="comparison-panels">
                                <div class="answer-panel user-answer">
                                    <div class="panel-header user-answer">
                                        <span class="panel-icon">📝</span>
                                        <span class="panel-title">나의 답안</span>
                                        <span class="panel-badge">내가 작성한 답안</span>
                                    </div>
                                    <div class="answer-content user-answer" id="user-answer-display">
                                        답안이 여기에 표시됩니다.
                                    </div>
                                </div>
                                
                                <div class="answer-panel correct-answer">
                                    <div class="panel-header correct-answer">
                                        <span class="panel-icon">✅</span>
                                        <span class="panel-title">정답</span>
                                        <span class="panel-badge">모범 답안</span>
                                    </div>
                                    <div class="answer-content correct-answer" id="correct-answer-display">
                                        정답이 여기에 표시됩니다.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="learning-tips" id="learning-tips">
                                <h4>💡 학습 팁</h4>
                                <div class="tips-content">
                                    <div class="tip-item">
                                        <span class="tip-icon">🔍</span>
                                        <span class="tip-text">정답과 비교하여 부족한 부분을 파악하세요</span>
                                    </div>
                                    <div class="tip-item">
                                        <span class="tip-icon">📚</span>
                                        <span class="tip-text">핵심 키워드와 구체적인 내용을 기억하세요</span>
                                    </div>
                                    <div class="tip-item">
                                        <span class="tip-icon">🔄</span>
                                        <span class="tip-text">틀린 부분은 다시 학습해보세요</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="answer-actions">
                                <button class="action-btn primary" onclick="reviewAnswerAgain()" id="review-btn">
                                    🔄 답안 다시 작성
                                </button>
                                <button class="action-btn secondary" onclick="markAsMemorized()" id="memorize-btn">
                                    ✅ 암기완료
                                </button>
                                <button class="action-btn warning" onclick="markAsWeak()" id="weak-btn">
                                    ⚠️ 취약문제
                                </button>
                                <button class="action-btn info" onclick="showDetailedAnalysis()" id="analysis-btn">
                                    📊 상세 분석
                                </button>
                            </div>
                        </div>

                        <div class="grading-section hidden-element" id="grading-section">
                            <div class="grading-result">
                                <div class="score-display" id="score-display"></div>
                                <div class="feedback-section" id="feedback-section"></div>
                                <div class="grading-actions">
                                    <button class="action-btn success" onclick="markAsMemorized()">✅ 암기완료</button>
                                    <button class="action-btn danger" onclick="markAsWeak()">❌ 취약문제</button>
                                    <button class="action-btn" onclick="nextCard()">다음 문제 ➡️</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.innerHTML = cardHTML;
                
                // 이미지 애니메이션 효과
                setTimeout(() => {
                    const icon = container.querySelector('.image-icon');
                    if (icon) {
                        icon.style.animationDelay = '0.5s';
                    }
                }, 100);
            }, existingCard ? 600 : 0);
        }

        // 별점 생성
        function generateStars(importance) {
            let stars = '';
            for (let i = 0; i < importance; i++) {
                stars += '<span class="star">⭐</span>';
            }
            return stars;
        }

        // 카드 뒤집기 - 현재 문제의 정답 표시
        function flipCard() {
            const answer = document.getElementById('answer');
            const memoryTip = document.getElementById('memory-tip');
            
            if (answer && currentCardIndex >= 0 && currentCardIndex < filteredCards.length) {
                // 현재 문제의 정답 표시
                const currentCard = filteredCards[currentCardIndex];
                if (currentCard && currentCard.answer) {
                    answer.style.display = 'block';
                    answer.classList.add('show');
                    
                    // 정답 내용이 올바르게 설정되어 있는지 확인
                    if (answer.textContent !== currentCard.answer) {
                        answer.textContent = currentCard.answer;
                    }
                    
                    // 암기법은 자동으로 표시하지 않음 (학습 효과를 위해)
                    // 사용자가 직접 요청해야만 표시됨
                    if (memoryTip) {
                        memoryTip.style.display = 'none';
                    }
                    
                    console.log('현재 문제의 정답이 표시되었습니다:', currentCard.question);
                }
            }
        }

        // 힌트 표시 - 학습 모드에서 힌트 확인
        function showHint() {
            const currentCard = currentCards[currentCardIndex];
            if (!currentCard) {
                showToast('❌ 현재 문제를 찾을 수 없습니다.', 'error');
                return;
            }
            
            // 힌트 섹션 표시
            const hintSection = document.getElementById('hint-section');
            if (hintSection) {
                hintSection.style.display = 'block';
                hintSection.classList.remove('hidden-element');
                hintSection.classList.add('show');
                
                // 힌트 내용 업데이트
                const hintContent = hintSection.querySelector('.hint-content');
                if (hintContent) {
                    hintContent.textContent = `💡 힌트: ${currentCard.hint}`;
                }
            }
            
            showToast('💡 힌트를 확인하세요!', 'info');
        }
        
        // 정답 표시 - 학습 모드에서 정답 확인
        function showAnswer() {
            const currentCard = currentCards[currentCardIndex];
            if (!currentCard) {
                showToast('❌ 현재 문제를 찾을 수 없습니다.', 'error');
                return;
            }
            
            // 정답 섹션 표시
            const answerSection = document.getElementById('answer-section');
            if (answerSection) {
                answerSection.style.display = 'block';
                answerSection.classList.remove('hidden-element');
                answerSection.classList.add('show');
                
                // 정답 내용 업데이트
                const answerContent = answerSection.querySelector('.answer-text');
                if (answerContent) {
                    answerContent.innerHTML = currentCard.answer.replace(/\n/g, '<br>');
                }
            }
            
            // 힌트 섹션도 함께 표시
            const hintSection = document.getElementById('hint-section');
            if (hintSection) {
                hintSection.style.display = 'block';
                hintSection.classList.remove('hidden-element');
                hintSection.classList.add('show');
            }
            
            // 암기법 섹션도 표시
            const memoryTip = document.getElementById('memory-tip');
            if (memoryTip) {
                memoryTip.style.display = 'block';
                memoryTip.classList.remove('hidden-element');
                memoryTip.classList.add('show');
            }
            
            showToast('✅ 정답을 확인하세요!', 'success');
        }

        // 답안 입력 키보드 이벤트 처리 - 대폭 개선된 기능
        function handleAnswerKeydown(event) {
            // Ctrl+S: 자동저장
            if (event.ctrlKey && event.key === 's') {
                event.preventDefault();
                saveAnswerDraft();
                showToast('답안이 저장되었습니다.', 'success');
                return;
            }
            
            // V키: 음성 입력 시작
            if (event.key === 'v' || event.key === 'V') {
                event.preventDefault();
                startVoiceInput();
                return;
            }
            
            // Enter키만 특별 처리 (답안 제출)
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                submitAnswer();
                return;
            }
            
            // 나머지 모든 키는 기본 동작 허용
            // 스페이스바, 백스페이스, Delete, 화살표키, 문자 입력 등 모든 기본 기능 보장
        }
        
        // 답안 입력 실시간 처리
        function handleAnswerInput(event) {
            const textarea = event.target;
            const charCount = document.getElementById('char-count');
            const autoSaveStatus = document.getElementById('auto-save-status');
            
            // 글자 수 업데이트
            if (charCount) {
                charCount.textContent = `${textarea.value.length}자`;
            }
            
            // 자동저장 상태 표시
            if (autoSaveStatus) {
                autoSaveStatus.textContent = '💾 저장 중...';
                autoSaveStatus.className = 'auto-save-status saving';
            }
            
            // 자동저장 (디바운싱)
            clearTimeout(window.autoSaveTimeout);
            window.autoSaveTimeout = setTimeout(() => {
                if (textarea.value.trim()) {
                    saveAnswerDraft(textarea.value);
                    if (autoSaveStatus) {
                        autoSaveStatus.textContent = '✅ 저장됨';
                        autoSaveStatus.className = 'auto-save-status saved';
                    }
                }
            }, 1000);
        }

        // 음성 인식 변수
        let recognition = null;
        let isListening = false;

        // 음성 입력 시작 - 개선된 UX
        function startVoiceInput() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                showToast('이 브라우저는 음성 인식을 지원하지 않습니다. Chrome을 사용해주세요.', 'error');
                return;
            }

            if (isListening) {
                stopVoiceInput();
                return;
            }

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.continuous = false;
            recognition.interimResults = true; // 중간 결과 표시
            recognition.lang = 'ko-KR';
            recognition.maxAlternatives = 1;

            recognition.onstart = function() {
                isListening = true;
                showToast('🎤 음성 인식 중... 말씀해주세요!', 'info');
                updateVoiceButtonState(true);
            };

            recognition.onresult = function(event) {
                let finalTranscript = '';
                let interimTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript;
                    } else {
                        interimTranscript += transcript;
                    }
                }

                const textarea = document.getElementById('user-answer');
                if (textarea) {
                    if (finalTranscript) {
                        textarea.value = finalTranscript;
                        showToast('음성 인식 완료!', 'success');
                        // 자동 제출 옵션 (사용자 설정에 따라)
                        const autoSubmit = localStorage.getItem('voiceAutoSubmit') === 'true';
                        if (autoSubmit) {
                            setTimeout(() => submitAnswer(), 500);
                        }
                    } else if (interimTranscript) {
                        // 중간 결과 표시
                        textarea.value = interimTranscript;
                    }
                    textarea.focus();
                }
            };

            recognition.onerror = function(event) {
                let errorMessage = '음성 인식 오류가 발생했습니다.';
                switch (event.error) {
                    case 'no-speech':
                        errorMessage = '음성이 감지되지 않았습니다. 다시 시도해주세요.';
                        break;
                    case 'audio-capture':
                        errorMessage = '마이크에 접근할 수 없습니다. 권한을 확인해주세요.';
                        break;
                    case 'not-allowed':
                        errorMessage = '마이크 권한이 거부되었습니다. 브라우저 설정을 확인해주세요.';
                        break;
                    case 'network':
                        errorMessage = '네트워크 오류가 발생했습니다.';
                        break;
                }
                showToast(errorMessage, 'error');
                isListening = false;
                updateVoiceButtonState(false);
            };

            recognition.onend = function() {
                isListening = false;
                updateVoiceButtonState(false);
            };

            try {
                recognition.start();
            } catch (error) {
                showToast('음성 인식을 시작할 수 없습니다. 마이크 권한을 확인해주세요.', 'error');
                isListening = false;
                updateVoiceButtonState(false);
            }
        }

        // 음성 입력 중지
        function stopVoiceInput() {
            if (recognition && isListening) {
                recognition.stop();
                isListening = false;
                updateVoiceButtonState(false);
                showToast('음성 인식이 중지되었습니다.', 'info');
            }
        }

        // 음성 버튼 상태 업데이트
        function updateVoiceButtonState(listening) {
            const voiceBtn = document.querySelector('.voice-btn');
            if (voiceBtn) {
                if (listening) {
                    voiceBtn.classList.add('listening');
                    voiceBtn.innerHTML = '<span>🔴</span><span class="nav-label">중지</span>';
                } else {
                    voiceBtn.classList.remove('listening');
                    voiceBtn.innerHTML = '<span>🎤</span><span class="nav-label">음성</span>';
                }
            }
        }
        
        // 답안 도움말 토글
        function toggleAnswerHelp() {
            const helpDiv = document.getElementById('answer-help');
            if (helpDiv) {
                helpDiv.style.display = helpDiv.style.display === 'none' ? 'block' : 'none';
            }
        }
        
        // 답안 작성 팁 표시
        function showAnswerTips() {
            const tipsDiv = document.getElementById('answer-tips');
            if (tipsDiv) {
                tipsDiv.style.display = 'block';
            }
        }
        
        // 답안 작성 팁 숨기기
        function hideAnswerTips() {
            const tipsDiv = document.getElementById('answer-tips');
            if (tipsDiv) {
                // 약간의 지연을 두어 사용자가 팁을 읽을 수 있도록 함
                setTimeout(() => {
                    if (tipsDiv) {
                        tipsDiv.style.display = 'none';
                    }
                }, 2000);
            }
        }

        // 답안 입력 실시간 처리 - 자동 크기 조절 및 UX 개선
        function handleAnswerInput(event) {
            const textarea = event.target;
            const charCount = textarea.value.length;
            
            // 자동 크기 조절
            autoResizeTextarea(textarea);
            
            // 글자 수 표시 및 시각적 피드백
            updateCharCount(charCount);
            
            // 입력 상태에 따른 스타일 변경
            if (charCount > 0) {
                textarea.style.borderColor = 'rgba(34, 197, 94, 0.5)';
                textarea.classList.add('has-content');
            } else {
                textarea.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                textarea.classList.remove('has-content');
            }
            
            // 스마트 제안 기능
            showSmartSuggestions(textarea.value);
            
            // 실시간 문법 체크
            checkAnswerGrammar(textarea.value);
            
            // 키워드 하이라이트
            highlightKeywords(textarea.value);
            
            // 자동저장
            saveAnswerDraft();
        }
        
        // 스마트 제안 기능
        function showSmartSuggestions(text) {
            const suggestions = getSmartSuggestions(text);
            if (suggestions.length > 0) {
                showToast(`💡 제안: ${suggestions.join(', ')}`, 'info');
            }
        }
        
        // 스마트 제안 생성
        function getSmartSuggestions(text) {
            const suggestions = [];
            const currentCard = currentCards[currentCardIndex];
            
            if (!currentCard) return suggestions;
            
            // 정답에서 키워드 추출
            const answerKeywords = extractKeywords(currentCard.answer);
            const userKeywords = extractKeywords(text);
            
            // 누락된 키워드 제안
            answerKeywords.forEach(keyword => {
                if (!userKeywords.includes(keyword) && keyword.length > 2) {
                    suggestions.push(keyword);
                }
            });
            
            return suggestions.slice(0, 3); // 최대 3개 제안
        }
        
        // 실시간 문법 체크
        function checkAnswerGrammar(text) {
            const grammarIssues = [];
            
            // 기본 문법 체크
            if (text.length > 0 && !text.endsWith('.') && !text.endsWith('!') && !text.endsWith('?')) {
                grammarIssues.push('문장 끝에 마침표를 추가하세요');
            }
            
            if (text.includes('  ')) {
                grammarIssues.push('연속된 공백을 정리하세요');
            }
            
            // 문법 체크 결과 표시
            if (grammarIssues.length > 0) {
                const autoSaveStatus = document.getElementById('auto-save-status');
                if (autoSaveStatus) {
                    autoSaveStatus.textContent = `⚠️ ${grammarIssues[0]}`;
                    autoSaveStatus.style.color = '#ff9800';
                }
            }
        }
        
        // 키워드 하이라이트
        function highlightKeywords(text) {
            const currentCard = currentCards[currentCardIndex];
            if (!currentCard) return;
            
            const answerKeywords = extractKeywords(currentCard.answer);
            const textarea = document.getElementById('user-answer');
            
            if (!textarea) return;
            
            // 키워드 매칭 확인
            const matchedKeywords = answerKeywords.filter(keyword => 
                text.toLowerCase().includes(keyword.toLowerCase())
            );
            
            // 매칭된 키워드 수 표시
            const charCount = document.getElementById('char-count');
            if (charCount && matchedKeywords.length > 0) {
                charCount.textContent = `${text.length}자 (키워드 ${matchedKeywords.length}/${answerKeywords.length})`;
                charCount.style.color = '#4caf50';
            }
        }

        // 텍스트 영역 자동 크기 조절
        function autoResizeTextarea(textarea) {
            textarea.style.height = 'auto';
            const scrollHeight = textarea.scrollHeight;
            const maxHeight = 400; // 최대 높이
            
            if (scrollHeight > maxHeight) {
                textarea.style.height = maxHeight + 'px';
                textarea.style.overflowY = 'auto';
            } else {
                textarea.style.height = Math.max(150, scrollHeight) + 'px';
                textarea.style.overflowY = 'hidden';
            }
        }

        // 글자 수 표시 업데이트
        function updateCharCount(count) {
            let charCountDisplay = document.getElementById('char-count');
            if (!charCountDisplay) {
                charCountDisplay = document.createElement('div');
                charCountDisplay.id = 'char-count';
                charCountDisplay.style.cssText = `
                    position: absolute;
                    bottom: 10px;
                    right: 15px;
                    font-size: 12px;
                    color: rgba(0, 0, 0, 0.5);
                    background: rgba(255, 255, 255, 0.8);
                    padding: 2px 8px;
                    border-radius: 10px;
                    pointer-events: none;
                `;
                
                const textarea = document.getElementById('user-answer');
                if (textarea && textarea.parentNode) {
                    textarea.parentNode.style.position = 'relative';
                    textarea.parentNode.appendChild(charCountDisplay);
                }
            }
            
            charCountDisplay.textContent = `${count}자`;
            
            // 글자 수에 따른 색상 변경
            if (count > 500) {
                charCountDisplay.style.color = 'var(--warning)';
            } else if (count > 200) {
                charCountDisplay.style.color = 'var(--info)';
            } else {
                charCountDisplay.style.color = 'rgba(0, 0, 0, 0.5)';
            }
        }

        // 답안 지우기 - UX 개선
        function clearAnswer() {
            const textarea = document.getElementById('user-answer');
            
            if (textarea) {
                textarea.value = '';
                textarea.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                textarea.classList.remove('has-content');
                
                // 자동 크기 조절 초기화
                autoResizeTextarea(textarea);
                
                // 글자 수 표시 초기화
                updateCharCount(0);
                
                // 포커스 및 커서 위치 초기화
                textarea.focus();
                textarea.setSelectionRange(0, 0);
                
                showToast('답안이 지워졌습니다.', 'info');
            }
        }

        // 답안 제출 - 개선된 UX로 답안 비교 UI 표시
        function submitAnswer() {
            const userAnswer = document.getElementById('user-answer');
            const answerInputSection = document.getElementById('answer-input-section');
            const comparisonContainer = document.getElementById('answer-comparison-container');
            const questionSection = document.getElementById('question-section');
            
            if (!userAnswer || !userAnswer.value.trim()) {
                showToast('답안을 작성해주세요!', 'warning');
                userAnswer.focus();
                return;
            }
            
            const userAnswerText = userAnswer.value.trim();
            const currentCard = currentCards[currentCardIndex];
            
            // 답안 자동 저장
            saveAnswerDraft(userAnswerText);
            
            // 답안 입력 섹션을 축소하여 표시 (완전히 숨기지 않음)
            if (answerInputSection) {
                answerInputSection.style.transform = 'scale(0.95)';
                answerInputSection.style.opacity = '0.7';
                answerInputSection.style.pointerEvents = 'none';
            }
            
            // 문제 섹션은 계속 표시 (문제가 사라지지 않도록)
            if (questionSection) {
                questionSection.style.display = 'block';
                questionSection.classList.add('persistent');
            }
            
            // 답안 비교 UI 표시
            if (comparisonContainer) {
                comparisonContainer.style.display = 'block';
                comparisonContainer.classList.add('show');
                
                // 사용자 답안 표시 (개선된 포맷팅)
                const userAnswerDisplay = document.getElementById('user-answer-display');
                if (userAnswerDisplay) {
                    userAnswerDisplay.innerHTML = formatAnswerText(userAnswerText);
                }
                
                // 정답 표시 (개선된 포맷팅)
                const correctAnswerDisplay = document.getElementById('correct-answer-display');
                if (correctAnswerDisplay) {
                    correctAnswerDisplay.innerHTML = formatAnswerText(currentCard.answer);
                }
                
                // 채점 및 점수 표시
                const score = gradeAnswer(userAnswerText);
                displayComparisonScore(score);
                
                // 50점 미만 시 취약문제로 자동 분류
                if (score < 50) {
                    // 취약문제로 자동 분류
                    markAsWeak();
                    showToast(`⚠️ ${score}점으로 취약문제로 분류되었습니다. 복습을 권장합니다.`, 'warning');
                } else if (score >= 80) {
                    // 80점 이상 시 암기완료로 자동 분류
                    markAsMemorized();
                    showToast(`✅ ${score}점으로 암기완료로 분류되었습니다!`, 'success');
                } else {
                    // 50-79점 사이는 일반 학습으로 처리
                    showToast(`📚 ${score}점입니다. 더 학습해보세요!`, 'info');
                }
                
                // 답안 제출 후에만 암기법 표시
                const memoryTip = document.getElementById('memory-tip');
                if (memoryTip) {
                    memoryTip.style.display = 'block';
                    memoryTip.classList.add('show');
                }
                
                // 개선된 피드백 시스템
                showEnhancedFeedback(score, userAnswerText, currentCard);
                
                // 답안 재입력 버튼 추가
                addAnswerRetryButton();
                
                // 학습 데이터 저장 (점수 포함)
                saveLearningData(currentCard, userAnswerText, score);
                
                // 점수에 따른 학습 추천 시스템
                showLearningRecommendation(score, currentCard);
            }
        }
        
        // 점수에 따른 학습 추천 시스템
        function showLearningRecommendation(score, currentCard) {
            let recommendation = '';
            let recommendationType = 'info';
            
            if (score < 50) {
                recommendation = `🔴 취약문제로 분류되었습니다.\n\n📋 학습 추천:\n• 3일 후 재학습\n• 관련 문제 추가 학습\n• 암기법 활용\n• 반복 학습 권장`;
                recommendationType = 'warning';
            } else if (score < 70) {
                recommendation = `🟡 보통 수준입니다.\n\n📋 학습 추천:\n• 1일 후 재학습\n• 핵심 키워드 집중\n• 정답과 비교 학습\n• 추가 연습 권장`;
                recommendationType = 'info';
            } else if (score < 80) {
                recommendation = `🟢 양호한 수준입니다.\n\n📋 학습 추천:\n• 3일 후 재학습\n• 핵심 내용 정리\n• 암기법 활용\n• 완전 학습까지 노력`;
                recommendationType = 'success';
            } else {
                recommendation = `🟢 우수한 수준입니다!\n\n📋 학습 추천:\n• 1주일 후 재학습\n• 암기완료로 분류\n• 관련 고급 문제 학습\n• 지식 확장 학습`;
                recommendationType = 'success';
            }
            
            // 학습 추천 모달 표시
            setTimeout(() => {
                showToast(recommendation, recommendationType);
            }, 2000);
            
            // 취약문제 통계 업데이트
            updateWeakProblemStats();
        }
        
        // 취약문제 통계 업데이트
        function updateWeakProblemStats() {
            const weakProblems = JSON.parse(localStorage.getItem('weakProblems') || '[]');
            const totalProblems = cardDatabase.length;
            const weakCount = weakProblems.length;
            const weakPercentage = Math.round((weakCount / totalProblems) * 100);
            
            // 통계 표시
            if (weakCount > 0) {
                showToast(`📊 취약문제 현황: ${weakCount}개 (전체의 ${weakPercentage}%)`, 'info');
            }
        }
        
        // 답안 재입력 기능
        function retryAnswer() {
            const answerInputSection = document.getElementById('answer-input-section');
            const comparisonContainer = document.getElementById('answer-comparison-container');
            const userAnswer = document.getElementById('user-answer');
            
            if (answerInputSection) {
                answerInputSection.style.transform = 'scale(1)';
                answerInputSection.style.opacity = '1';
                answerInputSection.style.pointerEvents = 'auto';
            }
            
            if (comparisonContainer) {
                comparisonContainer.style.display = 'none';
                comparisonContainer.classList.remove('show');
            }
            
            if (userAnswer) {
                userAnswer.focus();
                userAnswer.select();
            }
            
            showToast('답안을 다시 작성해주세요.', 'info');
        }
        
        // 답안 재입력 버튼 추가
        function addAnswerRetryButton() {
            const comparisonContainer = document.getElementById('answer-comparison-container');
            if (!comparisonContainer) return;
            
            // 기존 재입력 버튼이 있으면 제거
            const existingRetryBtn = document.getElementById('retry-answer-btn');
            if (existingRetryBtn) {
                existingRetryBtn.remove();
            }
            
            // 새로운 재입력 버튼 생성
            const retryBtn = document.createElement('button');
            retryBtn.id = 'retry-answer-btn';
            retryBtn.className = 'action-btn secondary retry-btn';
            retryBtn.innerHTML = '🔄 답안 다시 작성';
            retryBtn.onclick = retryAnswer;
            
            // 버튼을 적절한 위치에 삽입
            const actionsContainer = comparisonContainer.querySelector('.answer-actions');
            if (actionsContainer) {
                actionsContainer.appendChild(retryBtn);
            } else {
                comparisonContainer.appendChild(retryBtn);
            }
        }
        
        // 답안 자동 저장
        function saveAnswerDraft(answer) {
            const currentCard = currentCards[currentCardIndex];
            if (currentCard) {
                localStorage.setItem(`draft_${currentCard.id}`, answer);
            }
        }
        
        // 저장된 답안 불러오기
        function loadAnswerDraft() {
            const currentCard = currentCards[currentCardIndex];
            if (currentCard) {
                const savedDraft = localStorage.getItem(`draft_${currentCard.id}`);
                if (savedDraft) {
                    const userAnswer = document.getElementById('user-answer');
                    if (userAnswer) {
                        userAnswer.value = savedDraft;
                        userAnswer.focus();
                    }
                }
            }
        }
        
        // 답안 텍스트 포맷팅
        function formatAnswerText(text) {
            if (!text) return '';
            
            return text
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/①|②|③|④|⑤|⑥|⑦|⑧|⑨|⑩/g, '<span class="number-bullet">$&</span>');
        }
        
        // 개선된 피드백 시스템
        function showEnhancedFeedback(score, userAnswer, currentCard) {
            let feedbackMessage = '';
            let feedbackType = 'info';
            
            if (score >= 90) {
                feedbackMessage = '🎉 완벽합니다! 모든 핵심 내용을 정확히 답하셨습니다.';
                feedbackType = 'success';
            } else if (score >= 80) {
                feedbackMessage = '👍 잘했습니다! 대부분의 내용을 정확히 답하셨습니다.';
                feedbackType = 'success';
            } else if (score >= 70) {
                feedbackMessage = '👌 좋습니다! 기본 내용은 파악하셨습니다.';
                feedbackType = 'info';
            } else if (score >= 50) {
                feedbackMessage = '📚 더 정확한 답안을 위해 힌트를 활용해보세요.';
                feedbackType = 'warning';
            } else {
                feedbackMessage = '💡 취약문제로 분류됩니다. 반복 학습을 권장합니다.';
                feedbackType = 'warning';
                markAsWeak();
            }
            
            showToast(feedbackMessage, feedbackType);
            
            // 점수 피드백 표시
            const scoreFeedback = document.getElementById('score-feedback');
            if (scoreFeedback) {
                scoreFeedback.textContent = feedbackMessage;
                scoreFeedback.className = `score-feedback ${feedbackType}`;
            }
            
            // 추가 학습 제안
            setTimeout(() => {
                if (score < 70) {
                    showToast('💡 힌트를 다시 확인하고 정답과 비교해보세요!', 'info');
                }
            }, 2000);
        }
        
        // 상세 분석 기능
        function showDetailedAnalysis() {
            const currentCard = currentCards[currentCardIndex];
            const userAnswer = document.getElementById('user-answer');
            const userAnswerText = userAnswer ? userAnswer.value.trim() : '';
            
            if (!userAnswerText) {
                showToast('분석할 답안이 없습니다.', 'warning');
                return;
            }
            
            // 상세 분석 모달 생성
            const modal = document.createElement('div');
            modal.className = 'analysis-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>📊 상세 분석</h3>
                        <button class="close-btn" onclick="closeAnalysisModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="analysis-section">
                            <h4>🔍 키워드 분석</h4>
                            <div class="keyword-analysis" id="keyword-analysis">
                                분석 중...
                            </div>
                        </div>
                        <div class="analysis-section">
                            <h4>📝 내용 비교</h4>
                            <div class="content-comparison" id="content-comparison">
                                비교 중...
                            </div>
                        </div>
                        <div class="analysis-section">
                            <h4>💡 개선 제안</h4>
                            <div class="improvement-suggestions" id="improvement-suggestions">
                                제안 생성 중...
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // 분석 실행
            performDetailedAnalysis(userAnswerText, currentCard);
        }
        
        // 상세 분석 실행
        function performDetailedAnalysis(userAnswer, currentCard) {
            const keywordAnalysis = document.getElementById('keyword-analysis');
            const contentComparison = document.getElementById('content-comparison');
            const improvementSuggestions = document.getElementById('improvement-suggestions');
            
            // 키워드 분석
            const keywords = extractKeywords(currentCard.answer);
            const userKeywords = extractKeywords(userAnswer);
            const matchedKeywords = keywords.filter(keyword => 
                userKeywords.some(userKeyword => 
                    userKeyword.toLowerCase().includes(keyword.toLowerCase()) ||
                    keyword.toLowerCase().includes(userKeyword.toLowerCase())
                )
            );
            
            keywordAnalysis.innerHTML = `
                <div class="keyword-stats">
                    <div class="stat-item">
                        <span class="stat-label">정답 키워드:</span>
                        <span class="stat-value">${keywords.length}개</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">매칭된 키워드:</span>
                        <span class="stat-value">${matchedKeywords.length}개</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">매칭률:</span>
                        <span class="stat-value">${Math.round((matchedKeywords.length / keywords.length) * 100)}%</span>
                    </div>
                </div>
                <div class="keyword-list">
                    <div class="matched-keywords">
                        <h5>✅ 포함된 키워드</h5>
                        <div class="keyword-tags">
                            ${matchedKeywords.map(keyword => `<span class="keyword-tag matched">${keyword}</span>`).join('')}
                        </div>
                    </div>
                    <div class="missing-keywords">
                        <h5>❌ 누락된 키워드</h5>
                        <div class="keyword-tags">
                            ${keywords.filter(k => !matchedKeywords.includes(k)).map(keyword => `<span class="keyword-tag missing">${keyword}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            // 내용 비교
            const similarity = calculateSimilarity(userAnswer, currentCard.answer);
            contentComparison.innerHTML = `
                <div class="similarity-score">
                    <div class="score-circle">
                        <span>${Math.round(similarity)}%</span>
                    </div>
                    <div class="score-label">유사도</div>
                </div>
                <div class="comparison-details">
                    <div class="detail-item">
                        <span class="detail-label">정답 길이:</span>
                        <span class="detail-value">${currentCard.answer.length}자</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">답안 길이:</span>
                        <span class="detail-value">${userAnswer.length}자</span>
                    </div>
                </div>
            `;
            
            // 개선 제안
            const suggestions = generateImprovementSuggestions(userAnswer, currentCard.answer, matchedKeywords, keywords);
            improvementSuggestions.innerHTML = `
                <div class="suggestions-list">
                    ${suggestions.map(suggestion => `
                        <div class="suggestion-item">
                            <span class="suggestion-icon">💡</span>
                            <span class="suggestion-text">${suggestion}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // 키워드 추출
        function extractKeywords(text) {
            return text
                .replace(/[①②③④⑤⑥⑦⑧⑨⑩]/g, '')
                .replace(/[•\n\r]/g, ' ')
                .split(' ')
                .filter(word => word.length > 1)
                .filter(word => !['및', '또는', '그리고', '또한', '또는', '그리고', '또한'].includes(word));
        }
        
        // 유사도 계산
        function calculateSimilarity(text1, text2) {
            const words1 = text1.toLowerCase().split(/\s+/);
            const words2 = text2.toLowerCase().split(/\s+/);
            const intersection = words1.filter(word => words2.includes(word));
            const union = [...new Set([...words1, ...words2])];
            return (intersection.length / union.length) * 100;
        }
        
        // 개선 제안 생성
        function generateImprovementSuggestions(userAnswer, correctAnswer, matchedKeywords, allKeywords) {
            const suggestions = [];
            
            if (matchedKeywords.length < allKeywords.length * 0.5) {
                suggestions.push('핵심 키워드를 더 많이 포함해보세요.');
            }
            
            if (userAnswer.length < correctAnswer.length * 0.5) {
                suggestions.push('답안을 더 구체적으로 작성해보세요.');
            }
            
            if (!userAnswer.includes('①') && !userAnswer.includes('1.')) {
                suggestions.push('답안을 번호나 항목으로 구분하여 작성해보세요.');
            }
            
            suggestions.push('정답과 비교하여 부족한 부분을 파악하고 보완해보세요.');
            suggestions.push('암기법을 활용하여 핵심 내용을 기억해보세요.');
            
            return suggestions;
        }
        
        // 분석 모달 닫기
        function closeAnalysisModal() {
            const modal = document.querySelector('.analysis-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // 모바일 네비게이션 토글
        function toggleNavbar() {
            const navbarMenu = document.querySelector('.navbar-menu');
            if (navbarMenu) {
                navbarMenu.classList.toggle('expanded');
                navbarMenu.classList.toggle('collapsed');
            }
        }
        
        // 모바일 네비게이션 자동 닫기
        function closeNavbarOnClick() {
            const navbarMenu = document.querySelector('.navbar-menu');
            if (navbarMenu && navbarMenu.classList.contains('expanded')) {
                navbarMenu.classList.remove('expanded');
                navbarMenu.classList.add('collapsed');
            }
        }
        
        // 모바일 터치 제스처 지원
        function initMobileGestures() {
            let startY = 0;
            let startX = 0;
            
            document.addEventListener('touchstart', function(e) {
                startY = e.touches[0].clientY;
                startX = e.touches[0].clientX;
            });
            
            document.addEventListener('touchmove', function(e) {
                if (!startY || !startX) return;
                
                const currentY = e.touches[0].clientY;
                const currentX = e.touches[0].clientX;
                const diffY = startY - currentY;
                const diffX = startX - currentX;
                
                // 스와이프 감지
                if (Math.abs(diffY) > Math.abs(diffX)) {
                    if (diffY > 50) {
                        // 위로 스와이프 - 다음 문제
                        if (typeof nextCard === 'function') {
                            nextCard();
                        }
                    } else if (diffY < -50) {
                        // 아래로 스와이프 - 이전 문제
                        if (typeof prevCard === 'function') {
                            prevCard();
                        }
                    }
                }
                
                startY = 0;
                startX = 0;
            });
        }
        
        // 모바일 가상 키보드 대응
        function handleMobileKeyboard() {
            const textarea = document.getElementById('user-answer');
            if (textarea) {
                textarea.addEventListener('focus', function() {
                    // 가상 키보드가 올라올 때 스크롤 조정
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
                
                textarea.addEventListener('blur', function() {
                    // 가상 키보드가 내려갈 때 스크롤 복원
                    setTimeout(() => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }, 300);
                });
            }
        }
        
        // 모바일 성능 최적화
        function optimizeMobilePerformance() {
            // 터치 이벤트 최적화
            document.addEventListener('touchstart', function() {}, { passive: true });
            document.addEventListener('touchmove', function() {}, { passive: true });
            
            // 스크롤 성능 최적화
            document.addEventListener('scroll', function() {}, { passive: true });
            
            // 리사이즈 이벤트 디바운싱
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(function() {
                    // 화면 크기 변경 시 레이아웃 재조정
                    if (window.innerWidth <= 768) {
                        closeNavbarOnClick();
                    }
                }, 250);
            });
        }
        
        // 모바일 초기화
        function initMobileOptimizations() {
            // 모바일 감지
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // 모바일 전용 초기화
                initMobileGestures();
                handleMobileKeyboard();
                optimizeMobilePerformance();
                
                // 모바일 네비게이션 초기화
                const navbarMenu = document.querySelector('.navbar-menu');
                if (navbarMenu) {
                    navbarMenu.classList.add('collapsed');
                }
                
                // 터치 이벤트로 네비게이션 닫기
                document.addEventListener('click', closeNavbarOnClick);
                
                // 모바일 메타 태그 최적화
                const viewport = document.querySelector('meta[name="viewport"]');
                if (viewport) {
                    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                }
            }
        }

        // 답안 채점 - 개선된 채점 시스템 (순수 함수 사용)
        function gradeAnswer(userAnswer) {
            const card = currentCards[currentCardIndex];
            
            // 순수 함수로 채점 수행
            const result = window.SafetyScoring.gradeAnswer(userAnswer, card);
            
            // 결과 표시
            displayGradingResult(result.score, result.feedback, result);
            
            // 학습 데이터 저장
            saveLearningData(card, userAnswer, result.score);
            
            // 취약문제 자동 분류
            if (window.SafetyScoring.isWeakProblem(result.score)) {
                markAsWeak();
            }
            
            // 점수 반환
            return result.score;
        }

        // 키워드 기반 채점
        function calculateKeywordScore(correctAnswer, userAnswer) {
            const correctKeywords = extractKeywords(correctAnswer);
            const userKeywords = extractKeywords(userAnswer);
            
            if (userKeywords.length === 0) return 0;
            
            let matchedKeywords = 0;
            const totalKeywords = correctKeywords.length;
            
            for (const keyword of correctKeywords) {
                if (userKeywords.some(userKeyword => 
                    userKeyword.includes(keyword) || keyword.includes(userKeyword)
                )) {
                    matchedKeywords++;
                }
            }
            
            return Math.round((matchedKeywords / totalKeywords) * 100);
        }

        // 의미적 유사도 채점
        function calculateSemanticScore(correctAnswer, userAnswer) {
            // 단어 유사도 계산
            const correctWords = correctAnswer.split(' ').filter(word => word.length > 1);
            const userWords = userAnswer.split(' ').filter(word => word.length > 1);
            
            if (userWords.length === 0) return 0;
            
            let semanticMatches = 0;
            const totalWords = correctWords.length;
            
            for (const correctWord of correctWords) {
                if (userWords.some(userWord => 
                    calculateWordSimilarity(correctWord, userWord) > 0.7
                )) {
                    semanticMatches++;
                }
            }
            
            return Math.round((semanticMatches / totalWords) * 100);
        }

        // 구조적 채점 (번호, 순서, 형식)
        function calculateStructureScore(correctAnswer, userAnswer) {
            let structureScore = 0;
            
            // 번호 매칭 (①, ②, ③ 등)
            const correctNumbers = correctAnswer.match(/[①②③④⑤⑥⑦⑧⑨⑩]/g) || [];
            const userNumbers = userAnswer.match(/[①②③④⑤⑥⑦⑧⑨⑩]/g) || [];
            const numberMatches = correctNumbers.filter(num => userNumbers.includes(num)).length;
            structureScore += (numberMatches / correctNumbers.length) * 30;
            
            // 순서 매칭
            const correctOrder = extractOrder(correctAnswer);
            const userOrder = extractOrder(userAnswer);
            const orderMatches = calculateOrderSimilarity(correctOrder, userOrder);
            structureScore += orderMatches * 20;
            
            // 형식 매칭 (%, mm, V 등)
            const correctFormats = extractFormats(correctAnswer);
            const userFormats = extractFormats(userAnswer);
            const formatMatches = correctFormats.filter(format => userFormats.includes(format)).length;
            structureScore += (formatMatches / correctFormats.length) * 50;
            
            return Math.min(Math.round(structureScore), 100);
        }

        // 단어 유사도 계산
        function calculateWordSimilarity(word1, word2) {
            const longer = word1.length > word2.length ? word1 : word2;
            const shorter = word1.length > word2.length ? word2 : word1;
            
            if (longer.length === 0) return 1.0;
            
            const editDistance = levenshteinDistance(longer, shorter);
            return (longer.length - editDistance) / longer.length;
        }

        // 레벤슈타인 거리 계산
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // 순서 추출
        function extractOrder(text) {
            return text.match(/\d+\.|\d+\)|①|②|③|④|⑤|⑥|⑦|⑧|⑨|⑩/g) || [];
        }

        // 순서 유사도 계산
        function calculateOrderSimilarity(order1, order2) {
            if (order1.length === 0 || order2.length === 0) return 0;
            
            let matches = 0;
            const minLength = Math.min(order1.length, order2.length);
            
            for (let i = 0; i < minLength; i++) {
                if (order1[i] === order2[i]) matches++;
            }
            
            return matches / Math.max(order1.length, order2.length);
        }

        // 형식 추출
        function extractFormats(text) {
            return text.match(/[\d%]+|[\d.]+mm|[\d.]+V|[\d.]+kg|[\d.]+m/g) || [];
        }

        // 키워드 추출 (개선된 버전)
        function extractKeywords(text) {
            // 숫자, 한글, 영문 키워드 추출 (개선된 정규식)
            const keywords = text.match(/[\d%]+|[가-힣]{2,}|[a-zA-Z]{2,}|[①②③④⑤⑥⑦⑧⑨⑩]/g) || [];
            return keywords.map(keyword => keyword.toLowerCase());
        }

        // 고급 피드백 생성
        function generateAdvancedFeedback(score, card, userAnswer, scoreBreakdown) {
            let feedback = '';
            const { keywordScore, semanticScore, structureScore } = scoreBreakdown;
            
            // 점수별 피드백
            if (score >= 90) {
                feedback = `🎉 완벽합니다! ${score}점으로 모든 요소를 정확히 파악했습니다.`;
            } else if (score >= 80) {
                feedback = `🌟 훌륭합니다! ${score}점으로 거의 완벽한 답안입니다.`;
            } else if (score >= 70) {
                feedback = `👍 잘했습니다! ${score}점으로 핵심 내용을 잘 이해했습니다.`;
            } else if (score >= 50) {
                feedback = `📚 보통입니다. ${score}점으로 일부 내용을 파악했습니다.`;
            } else {
                feedback = `💪 노력이 필요합니다. ${score}점으로 복습이 필요해요.`;
            }
            
            // 세부 점수 분석
            feedback += `\n\n📊 세부 분석:`;
            feedback += `\n• 키워드 매칭: ${keywordScore}점`;
            feedback += `\n• 의미적 유사도: ${semanticScore}점`;
            feedback += `\n• 구조적 정확성: ${structureScore}점`;
            
            // 개선 제안
            feedback += `\n\n💡 개선 제안:`;
            if (keywordScore < 70) {
                feedback += `\n• 핵심 키워드를 더 정확히 사용해보세요.`;
            }
            if (semanticScore < 70) {
                feedback += `\n• 정답의 의미를 더 깊이 이해해보세요.`;
            }
            if (structureScore < 70) {
                feedback += `\n• 번호, 순서, 형식을 정확히 맞춰보세요.`;
            }
            
            feedback += `\n\n📝 정답: ${card.answer}`;
            
            return feedback;
        }

        // 학습 데이터 저장 - API 동기화 포함
        async function saveLearningData(card, userAnswer, score) {
            const learningData = {
                cardId: card.id,
                question: card.question,
                correctAnswer: card.answer,
                userAnswer: userAnswer,
                score: score,
                timestamp: new Date().toISOString(),
                category: card.category,
                importance: card.importance
            };
            
            // 로컬 스토리지에 저장
            let learningHistory = JSON.parse(localStorage.getItem('learningHistory') || '[]');
            learningHistory.push(learningData);
            
            // 최근 100개만 유지
            if (learningHistory.length > 100) {
                learningHistory = learningHistory.slice(-100);
            }
            
            localStorage.setItem('learningHistory', JSON.stringify(learningHistory));
            
            // API 동기화 (선택적)
            try {
                await syncLearningHistoryToAPI(learningData);
            } catch (error) {
                console.warn('학습 이력 API 동기화 실패, 로컬 데이터만 저장됨:', error);
            }
            
            // 취약문제 데이터베이스 업데이트
            await updateWeakProblemDatabase(card, score);
        }

        // 학습 이력 API 동기화 함수
        async function syncLearningHistoryToAPI(learningData) {
            const userId = localStorage.getItem('userId') || 'anonymous';
            
            const response = await fetch('/api/safety/history', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    userId,
                    sessionAt: learningData.timestamp,
                    studied: 1,
                    correct: learningData.score >= 50 ? 1 : 0,
                    durationSec: 0, // 개별 문제는 0초로 설정
                    mode: 'card',
                    metadata: {
                        cardId: learningData.cardId,
                        question: learningData.question,
                        userAnswer: learningData.userAnswer,
                        score: learningData.score,
                        category: learningData.category,
                        importance: learningData.importance
                    }
                })
            });
            
            if (!response.ok) {
                throw new Error(`API 요청 실패: ${response.status}`);
            }
            
            const result = await response.json();
            console.log('학습 이력 API 동기화 완료:', result);
        }

        // 취약문제 데이터베이스 업데이트 - 개선도 추적 시스템 + API 연동
        async function updateWeakProblemDatabase(card, score) {
            let weakProblems = JSON.parse(localStorage.getItem('weakProblems') || '[]');
            const existingIndex = weakProblems.findIndex(problem => problem.cardId === card.id);
            
            if (score < 50) {
                // 50점 미만: 취약문제로 분류
                const weakProblemData = {
                    cardId: card.id,
                    question: card.question,
                    correctAnswer: card.answer,
                    category: card.category,
                    importance: card.importance,
                    firstFailedAt: new Date().toISOString(),
                    lastFailedAt: new Date().toISOString(),
                    failureCount: 1,
                    lowestScore: score,
                    needsReview: true,
                    improvementHistory: []
                };
                
                if (existingIndex >= 0) {
                    // 기존 취약문제 업데이트
                    weakProblems[existingIndex].failureCount++;
                    weakProblems[existingIndex].lastFailedAt = new Date().toISOString();
                    weakProblems[existingIndex].lowestScore = Math.min(weakProblems[existingIndex].lowestScore, score);
                    weakProblems[existingIndex].needsReview = true;
                    
                    // 개선도 기록
                    const previousScore = weakProblems[existingIndex].lastScore || 0;
                    const improvement = score - previousScore;
                    weakProblems[existingIndex].improvementHistory.push({
                        score: score,
                        improvement: improvement,
                        timestamp: new Date().toISOString()
                    });
                    weakProblems[existingIndex].lastScore = score;
                } else {
                    // 새로운 취약문제 추가
                    weakProblems.push(weakProblemData);
                }
            } else if (existingIndex >= 0) {
                // 50점 이상: 기존 취약문제 개선도 추적
                const previousScore = weakProblems[existingIndex].lastScore || 0;
                const improvement = score - previousScore;
                
                weakProblems[existingIndex].improvementHistory.push({
                    score: score,
                    improvement: improvement,
                    timestamp: new Date().toISOString()
                });
                weakProblems[existingIndex].lastScore = score;
                
                // 개선도가 충분한 경우 복습 완료로 표시
                if (score >= 70 && improvement >= 20) {
                    weakProblems[existingIndex].needsReview = false;
                    weakProblems[existingIndex].completedAt = new Date().toISOString();
                    weakProblems[existingIndex].finalScore = score;
                }
            }
            
            localStorage.setItem('weakProblems', JSON.stringify(weakProblems));
            
            // API 동기화 (선택적)
            try {
                await syncWeakProblemsToAPI(card, score);
            } catch (error) {
                console.warn('API 동기화 실패, 로컬 데이터만 저장됨:', error);
            }
            
            // 취약문제 통계 업데이트
            updateWeakProblemStats();
        }

        // API 동기화 함수
        async function syncWeakProblemsToAPI(card, score) {
            const userId = localStorage.getItem('userId') || 'anonymous';
            
            const response = await fetch('/api/safety/weak-problems', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    userId,
                    cardId: card.id,
                    score: score,
                    needsReview: score < 50,
                    attempts: 1,
                    lastAttemptAt: new Date().toISOString(),
                    metadata: {
                        question: card.question,
                        answer: card.answer,
                        category: card.category,
                        importance: card.importance
                    }
                })
            });
            
            if (!response.ok) {
                throw new Error(`API 요청 실패: ${response.status}`);
            }
            
            const result = await response.json();
            console.log('취약문제 API 동기화 완료:', result);
        }

        // 취약문제 통계 업데이트 - 학습 효율성 분석
        function updateWeakProblemStats() {
            const weakProblems = JSON.parse(localStorage.getItem('weakProblems') || '[]');
            const totalWeakProblems = weakProblems.length;
            const needsReviewCount = weakProblems.filter(p => p.needsReview).length;
            const completedCount = weakProblems.filter(p => !p.needsReview && p.completedAt).length;
            
            // 학습 효율성 분석
            const learningEfficiency = calculateLearningEfficiency();
            
            // 통계 표시 업데이트
            const weakProblemCount = document.getElementById('weak-problem-count');
            if (weakProblemCount) {
                weakProblemCount.textContent = totalWeakProblems;
            }
            
            const needsReviewCountElement = document.getElementById('needs-review-count');
            if (needsReviewCountElement) {
                needsReviewCountElement.textContent = needsReviewCount;
            }
            
            // 학습 효율성 표시
            displayLearningEfficiency(learningEfficiency);
        }

        // 학습 효율성 계산
        function calculateLearningEfficiency() {
            const learningHistory = JSON.parse(localStorage.getItem('learningHistory') || '[]');
            const weakProblems = JSON.parse(localStorage.getItem('weakProblems') || '[]');
            
            if (learningHistory.length === 0) {
                return { efficiency: 0, trend: 'stable', recommendation: '학습을 시작해보세요!' };
            }
            
            // 최근 10개 학습 기록 분석
            const recentHistory = learningHistory.slice(-10);
            const averageScore = recentHistory.reduce((sum, record) => sum + record.score, 0) / recentHistory.length;
            
            // 점수 향상 추세 분석
            const firstHalf = recentHistory.slice(0, Math.floor(recentHistory.length / 2));
            const secondHalf = recentHistory.slice(Math.floor(recentHistory.length / 2));
            const firstHalfAvg = firstHalf.reduce((sum, record) => sum + record.score, 0) / firstHalf.length;
            const secondHalfAvg = secondHalf.reduce((sum, record) => sum + record.score, 0) / secondHalf.length;
            const improvement = secondHalfAvg - firstHalfAvg;
            
            // 효율성 등급 결정
            let efficiency = 0;
            let trend = 'stable';
            let recommendation = '';
            
            if (averageScore >= 80) {
                efficiency = 90;
                trend = 'excellent';
                recommendation = '훌륭합니다! 계속 이대로 학습하세요!';
            } else if (averageScore >= 70) {
                efficiency = 75;
                trend = 'good';
                recommendation = '잘하고 있습니다! 조금만 더 노력하면 완벽해요!';
            } else if (averageScore >= 50) {
                efficiency = 60;
                trend = 'fair';
                recommendation = '보통 수준입니다. 취약문제 복습을 권장합니다.';
            } else {
                efficiency = 30;
                trend = 'poor';
                recommendation = '기초부터 다시 학습하시는 것을 권장합니다.';
            }
            
            // 개선 추세 반영
            if (improvement > 10) {
                efficiency += 10;
                trend = 'improving';
                recommendation += ' 점수가 계속 향상되고 있어요!';
            } else if (improvement < -10) {
                efficiency -= 10;
                trend = 'declining';
                recommendation += ' 점수가 하락하고 있습니다. 복습이 필요해요.';
            }
            
            return {
                efficiency: Math.min(Math.max(efficiency, 0), 100),
                trend: trend,
                recommendation: recommendation,
                averageScore: Math.round(averageScore),
                improvement: Math.round(improvement)
            };
        }

        // 학습 효율성 표시
        function displayLearningEfficiency(efficiency) {
            const efficiencyElement = document.getElementById('learning-efficiency');
            if (efficiencyElement) {
                efficiencyElement.innerHTML = `
                    <div class="efficiency-display">
                        <div class="efficiency-score">${efficiency.efficiency}%</div>
                        <div class="efficiency-trend ${efficiency.trend}">
                            ${efficiency.trend === 'improving' ? '📈' : 
                              efficiency.trend === 'declining' ? '📉' : '📊'}
                        </div>
                        <div class="efficiency-recommendation">${efficiency.recommendation}</div>
                    </div>
                `;
            }
        }

        // 답안 비교 점수 표시
        function displayComparisonScore(score) {
            const scoreCircle = document.getElementById('score-circle');
            const scoreNumber = document.getElementById('score-number');
            const scoreLabel = document.getElementById('score-label');
            
            if (scoreCircle && scoreNumber && scoreLabel) {
                scoreNumber.textContent = score;
                
                // 점수에 따른 스타일 변경
                scoreCircle.className = 'score-circle';
                if (score >= 90) {
                    scoreCircle.classList.add('excellent');
                    scoreLabel.textContent = '완벽!';
                } else if (score >= 80) {
                    scoreCircle.classList.add('good');
                    scoreLabel.textContent = '훌륭함';
                } else if (score >= 70) {
                    scoreCircle.classList.add('fair');
                    scoreLabel.textContent = '양호';
                } else if (score >= 50) {
                    scoreCircle.classList.add('fair');
                    scoreLabel.textContent = '보통';
                } else {
                    scoreCircle.classList.add('poor');
                    scoreLabel.textContent = '개선 필요';
                }
            }
        }

        // 다시 보기 버튼 클릭
        function reviewAnswerAgain() {
            const comparisonContainer = document.getElementById('answer-comparison-container');
            const answerInputSection = document.getElementById('answer-input-section');
            const userAnswer = document.getElementById('user-answer');
            
            if (comparisonContainer) {
                comparisonContainer.style.display = 'none';
                comparisonContainer.classList.remove('show');
            }
            
            if (answerInputSection) {
                answerInputSection.style.display = 'block';
            }
            
            if (userAnswer) {
                userAnswer.focus();
                userAnswer.setSelectionRange(userAnswer.value.length, userAnswer.value.length);
            }
            
            showToast('답안을 다시 작성해보세요!', 'info');
        }

        // 완전히 이해함 버튼 클릭
        function markAsUnderstood() {
            const comparisonContainer = document.getElementById('answer-comparison-container');
            const gradingSection = document.getElementById('grading-section');
            
            if (comparisonContainer) {
                comparisonContainer.style.display = 'none';
                comparisonContainer.classList.remove('show');
            }
            
            if (gradingSection) {
                gradingSection.style.display = 'block';
            }
            
            // 암기완료로 자동 처리
            markAsMemorized();
            
            showToast('완벽하게 이해하셨습니다! 다음 문제로 넘어가세요.', 'success');
        }

        // ===== 16:9 고몰입 학습 시스템 =====
        
        // 고몰입 학습 변수
        let immersiveCards = [];
        let immersiveCurrentIndex = 0;
        let immersiveStartTime = null;
        let immersiveStats = {
            correctCount: 0,
            totalCount: 0,
            streakCount: 0,
            maxStreak: 0,
            learningTime: 0,
            focusLevel: '높음'
        };

        // 고몰입 학습 시작
        function startImmersiveLearning() {
            try {
                // 버튼 로딩 상태 표시
                const button = document.querySelector('.navbar-btn.primary');
                if (button) {
                    button.classList.add('loading');
                }
                
                // 1초 후 로딩 완료 및 성공 애니메이션
                setTimeout(() => {
                    if (button) {
                        button.classList.remove('loading');
                        button.classList.add('success');
                    }
                    
                    // 카드 데이터 준비
                    immersiveCards = [...cardDatabase];
                    immersiveCurrentIndex = 0;
                    immersiveStartTime = Date.now();
                    immersiveStats = {
                        correctCount: 0,
                        totalCount: 0,
                        streakCount: 0,
                        maxStreak: 0,
                        learningTime: 0,
                        focusLevel: '높음'
                    };

                    // 고몰입 모드 활성화
                    const container = document.getElementById('immersive-learning-container');
                    if (container) {
                        container.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    }

                    // 첫 번째 카드 표시
                    showImmersiveCard(0);
                    
                    // 학습 분석 대시보드 표시
                    showLearningAnalytics();
                    
                    // 실시간 통계 업데이트 시작
                    startImmersiveStatsUpdate();
                    
                    // 성공 애니메이션 완료 후 클래스 제거
                    setTimeout(() => {
                        if (button) {
                            button.classList.remove('success');
                        }
                    }, 600);
                    
                }, 1000);
                
                showToast('🎯 고몰입 학습 모드가 시작되었습니다!', 'success');
                
            } catch (error) {
                console.error('고몰입 학습 시작 중 오류:', error);
                showToast('고몰입 학습 시작 중 오류가 발생했습니다.', 'error');
            }
        }

        // 고몰입 학습 종료
        function closeImmersiveLearning() {
            const container = document.getElementById('immersive-learning-container');
            if (container) {
                container.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            
            // 학습 통계 저장
            saveImmersiveLearningStats();
            
            showToast('고몰입 학습이 종료되었습니다.', 'info');
        }

        // 고몰입 학습 키보드 네비게이션
        function handleImmersiveKeydown(e) {
            const container = document.getElementById('immersive-learning-container');
            if (!container || !container.classList.contains('active')) return;

            switch(e.key) {
                case 'ArrowLeft': // 왼쪽 화살표 - 이전 문제
                    e.preventDefault();
                    if (immersiveCurrentIndex > 0) {
                        showImmersiveCard(immersiveCurrentIndex - 1);
                        showToast('이전 문제로 이동', 'info');
                    }
                    break;
                case 'ArrowRight': // 오른쪽 화살표 - 다음 문제
                    e.preventDefault();
                    nextImmersiveCard();
                    showToast('다음 문제로 이동', 'info');
                    break;
                case 'ArrowUp': // 위쪽 화살표 - 정답 확인
                    e.preventDefault();
                    showImmersiveAnswer();
                    showToast('정답을 확인하세요!', 'info');
                    break;
                case 'ArrowDown': // 아래쪽 화살표 - 힌트 보기
                    e.preventDefault();
                    showImmersiveHint();
                    showToast('힌트를 확인하세요!', 'info');
                    break;
                case 'Enter': // 엔터키 - 답안 제출
                    e.preventDefault();
                    submitImmersiveAnswer();
                    break;
                case ' ': // 스페이스바 - 정답 확인
                    e.preventDefault();
                    showImmersiveAnswer();
                    break;
                case 'h': // H키 - 힌트
                    e.preventDefault();
                    showImmersiveHint();
                    break;
                case 'm': // M키 - 암기완료
                    e.preventDefault();
                    markImmersiveMemorized();
                    break;
                case 'w': // W키 - 취약문제
                    e.preventDefault();
                    markImmersiveWeak();
                    break;
            }
        }

        // 고몰입 카드 표시
        function showImmersiveCard(index) {
            if (index >= immersiveCards.length) {
                showImmersiveResults();
                return;
            }

            const card = immersiveCards[index];
            immersiveCurrentIndex = index;

            // 문제 표시
            const questionElement = document.getElementById('immersive-question');
            const questionNumberElement = document.getElementById('question-number');
            
            if (questionElement) {
                questionElement.textContent = card.question;
            }
            
            if (questionNumberElement) {
                questionNumberElement.textContent = `${index + 1} / ${immersiveCards.length}`;
            }

            // 정답 섹션 숨기기
            const answerSection = document.getElementById('card-answer-section');
            if (answerSection) {
                answerSection.classList.remove('show');
            }

            // 힌트 숨기기
            const hintElement = document.getElementById('immersive-hint');
            if (hintElement) {
                hintElement.classList.remove('show');
            }

            // 버튼 상태 초기화
            resetImmersiveButtons();

            // 진행률 업데이트
            updateImmersiveProgress();
        }

        // 고몰입 정답 표시
        function showImmersiveAnswer() {
            const card = immersiveCards[immersiveCurrentIndex];
            const answerSection = document.getElementById('card-answer-section');
            const answerElement = document.getElementById('immersive-answer');
            
            if (answerSection && answerElement) {
                answerElement.textContent = card.answer;
                answerSection.classList.add('show');
            }

            // 버튼 상태 변경
            const showAnswerBtn = document.getElementById('show-answer-btn');
            const markMemorizedBtn = document.getElementById('mark-memorized-btn');
            const nextCardBtn = document.getElementById('next-card-btn');
            
            if (showAnswerBtn) showAnswerBtn.style.display = 'none';
            if (markMemorizedBtn) markMemorizedBtn.style.display = 'flex';
            if (nextCardBtn) nextCardBtn.style.display = 'flex';
        }

        // 고몰입 힌트 표시
        function showImmersiveHint() {
            const card = immersiveCards[immersiveCurrentIndex];
            const hintElement = document.getElementById('immersive-hint');
            
            if (hintElement) {
                hintElement.textContent = card.hint || '힌트가 없습니다.';
                hintElement.classList.add('show');
            }
        }

        // 고몰입 취약문제 표시
        function markImmersiveWeak() {
            const card = immersiveCards[immersiveCurrentIndex];
            
            // 취약문제 데이터베이스에 추가
            updateWeakProblemDatabase(card, 0);
            
            immersiveStats.streakCount = 0;
            updateImmersiveStats();
            
            showToast('취약문제로 분류되었습니다.', 'warning');
            nextImmersiveCard();
        }

        // 고몰입 암기완료
        function markImmersiveMemorized() {
            immersiveStats.correctCount++;
            immersiveStats.streakCount++;
            immersiveStats.maxStreak = Math.max(immersiveStats.maxStreak, immersiveStats.streakCount);
            
            updateImmersiveStats();
            showToast('암기완료! 연속 정답이 늘어났습니다! 🔥', 'success');
            
            // 연속 정답 효과
            if (immersiveStats.streakCount >= 5) {
                showLearningStreak();
            }
            
            nextImmersiveCard();
        }

        // 다음 고몰입 카드
        function nextImmersiveCard() {
            immersiveStats.totalCount++;
            showImmersiveCard(immersiveCurrentIndex + 1);
        }

        // 고몰입 버튼 상태 초기화
        function resetImmersiveButtons() {
            const showAnswerBtn = document.getElementById('show-answer-btn');
            const markMemorizedBtn = document.getElementById('mark-memorized-btn');
            const nextCardBtn = document.getElementById('next-card-btn');
            
            if (showAnswerBtn) showAnswerBtn.style.display = 'flex';
            if (markMemorizedBtn) markMemorizedBtn.style.display = 'none';
            if (nextCardBtn) nextCardBtn.style.display = 'none';
        }

        // 고몰입 진행률 업데이트
        function updateImmersiveProgress() {
            const progress = Math.round((immersiveCurrentIndex / immersiveCards.length) * 100);
            const progressCircle = document.getElementById('progress-circle');
            const progressText = document.getElementById('progress-text');
            
            if (progressCircle) {
                progressCircle.style.setProperty('--progress-angle', `${progress * 3.6}deg`);
            }
            
            if (progressText) {
                progressText.textContent = `${progress}%`;
            }
        }

        // 고몰입 통계 업데이트
        function updateImmersiveStats() {
            const accuracy = immersiveStats.totalCount > 0 ? 
                Math.round((immersiveStats.correctCount / immersiveStats.totalCount) * 100) : 0;
            
            const currentStreak = document.getElementById('current-streak');
            const efficiency = document.getElementById('efficiency');
            
            if (currentStreak) {
                currentStreak.textContent = immersiveStats.streakCount;
            }
            
            if (efficiency) {
                efficiency.textContent = `${accuracy}%`;
            }
        }

        // 학습 분석 대시보드 표시
        function showLearningAnalytics() {
            const analytics = document.getElementById('learning-analytics');
            if (analytics) {
                analytics.style.display = 'block';
            }
        }

        // 실시간 통계 업데이트
        function startImmersiveStatsUpdate() {
            setInterval(() => {
                if (immersiveStartTime) {
                    immersiveStats.learningTime = Math.floor((Date.now() - immersiveStartTime) / 1000 / 60);
                    
                    const learningTime = document.getElementById('learning-time');
                    const accuracyRate = document.getElementById('accuracy-rate');
                    const streakCount = document.getElementById('streak-count');
                    const learningSpeed = document.getElementById('learning-speed');
                    
                    if (learningTime) {
                        learningTime.textContent = `${immersiveStats.learningTime}분`;
                    }
                    
                    if (accuracyRate) {
                        const accuracy = immersiveStats.totalCount > 0 ? 
                            Math.round((immersiveStats.correctCount / immersiveStats.totalCount) * 100) : 0;
                        accuracyRate.textContent = `${accuracy}%`;
                    }
                    
                    if (streakCount) {
                        streakCount.textContent = immersiveStats.streakCount;
                    }
                    
                    if (learningSpeed) {
                        const speed = immersiveStats.learningTime > 0 ? 
                            Math.round(immersiveStats.totalCount / immersiveStats.learningTime) : 0;
                        if (speed >= 3) learningSpeed.textContent = '빠름';
                        else if (speed >= 1) learningSpeed.textContent = '보통';
                        else learningSpeed.textContent = '느림';
                    }
                }
            }, 1000);
        }

        // 학습 연속성 표시
        function showLearningStreak() {
            const streakElement = document.getElementById('learning-streak');
            if (streakElement) {
                streakElement.style.display = 'block';
                setTimeout(() => {
                    streakElement.style.display = 'none';
                }, 2000);
            }
        }

        // 고몰입 학습 결과 표시
        function showImmersiveResults() {
            const accuracy = Math.round((immersiveStats.correctCount / immersiveStats.totalCount) * 100);
            const message = `
                🎉 고몰입 학습 완료!
                
                📊 학습 결과:
                • 총 문제: ${immersiveStats.totalCount}개
                • 정답: ${immersiveStats.correctCount}개
                • 정답률: ${accuracy}%
                • 최대 연속: ${immersiveStats.maxStreak}개
                • 학습 시간: ${immersiveStats.learningTime}분
            `;
            
            showToast(message, 'success');
            closeImmersiveLearning();
        }

        // 고몰입 학습 통계 저장
        function saveImmersiveLearningStats() {
            const stats = {
                ...immersiveStats,
                completedAt: new Date().toISOString(),
                mode: 'immersive'
            };
            
            let learningHistory = JSON.parse(localStorage.getItem('immersiveLearningHistory') || '[]');
            learningHistory.push(stats);
            
            if (learningHistory.length > 50) {
                learningHistory = learningHistory.slice(-50);
            }
            
            localStorage.setItem('immersiveLearningHistory', JSON.stringify(learningHistory));
        }

        // 고몰입 답안 입력 처리
        function handleImmersiveAnswerKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitImmersiveAnswer();
            } else if (e.key === 'v' || e.key === 'V') {
                e.preventDefault();
                startImmersiveVoiceInput();
            }
        }

        function handleImmersiveAnswerInput(e) {
            // 자동 저장 기능
            const answer = e.target.value;
            localStorage.setItem('immersiveAnswerDraft', answer);
        }

        function showImmersiveAnswerTips() {
            const tips = document.getElementById('immersive-answer-tips');
            if (tips) {
                tips.classList.remove('hidden-element');
            }
        }

        function hideImmersiveAnswerTips() {
            const tips = document.getElementById('immersive-answer-tips');
            if (tips) {
                tips.classList.add('hidden-element');
            }
        }

        function clearImmersiveAnswer() {
            const textarea = document.getElementById('immersive-user-answer');
            if (textarea) {
                textarea.value = '';
                textarea.focus();
            }
        }

        function toggleImmersiveAnswerHelp() {
            const help = document.getElementById('immersive-answer-help');
            if (help) {
                help.classList.toggle('hidden-element');
            }
        }

        // 고몰입 답안 제출
        function submitImmersiveAnswer() {
            const textarea = document.getElementById('immersive-user-answer');
            const userAnswer = textarea ? textarea.value.trim() : '';
            
            if (!userAnswer) {
                showToast('답안을 입력해주세요!', 'warning');
                return;
            }

            // 답안 평가
            const score = evaluateImmersiveAnswer(userAnswer);
            
            // 답안 비교 표시
            showImmersiveAnswerComparison(userAnswer, score);
            
            // 점수에 따른 처리
            if (score < 50) {
                markImmersiveWeak();
                showToast(`점수: ${score}점 - 취약문제로 분류되었습니다.`, 'warning');
            } else {
                showToast(`점수: ${score}점 - 잘하셨습니다!`, 'success');
            }
        }

        // 고몰입 답안 평가 - 개선된 채점 시스템
        function evaluateImmersiveAnswer(userAnswer) {
            const card = immersiveCards[immersiveCurrentIndex];
            
            // 순수 함수로 채점 수행
            const result = window.SafetyScoring.gradeAnswer(userAnswer, card);
            
            // 결과 표시
            showImmersiveAnswerComparison(userAnswer, result.score);
            
            // 점수에 따른 처리
            if (result.score < 50) {
                markImmersiveWeak();
                showToast(`점수: ${result.score}점 - 취약문제로 분류되었습니다.`, 'warning');
            } else {
                showToast(`점수: ${result.score}점 - 잘하셨습니다!`, 'success');
            }
            
            return result.score;
        }

        // 키워드 추출 함수
        function extractKeywords(text) {
            // 특수문자 제거 및 단어 분리
            const words = text.replace(/[^\w\s가-힣]/g, ' ')
                            .split(/\s+/)
                            .filter(word => word.length > 1);
            
            // 불용어 제거
            const stopWords = ['그리고', '또한', '또는', '그러나', '하지만', '따라서', '그러므로', '그런데', '그리고', '또한'];
            return words.filter(word => !stopWords.includes(word));
        }

        // 문자열 유사도 계산
        function calculateSimilarity(str1, str2) {
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            
            if (longer.length === 0) return 1.0;
            
            const editDistance = levenshteinDistance(longer, shorter);
            return (longer.length - editDistance) / longer.length;
        }

        // 레벤슈타인 거리 계산
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // 답안 비교 표시
        function showImmersiveAnswerComparison(userAnswer, score) {
            const card = immersiveCards[immersiveCurrentIndex];
            const comparisonContainer = document.getElementById('immersive-answer-comparison-container');
            const userAnswerDisplay = document.getElementById('immersive-user-answer-display');
            const correctAnswerDisplay = document.getElementById('immersive-correct-answer-display');
            const userScore = document.getElementById('immersive-user-score');
            
            if (comparisonContainer && userAnswerDisplay && correctAnswerDisplay && userScore) {
                userAnswerDisplay.textContent = userAnswer;
                correctAnswerDisplay.textContent = card.answer;
                userScore.textContent = `${score}점`;
                
                // 점수에 따른 색상 변경
                if (score >= 80) {
                    userScore.style.background = 'rgba(76, 175, 80, 0.8)';
                } else if (score >= 50) {
                    userScore.style.background = 'rgba(255, 193, 7, 0.8)';
                } else {
                    userScore.style.background = 'rgba(244, 67, 54, 0.8)';
                }
                
                comparisonContainer.classList.add('show');
            }
        }

        // 이전 문제로 이동
        function previousImmersiveCard() {
            if (immersiveCurrentIndex > 0) {
                showImmersiveCard(immersiveCurrentIndex - 1);
                showToast('이전 문제로 이동', 'info');
            }
        }

        // 음성 인식 변수
        let immersiveRecognition = null;
        let isImmersiveListening = false;

        // 고몰입 음성 입력 시작 - 개선된 UX
        function startImmersiveVoiceInput() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                showToast('이 브라우저는 음성 인식을 지원하지 않습니다. Chrome을 사용해주세요.', 'error');
                return;
            }

            if (isImmersiveListening) {
                stopImmersiveVoiceInput();
                return;
            }

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            immersiveRecognition = new SpeechRecognition();
            
            immersiveRecognition.continuous = false;
            immersiveRecognition.interimResults = true; // 중간 결과 표시
            immersiveRecognition.lang = 'ko-KR';
            immersiveRecognition.maxAlternatives = 1;

            immersiveRecognition.onstart = function() {
                isImmersiveListening = true;
                showToast('🎤 음성 인식 중... 말씀해주세요!', 'info');
                updateImmersiveVoiceButtonState(true);
            };

            immersiveRecognition.onresult = function(event) {
                let finalTranscript = '';
                let interimTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript;
                    } else {
                        interimTranscript += transcript;
                    }
                }

                const textarea = document.getElementById('immersive-user-answer');
                if (textarea) {
                    if (finalTranscript) {
                        textarea.value = finalTranscript;
                        showToast('음성 인식 완료!', 'success');
                        // 자동 제출 옵션 (사용자 설정에 따라)
                        const autoSubmit = localStorage.getItem('voiceAutoSubmit') === 'true';
                        if (autoSubmit) {
                            setTimeout(() => submitImmersiveAnswer(), 500);
                        }
                    } else if (interimTranscript) {
                        // 중간 결과 표시
                        textarea.value = interimTranscript;
                    }
                    textarea.focus();
                }
            };

            immersiveRecognition.onerror = function(event) {
                let errorMessage = '음성 인식 오류가 발생했습니다.';
                switch (event.error) {
                    case 'no-speech':
                        errorMessage = '음성이 감지되지 않았습니다. 다시 시도해주세요.';
                        break;
                    case 'audio-capture':
                        errorMessage = '마이크에 접근할 수 없습니다. 권한을 확인해주세요.';
                        break;
                    case 'not-allowed':
                        errorMessage = '마이크 권한이 거부되었습니다. 브라우저 설정을 확인해주세요.';
                        break;
                    case 'network':
                        errorMessage = '네트워크 오류가 발생했습니다.';
                        break;
                }
                showToast(errorMessage, 'error');
                isImmersiveListening = false;
                updateImmersiveVoiceButtonState(false);
            };

            immersiveRecognition.onend = function() {
                isImmersiveListening = false;
                updateImmersiveVoiceButtonState(false);
            };

            try {
                immersiveRecognition.start();
            } catch (error) {
                showToast('음성 인식을 시작할 수 없습니다. 마이크 권한을 확인해주세요.', 'error');
                isImmersiveListening = false;
                updateImmersiveVoiceButtonState(false);
            }
        }

        // 고몰입 음성 입력 중지
        function stopImmersiveVoiceInput() {
            if (immersiveRecognition && isImmersiveListening) {
                immersiveRecognition.stop();
                isImmersiveListening = false;
                updateImmersiveVoiceButtonState(false);
                showToast('음성 인식이 중지되었습니다.', 'info');
            }
        }

        // 몰입 모드 음성 버튼 상태 업데이트
        function updateImmersiveVoiceButtonState(listening) {
            const voiceBtn = document.querySelector('#immersive-learning-container .voice-btn');
            if (voiceBtn) {
                if (listening) {
                    voiceBtn.classList.add('listening');
                    voiceBtn.innerHTML = '<span>🔴</span><span class="nav-label">중지</span>';
                } else {
                    voiceBtn.classList.remove('listening');
                    voiceBtn.innerHTML = '<span>🎤</span><span class="nav-label">음성</span>';
                }
            }
        }

        // 모바일 최적화 기능
        let isMobile = false;
        let isKeyboardOpen = false;
        let touchStartY = 0;
        let touchStartX = 0;

        // 모바일 감지
        function detectMobile() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent.toLowerCase());
            
            if (isMobile) {
                document.body.classList.add('mobile-optimized');
                setupMobileOptimizations();
            }
        }

        // 모바일 최적화 설정
        function setupMobileOptimizations() {
            // 터치 이벤트 최적화
            document.addEventListener('touchstart', handleTouchStart, { passive: true });
            document.addEventListener('touchmove', handleTouchMove, { passive: true });
            document.addEventListener('touchend', handleTouchEnd, { passive: true });

            // 가상 키보드 감지
            setupKeyboardDetection();
            
            // 모바일 성능 최적화
            setupMobilePerformance();
            
            // 모바일 네비게이션 최적화
            setupMobileNavigation();
        }

        // 터치 시작
        function handleTouchStart(e) {
            touchStartY = e.touches[0].clientY;
            touchStartX = e.touches[0].clientX;
        }

        // 터치 이동
        function handleTouchMove(e) {
            const touchY = e.touches[0].clientY;
            const touchX = e.touches[0].clientX;
            const deltaY = touchStartY - touchY;
            const deltaX = touchStartX - touchX;

            // 스와이프 제스처 감지
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                if (deltaX > 50) {
                    // 오른쪽 스와이프 - 다음 문제
                    if (isImmersiveMode()) {
                        nextImmersiveCard();
                    } else {
                        nextCard();
                    }
                } else if (deltaX < -50) {
                    // 왼쪽 스와이프 - 이전 문제
                    if (isImmersiveMode()) {
                        previousImmersiveCard();
                    } else {
                        previousCard();
                    }
                }
            } else {
                if (deltaY > 50) {
                    // 위쪽 스와이프 - 정답 보기
                    if (isImmersiveMode()) {
                        showImmersiveAnswer();
                    } else {
                        showAnswer();
                    }
                } else if (deltaY < -50) {
                    // 아래쪽 스와이프 - 힌트 보기
                    if (isImmersiveMode()) {
                        showImmersiveHint();
                    } else {
                        showHint();
                    }
                }
            }
        }

        // 터치 종료
        function handleTouchEnd(e) {
            // 터치 피드백 효과
            const target = e.target.closest('.nav-btn, .tool-btn, .immersive-btn');
            if (target) {
                target.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    target.style.transform = '';
                }, 150);
            }
        }

        // 가상 키보드 감지
        function setupKeyboardDetection() {
            const initialViewportHeight = window.innerHeight;
            let currentViewportHeight = initialViewportHeight;

            window.addEventListener('resize', () => {
                currentViewportHeight = window.innerHeight;
                const heightDifference = initialViewportHeight - currentViewportHeight;
                
                if (heightDifference > 150) {
                    // 키보드가 열림
                    isKeyboardOpen = true;
                    document.body.classList.add('keyboard-open');
                    const mainElement = document.querySelector('.immersive-main');
                    if (mainElement) {
                        mainElement.classList.add('keyboard-open');
                    }
                } else {
                    // 키보드가 닫힘
                    isKeyboardOpen = false;
                    document.body.classList.remove('keyboard-open');
                    const mainElement = document.querySelector('.immersive-main');
                    if (mainElement) {
                        mainElement.classList.remove('keyboard-open');
                    }
                }
            });
        }

        // 모바일 성능 최적화
        function setupMobilePerformance() {
            // 스크롤 성능 최적화
            document.addEventListener('scroll', throttle(handleScroll, 16), { passive: true });
            
            // 리사이즈 성능 최적화
            window.addEventListener('resize', debounce(handleResize, 250));
            
            // 터치 성능 최적화
            document.addEventListener('touchstart', () => {}, { passive: true });
            document.addEventListener('touchmove', () => {}, { passive: true });
        }

        // 모바일 네비게이션 최적화
        function setupMobileNavigation() {
            // 모바일 네비게이션 버튼 표시/숨김
            const mobileNavControls = document.getElementById('mobile-nav-controls');
            if (mobileNavControls) {
                mobileNavControls.style.display = isMobile ? 'block' : 'none';
            }

            // 터치 제스처 안내
            if (isMobile) {
                showToast('💡 터치 제스처: 좌우 스와이프로 문제 이동, 상하 스와이프로 정답/힌트 확인', 'info');
            }
        }

        // 스크롤 처리
        function handleScroll() {
            // 스크롤 성능 최적화를 위한 처리
            requestAnimationFrame(() => {
                // 필요한 경우에만 DOM 조작
            });
        }

        // 리사이즈 처리
        function handleResize() {
            // 화면 크기 변경 시 레이아웃 재조정
            if (isMobile) {
                setupMobileNavigation();
            }
        }

        // 고몰입 모드 확인
        function isImmersiveMode() {
            const container = document.getElementById('immersive-learning-container');
            return container && container.classList.contains('active');
        }

        // 유틸리티 함수들
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // 모바일 접근성 개선
        function setupMobileAccessibility() {
            // 포커스 관리
            document.addEventListener('focusin', (e) => {
                if (isMobile && e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    // 입력 필드 포커스 시 키보드 대응
                    setTimeout(() => {
                        e.target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                }
            });

            // 터치 접근성
            document.addEventListener('touchstart', (e) => {
                const target = e.target.closest('button, .nav-btn, .tool-btn');
                if (target) {
                    target.setAttribute('aria-pressed', 'true');
                }
            });

            document.addEventListener('touchend', (e) => {
                const target = e.target.closest('button, .nav-btn, .tool-btn');
                if (target) {
                    target.setAttribute('aria-pressed', 'false');
                }
            });
        }

        // 모바일 성능 테스트
        function testMobilePerformance() {
            if (!isMobile) return;

            const performanceData = {
                touchResponse: 0,
                scrollPerformance: 0,
                animationFPS: 0,
                memoryUsage: 0,
                loadTime: 0
            };

            // 터치 응답성 테스트
            const touchStartTime = performance.now();
            document.addEventListener('touchstart', () => {
                const touchEndTime = performance.now();
                performanceData.touchResponse = touchEndTime - touchStartTime;
            }, { once: true });

            // 스크롤 성능 테스트
            let frameCount = 0;
            const startTime = performance.now();
            
            function countFrames() {
                frameCount++;
                if (performance.now() - startTime < 1000) {
                    requestAnimationFrame(countFrames);
                } else {
                    performanceData.animationFPS = frameCount;
                }
            }
            countFrames();

            // 메모리 사용량 체크
            if (performance.memory) {
                performanceData.memoryUsage = performance.memory.usedJSHeapSize / 1024 / 1024; // MB
            }

            // 로딩 시간 측정
            performanceData.loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;

            console.log('모바일 성능 테스트 결과:', performanceData);
            return performanceData;
        }

        // 모바일 사용성 개선
        function improveMobileUsability() {
            if (!isMobile) return;

            // 더블탭 줌 방지
            let lastTouchEnd = 0;
            document.addEventListener('touchend', (e) => {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    e.preventDefault();
                }
                lastTouchEnd = now;
            }, false);

            // 스크롤 바운스 효과 개선
            document.body.style.overscrollBehavior = 'contain';

            // 터치 액션 최적화
            const touchElements = document.querySelectorAll('.nav-btn, .tool-btn, .immersive-btn');
            touchElements.forEach(element => {
                element.style.touchAction = 'manipulation';
            });

            // 모바일 전용 스타일 적용
            document.body.classList.add('mobile-optimized');
        }

        // 모바일 네트워크 최적화
        function optimizeMobileNetwork() {
            if (!isMobile) return;

            // 오프라인 감지
            window.addEventListener('online', () => {
                showToast('인터넷 연결이 복구되었습니다.', 'success');
            });

            window.addEventListener('offline', () => {
                showToast('인터넷 연결이 끊어졌습니다. 오프라인 모드로 전환됩니다.', 'warning');
            });

            // 네트워크 상태 모니터링
            if ('connection' in navigator) {
                const connection = navigator.connection;
                const updateNetworkStatus = () => {
                    const effectiveType = connection.effectiveType;
                    const downlink = connection.downlink;
                    
                    if (effectiveType === 'slow-2g' || effectiveType === '2g') {
                        // 느린 네트워크 최적화
                        optimizeForSlowNetwork();
                    }
                };

                connection.addEventListener('change', updateNetworkStatus);
                updateNetworkStatus();
            }
        }

        // 느린 네트워크 최적화
        function optimizeForSlowNetwork() {
            // 이미지 지연 로딩
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.loading = 'lazy';
            });

            // 애니메이션 최적화
            document.body.style.animationDuration = '0.2s';
            
            // 불필요한 효과 비활성화
            document.body.classList.add('low-bandwidth');
        }

        // 모바일 배터리 최적화
        function optimizeMobileBattery() {
            if (!isMobile) return;

            // 백그라운드 탭 감지
            let isPageVisible = true;
            document.addEventListener('visibilitychange', () => {
                isPageVisible = !document.hidden;
                
                if (!isPageVisible) {
                    // 백그라운드에서 성능 최적화
                    pauseAnimations();
                    reduceUpdateFrequency();
                } else {
                    // 포그라운드로 돌아올 때 복구
                    resumeAnimations();
                    restoreUpdateFrequency();
                }
            });

            // 배터리 API 사용 (지원하는 경우)
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    if (battery.level < 0.2) {
                        // 배터리 부족 시 최적화
                        enablePowerSavingMode();
                    }
                });
            }
        }

        // 애니메이션 일시정지/재개
        function pauseAnimations() {
            document.body.style.animationPlayState = 'paused';
        }

        function resumeAnimations() {
            document.body.style.animationPlayState = 'running';
        }

        // 업데이트 빈도 조절
        function reduceUpdateFrequency() {
            // 타이머 간격 증가
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 2000); // 2초로 증가
            }
        }

        function restoreUpdateFrequency() {
            // 타이머 간격 복구
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000); // 1초로 복구
            }
        }

        // 절전 모드 활성화
        function enablePowerSavingMode() {
            document.body.classList.add('power-saving');
            showToast('🔋 배터리 부족으로 절전 모드가 활성화되었습니다.', 'warning');
        }

        // 채점 결과 표시
        function displayGradingResult(score, feedback) {
            const scoreDisplay = document.getElementById('score-display');
            const feedbackSection = document.getElementById('feedback-section');
            
            if (scoreDisplay) {
                scoreDisplay.innerHTML = `🎯 점수: ${score}점`;
                
                // 점수에 따른 스타일 적용
                scoreDisplay.className = 'score-display';
                if (score >= 80) {
                    scoreDisplay.classList.add('high');
                } else if (score >= 60) {
                    scoreDisplay.classList.add('medium');
                } else {
                    scoreDisplay.classList.add('low');
                }
            }
            
            if (feedbackSection) {
                feedbackSection.innerHTML = `
                    <div class="feedback-title">📋 채점 결과</div>
                    <div class="feedback-content">${feedback.replace(/\n/g, '<br>')}</div>
                `;
            }
        }

        // 암기 완료 처리
        function markAsMemorized() {
            const card = currentCards[currentCardIndex];
            memorizedCards.add(card.id);
            weakCards.delete(card.id); // 취약에서 제거
            studySession.correct++;
            saveProgress();
            updateStats();
            
            // 색종이 효과
            createConfetti();
            
            // 학습 모드에서는 자동으로 다음 문제로 넘어가지 않음
            const learningCard = document.querySelector('.memory-card.learning-card');
            if (!learningCard || !learningCard.classList.contains('show')) {
                setTimeout(() => nextCard(), 1500);
            } else {
                showToast('✅ 암기완료로 표시되었습니다. 수동으로 다음 문제로 이동하세요.', 'success');
            }
        }

        // 취약문제 표시
        function markAsWeak() {
            const card = currentCards[currentCardIndex];
            weakCards.add(card.id);
            studySession.incorrect++;
            saveProgress();
            updateStats();
            
            // 취약문제 통계 업데이트
            const weakCount = weakCards.size;
            const totalCount = cardDatabase.length;
            const weakPercentage = Math.round((weakCount / totalCount) * 100);
            
            showToast(`❌ 취약문제로 등록! (총 ${weakCount}개, ${weakPercentage}%)`, 'warning');
            
            // 취약문제 복습 권장 메시지
            setTimeout(() => {
                if (weakCount >= 5) {
                    showToast('💪 취약문제가 5개 이상입니다. 복습을 권장합니다!', 'info');
                }
            }, 2000);
            
            // 학습 모드에서는 자동으로 다음 문제로 넘어가지 않음
            const learningCard = document.querySelector('.memory-card.learning-card');
            if (!learningCard || !learningCard.classList.contains('show')) {
                setTimeout(() => nextCard(), 1500);
            } else {
                showToast('⚠️ 취약문제로 등록되었습니다. 수동으로 다음 문제로 이동하세요.', 'warning');
            }
        }

        // 다음 카드
        function nextCard() {
            studySession.studied++;
            if (currentCardIndex < currentCards.length - 1) {
                showCard(currentCardIndex + 1);
            } else {
                showResults();
            }
        }

        // 이전 카드
        function previousCard() {
            if (currentCardIndex > 0) {
                showCard(currentCardIndex - 1);
            }
        }

        // 카드 네비게이션 함수 - 상하: 정답보기, 좌우: 문제전환
        function navigateCard(direction) {
            switch(direction) {
                case 'up':
                case 'down':
                    // 상하 화살표: 현재 문제의 정답 확인
                    if (currentCardIndex >= 0 && currentCardIndex < filteredCards.length) {
                        flipCard();
                        // 정답 표시 시 시각적 피드백 제공
                        showToast('정답을 확인하세요!', 'info');
                    }
                    break;
                case 'left':
                    // 왼쪽 화살표: 이전 문제
                    previousCard();
                    break;
                case 'right':
                    // 오른쪽 화살표: 다음 문제
                    nextCard();
                    break;
            }
        }

        // 타이머 시작
        function startTimer() {
            const timerDisplay = document.getElementById('timer');
            if (timerDisplay) {
                timerDisplay.style.display = 'block';
                studySession.startTime = Date.now();
                
                timerInterval = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - studySession.startTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    // 30분 경과시 경고
                    if (elapsed === 1800) {
                        timerDisplay.classList.add('warning');
                        showToast('⏰ 30분이 경과했습니다. 휴식을 취하세요!', 'warning');
                    }
                }, 1000);
            }
        }

        // 결과 표시
        function showResults() {
            clearInterval(timerInterval);
            clearInterval(blinkInterval);
            clearInterval(autoFlipTimeout);
            
            const modal = document.getElementById('result-modal');
            const elapsed = studySession.startTime ? Math.floor((Date.now() - studySession.startTime) / 1000) : 0;
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const correctRate = studySession.studied > 0 ? 
                Math.round((studySession.correct / studySession.studied) * 100) : 0;
            const points = studySession.correct * 10;
            
            const studiedCountEl = document.getElementById('studied-count');
            const correctRateEl = document.getElementById('correct-rate');
            const timeSpentEl = document.getElementById('time-spent');
            const pointsEarnedEl = document.getElementById('points-earned');
            
            if (studiedCountEl) studiedCountEl.textContent = studySession.studied;
            if (correctRateEl) correctRateEl.textContent = correctRate + '%';
            if (timeSpentEl) timeSpentEl.textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (pointsEarnedEl) pointsEarnedEl.textContent = points;
            
            if (modal) modal.classList.add('show');
            
            // 결과에 따른 메시지
            if (correctRate >= 90) {
                createConfetti();
                showToast('🎉 훌륭합니다! 합격 확실해요!', 'success');
            } else if (correctRate >= 70) {
                showToast('👍 잘하고 있어요! 조금만 더 노력하세요!', 'info');
            } else {
                showToast('💪 화이팅! 복습이 필요해요!', 'warning');
            }
        }

        // 모달 닫기
        function closeModal() {
            const modal = document.getElementById('result-modal');
            if (modal) {
                modal.classList.remove('show');
            }
            resetSession();
        }

        // 세션 초기화
        function resetSession() {
            studySession = {
                startTime: null,
                studied: 0,
                correct: 0,
                incorrect: 0
            };
            clearInterval(timerInterval);
            clearInterval(blinkInterval);
            clearInterval(autoFlipTimeout);
            speedMode = false;
            const timerEl = document.getElementById('timer');
            if (timerEl) {
                timerEl.style.display = 'none';
            }
        }

        // 통계 업데이트
        function updateStats() {
            const total = cardDatabase.length;
            const memorized = memorizedCards.size;
            const remaining = total - memorized;
            const progress = total > 0 ? Math.round((memorized / total) * 100) : 0;
            const accuracy = getAccuracyRate();
            
            const totalCardsEl = document.getElementById('total-cards');
            const memorizedCardsEl = document.getElementById('memorized-cards');
            const remainingCardsEl = document.getElementById('remaining-cards');
            const progressTextEl = document.getElementById('progress-text');
            const progressFillEl = document.getElementById('progress-fill');
            const accuracyRateEl = document.getElementById('accuracy-rate');
            const streakDaysEl = document.getElementById('streak-days');
            
            if (totalCardsEl) totalCardsEl.textContent = total;
            if (memorizedCardsEl) memorizedCardsEl.textContent = memorized;
            if (remainingCardsEl) remainingCardsEl.textContent = remaining;
            if (progressTextEl) progressTextEl.textContent = progress + '%';
            if (progressFillEl) progressFillEl.style.width = progress + '%';
            if (accuracyRateEl) accuracyRateEl.textContent = accuracy + '%';
            
            // 연속 학습일 계산
            const streak = getStudyStreak();
            if (streakDaysEl) streakDaysEl.textContent = streak + '일';
        }

        // 정답률 계산
        function getAccuracyRate() {
            const savedData = localStorage.getItem('safetyMasterStats');
            if (savedData) {
                const stats = JSON.parse(savedData);
                if (stats.totalAttempts > 0) {
                    return Math.round((stats.correctAnswers / stats.totalAttempts) * 100);
                }
            }
            return 0;
        }

        // 연속 학습일 계산
        function getStudyStreak() {
            const savedData = localStorage.getItem('safetyMasterStreak');
            if (savedData) {
                const streakData = JSON.parse(savedData);
                const lastStudy = new Date(streakData.lastStudyDate);
                const today = new Date();
                const diffDays = Math.floor((today - lastStudy) / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0 || diffDays === 1) {
                    return streakData.streak;
                }
            }
            return 0;
        }

        // 진도 저장
        function saveProgress() {
            const progressData = {
                memorizedCards: Array.from(memorizedCards),
                weakCards: Array.from(weakCards),
                lastUpdate: new Date().toISOString()
            };
            localStorage.setItem('safetyMasterProgress', JSON.stringify(progressData));
            
            // 통계 저장
            const savedStats = localStorage.getItem('safetyMasterStats');
            const stats = savedStats ? JSON.parse(savedStats) : { totalAttempts: 0, correctAnswers: 0 };
            stats.totalAttempts += studySession.studied;
            stats.correctAnswers += studySession.correct;
            localStorage.setItem('safetyMasterStats', JSON.stringify(stats));
            
            // 연속 학습일 저장
            const today = new Date().toDateString();
            const savedStreak = localStorage.getItem('safetyMasterStreak');
            const streakData = savedStreak ? JSON.parse(savedStreak) : { streak: 0, lastStudyDate: null };
            
            if (streakData.lastStudyDate !== today) {
                const lastDate = new Date(streakData.lastStudyDate);
                const todayDate = new Date(today);
                const diffDays = Math.floor((todayDate - lastDate) / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1) {
                    streakData.streak++;
                } else if (diffDays > 1) {
                    streakData.streak = 1;
                }
                streakData.lastStudyDate = today;
                localStorage.setItem('safetyMasterStreak', JSON.stringify(streakData));
            }
        }

        // 진도 불러오기
        function loadProgress() {
            const savedData = localStorage.getItem('safetyMasterProgress');
            if (savedData) {
                const data = JSON.parse(savedData);
                memorizedCards = new Set(data.memorizedCards);
                weakCards = new Set(data.weakCards);
            }
        }

        // 토스트 메시지
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = 'voice-indicator show';
            toast.textContent = message;
            toast.style.background = type === 'success' ? '#22c55e' : 
                                     type === 'warning' ? '#f59e0b' : 
                                     type === 'danger' ? '#ef4444' : '#3b82f6';
            toast.style.position = 'fixed';
            toast.style.bottom = '30px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.zIndex = '9999';
            document.body.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }


        // 색종이 효과
        function createConfetti() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = ['#fbbf24', '#22c55e', '#3b82f6', '#ef4444', '#a855f7'][Math.floor(Math.random() * 5)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.remove();
                        }
                    }, 3000);
                }, i * 50);
            }
        }

        // 슬라이드 시스템 전역 변수
        let slideMode = null;
        let slideIndex = 0;
        let slideCards = [];
        let slideTimer = null;
        let slideAutoFlip = false;

        // 슬라이드 모드 시작 - 16:9 풀스크린 몰입형 경험
        function startSlideMode(mode) {
            slideMode = mode;
            slideIndex = 0;
            slideCards = [...currentCards];
            
            // 슬라이드 컨테이너 표시
            const container = document.getElementById('slide-container');
            const card = document.getElementById('slide-card');
            const indicator = document.getElementById('mode-indicator');
            
            container.classList.add('active');
            card.className = 'slide-card';
            
            // 풀스크린 몰입형 경험을 위한 스타일 적용
            document.body.style.overflow = 'hidden';
            container.style.display = 'block';
            
            // 모드별 설정
            switch(mode) {
                case 'speed':
                    card.classList.add('speed-mode');
                    indicator.className = 'speed-indicator';
                    indicator.textContent = '⚡ 스피드 모드';
                    indicator.style.display = 'block';
                    startSpeedMode();
                    break;
                case 'flash':
                    card.classList.add('flash-mode');
                    indicator.className = 'flash-indicator';
                    indicator.textContent = '⚡ 깜박이 모드';
                    indicator.style.display = 'block';
                    startFlashMode();
                    break;
                case 'test':
                    card.classList.add('test-mode');
                    indicator.className = 'test-indicator';
                    indicator.textContent = '📝 테스트 모드';
                    indicator.style.display = 'block';
                    startTestMode();
                    break;
                case 'weak':
                    card.classList.add('weak-mode');
                    indicator.className = 'weak-indicator';
                    indicator.textContent = '💪 취약문제 복습';
                    indicator.style.display = 'block';
                    startWeakMode();
                    break;
            }
            
            updateSlideContent();
        }

        // 슬라이드 닫기
        function closeSlide() {
            const container = document.getElementById('slide-container');
            container.classList.remove('active');
            
            // 풀스크린 해제
            document.body.style.overflow = '';
            container.style.display = 'none';
            
            if (slideTimer) {
                clearInterval(slideTimer);
                slideTimer = null;
            }
            
            slideMode = null;
            slideIndex = 0;
            slideCards = [];
            
            // 슬라이드 종료 메시지
            showToast('슬라이드 모드가 종료되었습니다.', 'info');
        }

        // 슬라이드 네비게이션
        function navigateSlide(direction) {
            switch(direction) {
                case 'up':
                case 'down':
                    // 상하 화살표: 현재 슬라이드의 정답 확인
                    if (slideIndex >= 0 && slideIndex < slideCards.length) {
                        flipSlide();
                        // 정답 표시 시 시각적 피드백 제공
                        showToast('정답을 확인하세요!', 'info');
                    }
                    break;
                case 'left':
                    if (slideIndex > 0) {
                        slideIndex--;
                        updateSlideContent();
                    }
                    break;
                case 'right':
                    if (slideIndex < slideCards.length - 1) {
                        slideIndex++;
                        updateSlideContent();
                    }
                    break;
            }
        }

        // 슬라이드 내용 업데이트 - 개선된 안정성
        function updateSlideContent() {
            if (slideCards.length === 0) {
                console.warn('슬라이드 카드가 없습니다.');
                return;
            }
            
            if (slideIndex < 0 || slideIndex >= slideCards.length) {
                console.warn(`잘못된 슬라이드 인덱스: ${slideIndex}`);
                return;
            }
            
            const card = slideCards[slideIndex];
            if (!card) {
                console.warn('현재 슬라이드 카드가 없습니다.');
                return;
            }
            
            // DOM 요소들을 안전하게 가져오기
            const title = document.getElementById('slide-title');
            const question = document.getElementById('slide-question');
            const answer = document.getElementById('slide-answer');
            const progressText = document.getElementById('slide-progress-text');
            const progressFill = document.getElementById('progress-fill');
            const flipBtn = document.getElementById('flip-btn');
            
            // 제목 설정
            const modeNames = {
                'speed': '스피드 모드',
                'flash': '깜박이 모드', 
                'test': '테스트 모드',
                'weak': '취약문제 복습'
            };
            if (title) {
                title.textContent = modeNames[slideMode] || '학습 모드';
            }
            
            // 문제 표시
            if (question) {
                question.textContent = card.question || '문제가 없습니다.';
            }
            if (answer) {
                answer.textContent = card.answer || '정답이 없습니다.';
                answer.classList.remove('show');
            }
            
            // 진행률 업데이트
            const progress = ((slideIndex + 1) / slideCards.length) * 100;
            if (progressText) {
                progressText.textContent = `${slideIndex + 1} / ${slideCards.length}`;
            }
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
            
            // 버튼 상태 초기화
            if (flipBtn) {
                flipBtn.textContent = '정답 보기';
                flipBtn.onclick = flipSlide;
            }
            
            // 슬라이드 상태 일관성 확인
            console.log(`슬라이드 업데이트: ${slideIndex + 1}/${slideCards.length} (${Math.round(progress)}%)`);
        }

        // 슬라이드 뒤집기 - 현재 슬라이드의 정답 표시
        function flipSlide() {
            const answer = document.getElementById('slide-answer');
            const flipBtn = document.getElementById('flip-btn');
            
            if (answer && slideIndex >= 0 && slideIndex < slideCards.length) {
                // 현재 슬라이드의 정답 표시
                const currentSlide = slideCards[slideIndex];
                if (currentSlide && currentSlide.answer) {
                    // 정답 내용이 올바르게 설정되어 있는지 확인
                    if (answer.textContent !== currentSlide.answer) {
                        answer.textContent = currentSlide.answer;
                    }
                    
                    answer.classList.add('show');
                    flipBtn.textContent = '문제 보기';
                    flipBtn.onclick = () => {
                        answer.classList.remove('show');
                        flipBtn.textContent = '정답 보기';
                        flipBtn.onclick = flipSlide;
                    };
                    
                    console.log('현재 슬라이드의 정답이 표시되었습니다:', currentSlide.question);
                }
            }
            
            // 힌트는 자동으로 표시하지 않음 (학습 효과를 위해)
            // 사용자가 직접 힌트를 요청해야만 표시됨
        }

        // 다음 슬라이드 - 개선된 안정성
        function nextSlide() {
            if (slideCards.length === 0) {
                console.warn('슬라이드 카드가 없습니다.');
                return;
            }
            
            if (slideIndex < slideCards.length - 1) {
                slideIndex++;
                updateSlideContent();
                showToast(`다음 문제로 이동: ${slideIndex + 1}/${slideCards.length}`, 'info');
            } else {
                // 마지막 문제 완료
                console.log('모든 슬라이드 완료');
                showSlideResults();
            }
        }

        // 슬라이드 결과 표시
        function showSlideResults() {
            const question = document.getElementById('slide-question');
            const answer = document.getElementById('slide-answer');
            const actions = document.querySelector('.slide-actions');
            
            question.textContent = '🎉 학습 완료!';
            answer.textContent = `총 ${slideCards.length}개 문제를 완료했습니다.`;
            answer.classList.add('show');
            
            actions.innerHTML = `
                <button class="slide-btn primary" onclick="restartSlide()">다시 시작</button>
                <button class="slide-btn" onclick="closeSlide()">닫기</button>
            `;
        }

        // 슬라이드 재시작
        function restartSlide() {
            slideIndex = 0;
            updateSlideContent();
            
            const actions = document.querySelector('.slide-actions');
            actions.innerHTML = `
                <button class="slide-btn primary" onclick="flipSlide()" id="flip-btn">정답 보기</button>
                <button class="slide-btn" onclick="showSlideHint()" id="hint-btn">💡 힌트</button>
                <button class="slide-btn danger" onclick="markWeak()" id="weak-btn">취약문제</button>
                <button class="slide-btn warning" onclick="markMemorized()" id="memorized-btn">암기완료</button>
                <button class="slide-btn" onclick="nextSlide()" id="next-btn">다음 문제</button>
            `;
        }

        // 스피드 모드 시작
        function startSpeedMode() {
            slideAutoFlip = true;
            slideTimer = setInterval(() => {
                if (slideAutoFlip) {
                    flipSlide();
                    setTimeout(() => {
                        if (slideIndex < slideCards.length - 1) {
                            nextSlide();
                        } else {
                            clearInterval(slideTimer);
                            showSlideResults();
                        }
                    }, 2000);
                }
            }, 3000);
        }

        // 깜박이 모드 시작
        function startFlashMode() {
            slideAutoFlip = true;
            slideTimer = setInterval(() => {
                if (slideAutoFlip) {
                    flipSlide();
                    setTimeout(() => {
                        if (slideIndex < slideCards.length - 1) {
                            nextSlide();
                        } else {
                            clearInterval(slideTimer);
                            showSlideResults();
                        }
                    }, 1000);
                }
            }, 2000);
        }

        // 테스트 모드 시작
        function startTestMode() {
            // 테스트 모드에서는 자동 진행 없음
            slideAutoFlip = false;
        }

        // 취약문제 모드 시작
        function startWeakMode() {
            // 취약문제만 필터링
            slideCards = cardDatabase.filter(card => weakCards.has(card.id));
            if (slideCards.length === 0) {
                showToast('취약문제가 없습니다!', 'info');
                closeSlide();
                return;
            }
            updateSlideContent();
        }

        // 슬라이드에서 취약문제 표시
        function markWeak() {
            const card = slideCards[slideIndex];
            weakCards.add(card.id);
            saveProgress();
            showToast('취약문제로 등록했습니다!', 'warning');
            nextSlide();
        }

        // 슬라이드에서 암기완료 표시
        function markMemorized() {
            const card = slideCards[slideIndex];
            memorizedCards.add(card.id);
            weakCards.delete(card.id);
            saveProgress();
            showToast('암기완료로 등록했습니다!', 'success');
            nextSlide();
        }

        // 슬라이드 힌트 표시 - 학습 효과 극대화
        function showSlideHint() {
            const card = slideCards[slideIndex];
            const answer = document.getElementById('slide-answer');
            
            // 힌트만 표시 (정답 전체가 아닌)
            answer.textContent = `💡 힌트: ${card.hint}`;
            answer.classList.add('show');
            
            // 힌트 표시 시 학습 효과 극대화 메시지
            showToast('💡 힌트를 확인했습니다. 이제 정답을 생각해보세요!', 'info');
            
            // 힌트 표시 후 정답 보기 버튼으로 변경
            const flipBtn = document.getElementById('flip-btn');
            flipBtn.textContent = '정답 보기';
            flipBtn.style.animation = 'pulse 1s infinite';
            
            flipBtn.onclick = () => {
                answer.textContent = card.answer;
                flipBtn.textContent = '문제 보기';
                flipBtn.style.animation = '';
                flipBtn.onclick = () => {
                    answer.classList.remove('show');
                    flipBtn.textContent = '정답 보기';
                    flipBtn.onclick = flipSlide;
                };
            };
        }

        // 키보드 네비게이션
        document.addEventListener('keydown', function(e) {
            const container = document.getElementById('slide-container');
            if (!container.classList.contains('active')) return;
            
            switch(e.key) {
                case 'ArrowUp':
                case 'ArrowLeft':
                    e.preventDefault();
                    navigateSlide('up');
                    break;
                case 'ArrowDown':
                case 'ArrowRight':
                case ' ':
                    e.preventDefault();
                    if (e.key === ' ') {
                        flipSlide();
                    } else {
                        navigateSlide('down');
                    }
                    break;
                case 'Escape':
                    closeSlide();
                    break;
            }
        });

        // 기존 버튼들에 슬라이드 모드 연결
        document.addEventListener('DOMContentLoaded', function() {
            // 스피드 모드 버튼
            const speedBtn = document.getElementById('speed-mode-btn');
            if (speedBtn) {
                speedBtn.addEventListener('click', function() {
                    if (currentCards.length === 0) {
                        showToast('먼저 학습 모드를 선택해주세요!', 'warning');
                        return;
                    }
                    startSlideMode('speed');
                });
            }

            // 깜박이 모드 버튼 (blink-mode-btn)
            const flashBtn = document.getElementById('blink-mode-btn');
            if (flashBtn) {
                flashBtn.addEventListener('click', function() {
                    if (currentCards.length === 0) {
                        showToast('먼저 학습 모드를 선택해주세요!', 'warning');
                        return;
                    }
                    startSlideMode('flash');
                });
            }

            // 테스트 모드 버튼
            const testBtn = document.getElementById('test-mode-btn');
            if (testBtn) {
                testBtn.addEventListener('click', function() {
                    if (currentCards.length === 0) {
                        showToast('먼저 학습 모드를 선택해주세요!', 'warning');
                        return;
                    }
                    startSlideMode('test');
                });
            }

            // 취약문제 복습 버튼 (review-weak-btn)
            const weakBtn = document.getElementById('review-weak-btn');
            if (weakBtn) {
                weakBtn.addEventListener('click', function() {
                    startSlideMode('weak');
                });
            }

            // 고몰입 학습 버튼 (immersive-learning-btn)
            const immersiveBtn = document.getElementById('immersive-learning-btn');
            if (immersiveBtn) {
                immersiveBtn.addEventListener('click', function() {
                    startImmersiveLearning();
                });
            }
        });
    </script>
</body>
</html>
                