# 🚀 Google Apps Script V17.0 간소화 버전 배포 가이드

## 🎯 목표
AI 분석을 완전히 제거한 V17.0 간소화 버전을 Google Apps Script에 배포하여 API 키 오류를 해결합니다.

## 📋 현재 상황
- **오류**: `API Key not found. Please pass a valid API key.`
- **원인**: 이전 버전의 Google Apps Script가 여전히 AI 분석을 시도하고 있음
- **해결책**: V17.0 간소화 버전으로 완전 교체

## 🔧 배포 단계

### 1단계: Google Apps Script 접속
1. [Google Apps Script](https://script.google.com/) 접속
2. AICAMP 프로젝트 선택

### 2단계: 기존 코드 백업 (선택사항)
1. 현재 코드를 복사하여 별도 파일로 저장
2. 파일명: `backup_previous_version_$(date).js`

### 3단계: V17.0 간소화 버전 적용
1. `docs/250821_aicamp_simplified_v17.js` 파일의 전체 내용을 복사
2. Google Apps Script 편집기에서 기존 코드를 모두 삭제
3. 복사한 V17.0 코드를 붙여넣기

### 4단계: 배포 설정 확인
1. **배포 > 새 배포** 클릭
2. **설명**: `V17.0-SIMPLIFIED-NO-AI`
3. **실행 대상**: `나`
4. **액세스 권한**: `모든 사용자`
5. **배포** 클릭

### 5단계: 배포 URL 확인
1. 배포 완료 후 URL 복사
2. 환경변수에 새로운 URL 업데이트

## ✅ V17.0 간소화 버전 특징

### 🚫 제거된 기능
- ✅ AI 분석 완전 제거
- ✅ Gemini API 호출 제거
- ✅ AI 보고서 생성 제거
- ✅ API 키 의존성 제거

### ✅ 유지된 기능
- ✅ 45문항 진단 데이터 수집
- ✅ Google Sheets 데이터 저장
- ✅ 이메일 발송 (접수확인, 관리자알림, 24시간안내)
- ✅ 진행상황 모니터링
- ✅ 오류 처리 및 로깅

### 🎯 새로운 처리 방식
- **이전**: AI 자동 분석 → 즉시 보고서 생성
- **현재**: 오프라인 수동 분석 → 24시간 내 보고서 발송

## 🔍 배포 후 확인사항

### 1. 배포 상태 확인
```javascript
// 테스트 요청
{
  "type": "diagnosis",
  "action": "diagnosis",
  "companyName": "테스트회사",
  "contactName": "테스트",
  "contactEmail": "test@example.com",
  "contactPhone": "010-1234-5678",
  "industry": "IT",
  "employeeCount": "10-50명",
  "annualRevenue": "10억~50억원 미만",
  "location": "서울특별시",
  "privacyConsent": true,
  "assessmentResponses": {
    "1": 3, "2": 3, "3": 3, "4": 3, "5": 3,
    "6": 3, "7": 3, "8": 3, "9": 3, "10": 3,
    "11": 3, "12": 3, "13": 3, "14": 3, "15": 3,
    "16": 3, "17": 3, "18": 3, "19": 3, "20": 3,
    "21": 3, "22": 3, "23": 3, "24": 3, "25": 3,
    "26": 3, "27": 3, "28": 3, "29": 3, "30": 3,
    "31": 3, "32": 3, "33": 3, "34": 3, "35": 3,
    "36": 3, "37": 3, "38": 3, "39": 3, "40": 3,
    "41": 3, "42": 3, "43": 3, "44": 3, "45": 3
  }
}
```

### 2. 응답 확인
```json
{
  "success": true,
  "type": "ai_diagnosis",
  "diagnosisId": "DIAG_45Q_...",
  "message": "AI역량진단 신청이 성공적으로 접수되었습니다. 24시간 내에 이교장이 직접 작성한 보고서를 발송해드리겠습니다.",
  "version": "V17.0-SIMPLIFIED-NO-AI",
  "processingMode": "offline_manual_analysis",
  "aiAnalysisRemoved": true
}
```

### 3. 오류 메시지 확인
- ❌ `API Key not found` 오류가 더 이상 발생하지 않아야 함
- ✅ `AI 분석이 완전히 제거된 오프라인 처리 시스템입니다.` 메시지 확인

## 🚨 주의사항

### 배포 전 확인
1. **환경변수 설정**: Google Apps Script의 환경변수가 올바르게 설정되어 있는지 확인
2. **권한 설정**: Google Sheets 및 Gmail API 권한이 활성화되어 있는지 확인
3. **할당량 확인**: 일일 이메일 발송 할당량이 충분한지 확인

### 배포 후 모니터링
1. **로그 확인**: Google Apps Script 실행 로그에서 오류 없이 정상 처리되는지 확인
2. **이메일 발송**: 접수확인, 관리자알림, 24시간안내 메일이 정상 발송되는지 확인
3. **데이터 저장**: Google Sheets에 진단 데이터가 정상 저장되는지 확인

## 📞 문제 발생 시

### 배포 실패
1. Google Apps Script 권한 확인
2. 코드 문법 오류 확인
3. 환경변수 설정 확인

### 실행 오류
1. Google Apps Script 실행 로그 확인
2. 권한 설정 확인
3. 할당량 초과 여부 확인

### 연락처
- **이메일**: hongik423@gmail.com
- **전화**: 010-9251-9743

## 🎉 완료 기준

✅ **API 키 오류 완전 해결**
✅ **진단 신청 정상 접수**
✅ **이메일 발송 정상 작동**
✅ **데이터 저장 정상 작동**
✅ **오프라인 처리 방식으로 전환 완료**

---

**배포 완료 후**: 시스템이 안정적으로 작동하는지 24시간 모니터링하고, 문제가 없으면 V17.0 간소화 버전 배포를 완료로 간주합니다.
